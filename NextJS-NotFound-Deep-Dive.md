# Next.js not-found.js â€” Deep Dive!

> **Chá»§ Ä‘á»**: `not-found.js` + `global-not-found.js` â€” 404 Error Handling
> **NgÃ´n ngá»¯**: Tiáº¿ng Viá»‡t â€” giáº£i thÃ­ch cá»±c ká»³ chi tiáº¿t!
> **PhÆ°Æ¡ng chÃ¢m**: Tá»± viáº¿t láº¡i báº±ng tay â€” KHÃ”NG dÃ¹ng thÆ° viá»‡n!
> **Nguá»“n**: https://nextjs.org/docs/app/api-reference/file-conventions/not-found
> **HÃ¬nh áº£nh trang gá»‘c**: 0 (trang chá»‰ cÃ³ text + code blocks, KHÃ”NG cÃ³ diagram/hÃ¬nh áº£nh)

---

## Má»¥c Lá»¥c

1. [Â§1. Tá»•ng Quan â€” 2 Conventions: not-found.js + global-not-found.js](#1)
2. [Â§2. not-found.js â€” Route-Level 404](#2)
3. [Â§3. global-not-found.js â€” Application-Level 404 (Experimental!)](#3)
4. [Â§4. Reference â€” Props + Good to Know](#4)
5. [Â§5. Examples â€” Data Fetching + Metadata](#5)
6. [Â§6. Status Code Behavior â€” 200 vs 404](#6)
7. [Â§7. SÆ¡ Äá»“ Tá»± Váº½ â€” Tá»•ng Há»£p](#7)
8. [Â§8. Tá»± Viáº¿t â€” NotFoundEngine](#8)
9. [Â§9. CÃ¢u Há»i Luyá»‡n Táº­p](#9)

---

## Â§1. Tá»•ng Quan â€” 2 Conventions!

```
  NOT-FOUND â€” Tá»”NG QUAN:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  Next.js cung cáº¥p 2 CONVENTIONS cho not found:               â”‚
  â”‚                                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚  â‘  not-found.js                                     â”‚    â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Route-level 404!                           â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Render khi notFound() Ä‘Æ°á»£c Gá»ŒI             â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚   trong route segment!                       â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Náº±m TRONG layout hierarchy!               â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Káº¿ thá»«a layout cha!                       â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ KHÃ”NG cáº§n <html>, <body>!                  â”‚   â”‚    â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚  â‘¡ global-not-found.js (EXPERIMENTAL!)              â”‚    â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Application-level 404!                     â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Khi URL KHÃ”NG MATCH báº¥t ká»³ route nÃ o!    â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ BYPASS layout hierarchy hoÃ n toÃ n!        â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ PHáº¢I cÃ³ <html>, <body> (full document!)   â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Pháº£i import styles, fonts riÃªng!           â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Cáº§n config experimental: globalNotFound    â”‚   â”‚    â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  KHI NÃ€O DÃ™NG CÃI NÃ€O?                                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚  User request URL                                    â”‚    â”‚
  â”‚  â”‚       â”‚                                              â”‚    â”‚
  â”‚  â”‚       â–¼                                              â”‚    â”‚
  â”‚  â”‚  URL match route nÃ o khÃ´ng?                          â”‚    â”‚
  â”‚  â”‚       â”‚              â”‚                               â”‚    â”‚
  â”‚  â”‚       â”‚ CÃ“           â”‚ KHÃ”NG                        â”‚    â”‚
  â”‚  â”‚       â–¼              â–¼                               â”‚    â”‚
  â”‚  â”‚  Route tÃ¬m tháº¥y   global-not-found.js               â”‚    â”‚
  â”‚  â”‚  â†’ Cháº¡y page.js   (hoáº·c root not-found.js)         â”‚    â”‚
  â”‚  â”‚  â†’ Náº¿u notFound()                                   â”‚    â”‚
  â”‚  â”‚    Ä‘Æ°á»£c gá»i:                                         â”‚    â”‚
  â”‚  â”‚       â”‚                                              â”‚    â”‚
  â”‚  â”‚       â–¼                                              â”‚    â”‚
  â”‚  â”‚  not-found.js                                        â”‚    â”‚
  â”‚  â”‚  (nearest in segment!)                               â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§2. not-found.js â€” Route-Level 404!

```
  not-found.js â€” CHI TIáº¾T:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  Äá»ŠNH NGHÄ¨A:                                                 â”‚
  â”‚  â†’ Render UI khi notFound() function Ä‘Æ°á»£c THROWN              â”‚
  â”‚    trong route segment!                                      â”‚
  â”‚                                                              â”‚
  â”‚  STATUS CODE:                                                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ Streamed responses:  HTTP 200!                    â”‚    â”‚
  â”‚  â”‚ â†’ Non-streamed:        HTTP 404!                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ WHY 200 khi stream?                                 â”‚    â”‚
  â”‚  â”‚ â†’ Headers Ä‘Ã£ gá»­i TRÆ¯á»šC khi stream báº¯t Ä‘áº§u!        â”‚    â”‚
  â”‚  â”‚ â†’ KhÃ´ng thá»ƒ Ä‘á»•i status code sau Ä‘Ã³!                â”‚    â”‚
  â”‚  â”‚ â†’ Next.js thÃªm <meta noindex> Ä‘á»ƒ cháº·n SEO!        â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  CODE CÆ  Báº¢N:                                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // app/not-found.tsx                                 â”‚    â”‚
  â”‚  â”‚ import Link from 'next/link'                         â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ export default function NotFound() {                 â”‚    â”‚
  â”‚  â”‚   return (                                           â”‚    â”‚
  â”‚  â”‚     <div>                                            â”‚    â”‚
  â”‚  â”‚       <h2>Not Found</h2>                             â”‚    â”‚
  â”‚  â”‚       <p>Could not find requested resource</p>       â”‚    â”‚
  â”‚  â”‚       <Link href="/">Return Home</Link>              â”‚    â”‚
  â”‚  â”‚     </div>                                           â”‚    â”‚
  â”‚  â”‚   )                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Máº·c Ä‘á»‹nh: Server Component!                       â”‚    â”‚
  â”‚  â”‚ â†’ CÃ³ thá»ƒ async! (fetch data!)                       â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG nháº­n props nÃ o!                              â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  Gá»ŒI notFound():                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // app/blog/[slug]/page.tsx                          â”‚    â”‚
  â”‚  â”‚ import { notFound } from 'next/navigation'           â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ export default async function Page({ params }) {     â”‚    â”‚
  â”‚  â”‚   const { slug } = await params                      â”‚    â”‚
  â”‚  â”‚   const post = await getPost(slug)                   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   if (!post) {                                       â”‚    â”‚
  â”‚  â”‚     notFound() // â† THROW! TÃ¬m not-found.js!       â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   return <article>{post.content}</article>           â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ notFound() throw error â†’ tÃ¬m nearest             â”‚    â”‚
  â”‚  â”‚   not-found.js trong segment hierarchy!             â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  ROOT not-found.js:                                           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ app/not-found.js â† ROOT level!                     â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Xá»­ lÃ½ UNMATCHED URLs cho TOÃ€N Bá»˜ app!           â”‚    â”‚
  â”‚  â”‚ â†’ Catch-all: URL nÃ o khÃ´ng cÃ³ route â†’ hiá»‡n!        â”‚    â”‚
  â”‚  â”‚ â†’ Káº¿t há»£p cáº£:                                       â”‚    â”‚
  â”‚  â”‚   1. notFound() calls trong code                    â”‚    â”‚
  â”‚  â”‚   2. Unmatched URLs (no route found!)               â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§3. global-not-found.js â€” Application-Level 404 (Experimental!)

```
  global-not-found.js â€” EXPERIMENTAL:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  Äá»ŠNH NGHÄ¨A:                                                 â”‚
  â”‚  â†’ Trang 404 TOÃ€N Cá»¤C cho entire application!               â”‚
  â”‚  â†’ DÃ¹ng khi URL KHÃ”NG MATCH báº¥t ká»³ route nÃ o!              â”‚
  â”‚  â†’ Next.js SKIP rendering â†’ tráº£ vá» trá»±c tiáº¿p!             â”‚
  â”‚  â†’ BYPASS layout hierarchy hoÃ n toÃ n!                       â”‚
  â”‚                                                              â”‚
  â”‚  KHÃC vá»›i not-found.js:                                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚    â”‚
  â”‚  â”‚ â”‚               â”‚ not-found.js â”‚ global-not-found â”‚  â”‚    â”‚
  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚    â”‚
  â”‚  â”‚ â”‚ Level         â”‚ Route        â”‚ Application     â”‚  â”‚    â”‚
  â”‚  â”‚ â”‚ Trigger       â”‚ notFound()   â”‚ No route match  â”‚  â”‚    â”‚
  â”‚  â”‚ â”‚ Layout        â”‚ Káº¾ THá»ªA!    â”‚ BYPASS!         â”‚  â”‚    â”‚
  â”‚  â”‚ â”‚ <html>/<body> â”‚ KHÃ”NG cáº§n   â”‚ Báº®T BUá»˜C!      â”‚  â”‚    â”‚
  â”‚  â”‚ â”‚ Styles/fonts  â”‚ Qua layout  â”‚ PHáº¢I import!   â”‚  â”‚    â”‚
  â”‚  â”‚ â”‚ Status        â”‚ Stable       â”‚ Experimental!   â”‚  â”‚    â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  KHI NÃ€O Cáº¦N global-not-found.js?                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ Khi KHÃ”NG THá»‚ build 404 báº±ng layout.js +         â”‚    â”‚
  â”‚  â”‚   not-found.js thÃ´ng thÆ°á»ng!                         â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ TRÆ¯á»œNG Há»¢P 1: Multiple Root Layouts!                â”‚    â”‚
  â”‚  â”‚ â†’ app/(admin)/layout.tsx                             â”‚    â”‚
  â”‚  â”‚ â†’ app/(shop)/layout.tsx                              â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG cÃ³ single layout cho global 404!            â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ TRÆ¯á»œNG Há»¢P 2: Dynamic Segment Root Layout!         â”‚    â”‚
  â”‚  â”‚ â†’ app/[country]/layout.tsx                           â”‚    â”‚
  â”‚  â”‚ â†’ KhÃ³ compose consistent 404 page!                  â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  SETUP:                                                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // next.config.ts â€” ENABLE FLAG!                    â”‚    â”‚
  â”‚  â”‚ import type { NextConfig } from 'next'               â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ const nextConfig: NextConfig = {                     â”‚    â”‚
  â”‚  â”‚   experimental: {                                    â”‚    â”‚
  â”‚  â”‚     globalNotFound: true,  â† ENABLE!                â”‚    â”‚
  â”‚  â”‚   },                                                 â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚ export default nextConfig                            â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  CODE:                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // app/global-not-found.tsx                          â”‚    â”‚
  â”‚  â”‚ import './globals.css'        â† PHáº¢I import riÃªng! â”‚    â”‚
  â”‚  â”‚ import { Inter } from 'next/font/google'             â”‚    â”‚
  â”‚  â”‚ import type { Metadata } from 'next'                 â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ const inter = Inter({ subsets: ['latin'] })          â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ export const metadata: Metadata = {                  â”‚    â”‚
  â”‚  â”‚   title: '404 - Page Not Found',                     â”‚    â”‚
  â”‚  â”‚   description: 'Page does not exist.',               â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ export default function GlobalNotFound() {           â”‚    â”‚
  â”‚  â”‚   return (                                           â”‚    â”‚
  â”‚  â”‚     <html lang="en" className={inter.className}>    â”‚    â”‚
  â”‚  â”‚       <body>           â† PHáº¢I CÃ“!                  â”‚    â”‚
  â”‚  â”‚         <h1>404 - Page Not Found</h1>                â”‚    â”‚
  â”‚  â”‚         <p>This page does not exist.</p>             â”‚    â”‚
  â”‚  â”‚       </body>                                        â”‚    â”‚
  â”‚  â”‚     </html>            â† PHáº¢I CÃ“!                  â”‚    â”‚
  â”‚  â”‚   )                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ âš ï¸ PHáº¢I return full HTML document!                   â”‚    â”‚
  â”‚  â”‚ âš ï¸ PHáº¢I import styles, fonts riÃªng (bypass layout!) â”‚    â”‚
  â”‚  â”‚ ğŸ’¡ DÃ¹ng smaller CSS + simpler font â†’ better perf!  â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§4. Reference â€” Props + Good to Know!

```
  REFERENCE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  PROPS:                                                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ not-found.js:        KHÃ”NG nháº­n props!            â”‚    â”‚
  â”‚  â”‚ â†’ global-not-found.js: KHÃ”NG nháº­n props!            â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ Cáº£ 2 Ä‘á»u ZERO props!                                â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  GOOD TO KNOW:                                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â‘  Root app/not-found.js + app/global-not-found.js   â”‚    â”‚
  â”‚  â”‚   handle UNMATCHED URLs cho TOÃ€N Bá»˜ app!            â”‚    â”‚
  â”‚  â”‚   â†’ User visit URL khÃ´ng cÃ³ route â†’ hiá»‡n 404 UI!   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â‘¡ not-found.js catch:                               â”‚    â”‚
  â”‚  â”‚   â†’ Expected notFound() calls (trong code!)        â”‚    â”‚
  â”‚  â”‚   â†’ Unmatched URLs (toÃ n app, náº¿u á»Ÿ root!)        â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â‘¢ Next.js auto: <meta name="robots"                 â”‚    â”‚
  â”‚  â”‚   content="noindex" /> cho 404 pages!                â”‚    â”‚
  â”‚  â”‚   â†’ NgÄƒn search engines index 404!                  â”‚    â”‚
  â”‚  â”‚   â†’ Ãp dá»¥ng cho cáº£ global-not-found.js!            â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â‘£ Cáº£ 2 Ä‘á»u Server Components máº·c Ä‘á»‹nh!             â”‚    â”‚
  â”‚  â”‚   â†’ CÃ³ thá»ƒ async â†’ fetch data!                     â”‚    â”‚
  â”‚  â”‚   â†’ Náº¿u cáº§n usePathname â†’ Client Component!        â”‚    â”‚
  â”‚  â”‚   â†’ Client: fetch data phÃ­a client thay server!     â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§5. Examples â€” Data Fetching + Metadata!

```
  EXAMPLES:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  EXAMPLE 1: DATA FETCHING TRONG NOT-FOUND                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // app/not-found.tsx â€” ASYNC!                       â”‚    â”‚
  â”‚  â”‚ import Link from 'next/link'                         â”‚    â”‚
  â”‚  â”‚ import { headers } from 'next/headers'               â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ export default async function NotFound() {           â”‚    â”‚
  â”‚  â”‚   const headersList = await headers()                â”‚    â”‚
  â”‚  â”‚   const domain = headersList.get('host')             â”‚    â”‚
  â”‚  â”‚   const data = await getSiteData(domain)             â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   return (                                           â”‚    â”‚
  â”‚  â”‚     <div>                                            â”‚    â”‚
  â”‚  â”‚       <h2>Not Found: {data.name}</h2>                â”‚    â”‚
  â”‚  â”‚       <p>Could not find requested resource</p>       â”‚    â”‚
  â”‚  â”‚       <p>                                            â”‚    â”‚
  â”‚  â”‚         View <Link href="/blog">all posts</Link>     â”‚    â”‚
  â”‚  â”‚       </p>                                           â”‚    â”‚
  â”‚  â”‚     </div>                                           â”‚    â”‚
  â”‚  â”‚   )                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ KEY POINTS:                                          â”‚    â”‚
  â”‚  â”‚ â†’ Server Component â†’ cÃ³ thá»ƒ async!                 â”‚    â”‚
  â”‚  â”‚ â†’ headers() â†’ láº¥y request headers!                 â”‚    â”‚
  â”‚  â”‚ â†’ getSiteData() â†’ fetch data dá»±a trÃªn domain!     â”‚    â”‚
  â”‚  â”‚ â†’ Dynamic content cho 404 page!                     â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ âš ï¸ Náº¿u cáº§n usePathname:                             â”‚    â”‚
  â”‚  â”‚ â†’ Chuyá»ƒn sang Client Component!                     â”‚    â”‚
  â”‚  â”‚ â†’ Fetch data phÃ­a client thay server!               â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  EXAMPLE 2: METADATA CHO GLOBAL-NOT-FOUND                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // app/global-not-found.tsx                          â”‚    â”‚
  â”‚  â”‚ import type { Metadata } from 'next'                 â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ export const metadata: Metadata = {                  â”‚    â”‚
  â”‚  â”‚   title: 'Not Found',                                â”‚    â”‚
  â”‚  â”‚   description: 'Page does not exist.',               â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ export default function GlobalNotFound() {           â”‚    â”‚
  â”‚  â”‚   return (                                           â”‚    â”‚
  â”‚  â”‚     <html lang="en">                                 â”‚    â”‚
  â”‚  â”‚       <body>                                         â”‚    â”‚
  â”‚  â”‚         <div>                                        â”‚    â”‚
  â”‚  â”‚           <h1>Not Found</h1>                         â”‚    â”‚
  â”‚  â”‚           <p>Page does not exist.</p>                 â”‚    â”‚
  â”‚  â”‚         </div>                                       â”‚    â”‚
  â”‚  â”‚       </body>                                        â”‚    â”‚
  â”‚  â”‚     </html>                                          â”‚    â”‚
  â”‚  â”‚   )                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Export metadata OBJECT hoáº·c generateMetadata()!   â”‚    â”‚
  â”‚  â”‚ â†’ Customize <title>, <meta> cho 404!               â”‚    â”‚
  â”‚  â”‚ â†’ Next.js auto thÃªm <meta noindex>!                â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§6. Status Code Behavior â€” 200 vs 404!

```
  STATUS CODE BEHAVIOR:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚  TRÆ¯á»œNG Há»¢P 1: NON-STREAMED RESPONSE                â”‚    â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ notFound() gá»i TRÆ¯á»šC streaming báº¯t Ä‘áº§u!  â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Headers chÆ°a gá»­i!                          â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Next.js CÃ“ THá»‚ set status = 404!          â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ HTTP 404 â† ÄÃšNG status code!             â”‚   â”‚    â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚  TRÆ¯á»œNG Há»¢P 2: STREAMED RESPONSE                    â”‚    â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ notFound() gá»i SAU streaming báº¯t Ä‘áº§u!    â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Headers ÄÃƒ gá»­i (status = 200!)           â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ KHÃ”NG THá»‚ Ä‘á»•i status code!                â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ HTTP 200 â† "soft 404"!                   â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚                                              â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ MITIGATION:                                  â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ Next.js auto thÃªm:                        â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚   <meta name="robots" content="noindex">    â”‚   â”‚    â”‚
  â”‚  â”‚  â”‚ â†’ NgÄƒn search engines index!                 â”‚   â”‚    â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  BEST PRACTICE:                                               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ Gá»i notFound() CÃ€G Sá»šM CÃ€NG Tá»T!               â”‚    â”‚
  â”‚  â”‚ â†’ Gá»i TRÆ¯á»šC Suspense boundaries!                   â”‚    â”‚
  â”‚  â”‚ â†’ Gá»i TRÆ¯á»šC báº¥t ká»³ await nÃ o suspend!              â”‚    â”‚
  â”‚  â”‚ â†’ Äá»ƒ Ä‘áº£m báº£o HTTP 404 tháº­t!                        â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§7. SÆ¡ Äá»“ Tá»± Váº½ â€” Tá»•ng Há»£p!

> **Trang docs gá»‘c KHÃ”NG cÃ³ diagram/hÃ¬nh áº£nh nÃ o (0 images).**
> CÃ¡c sÆ¡ Ä‘á»“ dÆ°á»›i Ä‘Ã¢y hoÃ n toÃ n tá»± váº½!

### SÆ¡ Äá»“ 1: not-found.js Resolution Flow

```
  NOT-FOUND RESOLUTION FLOW:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  User request: /blog/unknown-slug                            â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â–¼                                                      â”‚
  â”‚  Next.js Router: Route match?                                â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â”‚ CÃ“ match: /blog/[slug]                              â”‚
  â”‚       â–¼                                                      â”‚
  â”‚  Render page.tsx                                             â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â–¼                                                      â”‚
  â”‚  const post = await getPost(slug)                            â”‚
  â”‚  if (!post) notFound()  â† THROW!                            â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â–¼                                                      â”‚
  â”‚  TÃ¬m NEAREST not-found.js:                                   â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â”œâ”€â”€ app/blog/[slug]/not-found.js ? â”€â”€â”€ CÃ“ â†’ DÃ™NG!   â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â”œâ”€â”€ app/blog/not-found.js ?       â”€â”€â”€ CÃ“ â†’ DÃ™NG!   â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â””â”€â”€ app/not-found.js ?            â”€â”€â”€ CÃ“ â†’ DÃ™NG!   â”‚
  â”‚                                    (ROOT â€” cuá»‘i cÃ¹ng!)       â”‚
  â”‚                                                              â”‚
  â”‚  RENDER:                                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ <RootLayout>          â† GIá»® NGUYÃŠN!                â”‚    â”‚
  â”‚  â”‚   <BlogLayout>        â† GIá»® NGUYÃŠN!                â”‚    â”‚
  â”‚  â”‚     <NotFound />      â† not-found.js content!      â”‚    â”‚
  â”‚  â”‚   </BlogLayout>                                      â”‚    â”‚
  â”‚  â”‚ </RootLayout>                                        â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Layout hierarchy PRESERVED!                       â”‚    â”‚
  â”‚  â”‚ â†’ Sidebar, nav... váº«n hiá»‡n!                         â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÆ¡ Äá»“ 2: global-not-found.js â€” Bypass Flow

```
  GLOBAL-NOT-FOUND BYPASS FLOW:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  User request: /completely/unknown/path                      â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â–¼                                                      â”‚
  â”‚  Next.js Router: Route match?                                â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â”‚ KHÃ”NG match báº¥t ká»³ route nÃ o!                       â”‚
  â”‚       â–¼                                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ globalNotFound enabled?                              â”‚    â”‚
  â”‚  â”‚       â”‚              â”‚                               â”‚    â”‚
  â”‚  â”‚       â”‚ CÃ“           â”‚ KHÃ”NG                        â”‚    â”‚
  â”‚  â”‚       â–¼              â–¼                               â”‚    â”‚
  â”‚  â”‚ global-not-found.js  app/not-found.js (root)        â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ KHÃC BIá»†T Lá»šN:                                      â”‚    â”‚
  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚    â”‚
  â”‚  â”‚ â”‚ BYPASS!      â”‚    â”‚ TRONG layout!            â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚              â”‚    â”‚                          â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚ <html>       â”‚    â”‚ <RootLayout>             â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚   <body>     â”‚    â”‚   <NotFound />           â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚     404!     â”‚    â”‚ </RootLayout>            â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚   </body>    â”‚    â”‚                          â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚ </html>      â”‚    â”‚ Layout + nav hiá»‡n!       â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚              â”‚    â”‚                          â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚ NO layout!   â”‚    â”‚                          â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚ NO nav!      â”‚    â”‚                          â”‚    â”‚    â”‚
  â”‚  â”‚ â”‚ Full page!   â”‚    â”‚                          â”‚    â”‚    â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÆ¡ Äá»“ 3: File Structure + Placement

```
  FILE STRUCTURE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  app/                                                        â”‚
  â”‚  â”œâ”€â”€ layout.tsx              Root layout                     â”‚
  â”‚  â”œâ”€â”€ not-found.tsx           â˜… ROOT not-found (stable!)     â”‚
  â”‚  â”œâ”€â”€ global-not-found.tsx    â˜… GLOBAL 404 (experimental!)   â”‚
  â”‚  â”‚                                                           â”‚
  â”‚  â”œâ”€â”€ blog/                                                   â”‚
  â”‚  â”‚   â”œâ”€â”€ layout.tsx          Blog layout                     â”‚
  â”‚  â”‚   â”œâ”€â”€ not-found.tsx       â˜… Blog-level 404!             â”‚
  â”‚  â”‚   â””â”€â”€ [slug]/                                             â”‚
  â”‚  â”‚       â”œâ”€â”€ page.tsx        Blog post page                  â”‚
  â”‚  â”‚       â””â”€â”€ not-found.tsx   â˜… Post-level 404! (nearest!)  â”‚
  â”‚  â”‚                                                           â”‚
  â”‚  â””â”€â”€ shop/                                                   â”‚
  â”‚      â”œâ”€â”€ page.tsx            Shop page                       â”‚
  â”‚      â””â”€â”€ [id]/                                               â”‚
  â”‚          â””â”€â”€ page.tsx        Product page                     â”‚
  â”‚          (khÃ´ng cÃ³ not-found.tsx â†’ bubble up!)              â”‚
  â”‚                                                              â”‚
  â”‚  RESOLUTION ORDER cho /shop/999 (no product):               â”‚
  â”‚  1. app/shop/[id]/not-found.tsx    â†’ KHÃ”NG CÃ“!             â”‚
  â”‚  2. app/shop/not-found.tsx         â†’ KHÃ”NG CÃ“!             â”‚
  â”‚  3. app/not-found.tsx              â†’ DÃ™NG! âœ…               â”‚
  â”‚                                                              â”‚
  â”‚  Unmatched URL /xyz/abc:                                     â”‚
  â”‚  â†’ globalNotFound: true â†’ global-not-found.tsx             â”‚
  â”‚  â†’ globalNotFound: false â†’ app/not-found.tsx               â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§8. Tá»± Viáº¿t â€” NotFoundEngine!

```javascript
/**
 * NotFoundEngine â€” MÃ´ phá»ng Next.js Not Found System!
 * Tá»± viáº¿t báº±ng tay, KHÃ”NG dÃ¹ng thÆ° viá»‡n nÃ o!
 * Covers: not-found resolution, global vs route-level,
 *         status code behavior, SEO meta injection
 */
var NotFoundEngine = (function () {

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 1. NOT-FOUND RESOLVER
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function resolveNotFound(url, fileStructure, config) {
    var segments = url.split('/').filter(function (s) { return s !== ''; });

    // Check if URL matches any route
    var routeMatched = false;
    for (var i = 0; i < fileStructure.length; i++) {
      if (fileStructure[i].type === 'page' &&
          matchRoute(fileStructure[i].path, url)) {
        routeMatched = true;
        break;
      }
    }

    if (!routeMatched) {
      // No route match â†’ global or root not-found
      if (config && config.globalNotFound) {
        return {
          url: url,
          type: 'GLOBAL_NOT_FOUND',
          file: 'app/global-not-found.tsx',
          bypassLayout: true,
          requiresHtmlBody: true,
          statusCode: 404,
          note: 'URL khÃ´ng match route nÃ o! Bypass layout hoÃ n toÃ n!'
        };
      }
      return {
        url: url,
        type: 'ROOT_NOT_FOUND',
        file: 'app/not-found.tsx',
        bypassLayout: false,
        statusCode: 404,
        note: 'URL khÃ´ng match! DÃ¹ng root not-found trong layout!'
      };
    }

    // Route matched but notFound() called
    var notFoundFile = findNearestNotFound(segments, fileStructure);
    return {
      url: url,
      type: 'ROUTE_NOT_FOUND',
      trigger: 'notFound() called in code!',
      file: notFoundFile,
      bypassLayout: false,
      statusCode: 'Depends on streaming (200 or 404)',
      note: 'Route matched nhÆ°ng data khÃ´ng tÃ¬m tháº¥y!'
    };
  }

  function matchRoute(pattern, url) {
    // Simple route matching
    var patternParts = pattern.split('/').filter(function (s) { return s !== ''; });
    var urlParts = url.split('/').filter(function (s) { return s !== ''; });
    if (patternParts.length !== urlParts.length) return false;
    for (var i = 0; i < patternParts.length; i++) {
      if (patternParts[i].match(/^\[/)) continue; // dynamic segment
      if (patternParts[i] !== urlParts[i]) return false;
    }
    return true;
  }

  function findNearestNotFound(segments, fileStructure) {
    // Walk up from deepest segment
    for (var depth = segments.length; depth >= 0; depth--) {
      var path = 'app/' + segments.slice(0, depth).join('/');
      if (path === 'app/') path = 'app';
      var notFoundPath = path + '/not-found.tsx';

      for (var i = 0; i < fileStructure.length; i++) {
        if (fileStructure[i].path === notFoundPath) {
          return notFoundPath;
        }
      }
    }
    return 'app/not-found.tsx (fallback!)';
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 2. STATUS CODE DETERMINER
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function determineStatusCode(scenario) {
    switch (scenario) {
      case 'notFound-before-stream':
        return {
          httpStatus: 404,
          behavior: 'notFound() gá»i TRÆ¯á»šC streaming!',
          headersAlreadySent: false,
          seo: 'Real 404 â€” correct status code!'
        };
      case 'notFound-after-stream':
        return {
          httpStatus: 200,
          actualStatus: 'Soft 404',
          behavior: 'notFound() gá»i SAU streaming báº¯t Ä‘áº§u!',
          headersAlreadySent: true,
          mitigation: '<meta name="robots" content="noindex"> injected!',
          seo: 'Soft 404 â€” noindex prevents indexing!'
        };
      case 'global-not-found':
        return {
          httpStatus: 404,
          behavior: 'No route match â†’ direct 404!',
          headersAlreadySent: false,
          seo: 'Real 404 + noindex meta auto!'
        };
      default:
        return { error: 'Unknown scenario!' };
    }
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 3. COMPARISON
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function compareNotFoundTypes() {
    return {
      notFoundJs: {
        name: 'not-found.js',
        level: 'Route-level',
        trigger: 'notFound() function thrown',
        layout: 'Káº¾ THá»ªA layout hierarchy!',
        htmlBody: 'KHÃ”NG cáº§n (cÃ³ layout cha!)',
        styles: 'Qua layout cha!',
        props: 'KHÃ”NG nháº­n props!',
        status: 'Stable (v13.0.0)',
        async: true,
        dataFetching: 'headers(), cookies(), fetch()...'
      },
      globalNotFoundJs: {
        name: 'global-not-found.js',
        level: 'Application-level',
        trigger: 'URL khÃ´ng match báº¥t ká»³ route!',
        layout: 'BYPASS layout hoÃ n toÃ n!',
        htmlBody: 'Báº®T BUá»˜C <html> + <body>!',
        styles: 'PHáº¢I import riÃªng!',
        props: 'KHÃ”NG nháº­n props!',
        status: 'Experimental (v15.4.0)',
        metadata: 'CÃ“ THá»‚ export metadata/generateMetadata!',
        useCases: [
          'Multiple root layouts (admin + shop)',
          'Dynamic segment root layout ([country]/layout)'
        ]
      }
    };
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // DEMO
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function demo() {
    console.log('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');
    console.log('â•‘  NOT-FOUND ENGINE â€” DEMO                  â•‘');
    console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');

    var files = [
      { path: 'app/not-found.tsx', type: 'not-found' },
      { path: 'app/global-not-found.tsx', type: 'global-not-found' },
      { path: 'app/blog/not-found.tsx', type: 'not-found' },
      { path: 'app/blog/[slug]/page.tsx', type: 'page' },
      { path: 'app/shop/[id]/page.tsx', type: 'page' }
    ];

    // 1. Route not-found (notFound() called)
    console.log('\nâ”€â”€â”€ 1. ROUTE NOT-FOUND â”€â”€â”€');
    console.log(JSON.stringify(
      resolveNotFound('/blog/unknown', files, {}), null, 2));

    // 2. Unmatched URL â€” with global
    console.log('\nâ”€â”€â”€ 2. GLOBAL NOT-FOUND â”€â”€â”€');
    console.log(JSON.stringify(
      resolveNotFound('/xyz/abc', files, { globalNotFound: true }), null, 2));

    // 3. Unmatched URL â€” without global
    console.log('\nâ”€â”€â”€ 3. ROOT NOT-FOUND (no global) â”€â”€â”€');
    console.log(JSON.stringify(
      resolveNotFound('/xyz/abc', files, { globalNotFound: false }), null, 2));

    // 4. Shop not-found (bubble up!)
    console.log('\nâ”€â”€â”€ 4. SHOP NOT-FOUND (bubble!) â”€â”€â”€');
    console.log(JSON.stringify(
      resolveNotFound('/shop/999', files, {}), null, 2));

    // 5. Status codes
    console.log('\nâ”€â”€â”€ 5. STATUS CODES â”€â”€â”€');
    console.log('Before stream:', JSON.stringify(
      determineStatusCode('notFound-before-stream'), null, 2));
    console.log('After stream:', JSON.stringify(
      determineStatusCode('notFound-after-stream'), null, 2));

    // 6. Comparison
    console.log('\nâ”€â”€â”€ 6. COMPARISON â”€â”€â”€');
    console.log(JSON.stringify(compareNotFoundTypes(), null, 2));

    console.log('\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');
    console.log('â•‘  âœ… Demo Complete!                         â•‘');
    console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
  }

  return {
    resolveNotFound: resolveNotFound,
    determineStatusCode: determineStatusCode,
    compareNotFoundTypes: compareNotFoundTypes,
    demo: demo
  };
})();

// Cháº¡y: NotFoundEngine.demo();
```

---

## Â§9. CÃ¢u Há»i Luyá»‡n Táº­p!

### â“ CÃ¢u 1: Sá»± khÃ¡c biá»‡t giá»¯a not-found.js vÃ  global-not-found.js?

**Tráº£ lá»i:**

| TiÃªu chÃ­ | `not-found.js` | `global-not-found.js` |
|---|---|---|
| Level | **Route**-level | **Application**-level |
| Trigger | `notFound()` thrown | URL **khÃ´ng match** route nÃ o |
| Layout | **Káº¿ thá»«a** layout hierarchy | **Bypass** hoÃ n toÃ n! |
| `<html>/<body>` | KhÃ´ng cáº§n | **Báº®T BUá»˜C!** |
| Styles/Fonts | Qua layout cha | **Pháº£i import riÃªng!** |
| Status | Stable (v13.0.0) | Experimental (v15.4.0) |

### â“ CÃ¢u 2: not-found.js cÃ³ nháº­n props khÃ´ng?

**Tráº£ lá»i:**

**KHÃ”NG!** Cáº£ `not-found.js` láº«n `global-not-found.js` Ä‘á»u **KHÃ”NG nháº­n props nÃ o**.

- Máº·c Ä‘á»‹nh: **Server Component**
- CÃ³ thá»ƒ `async` â†’ fetch data báº±ng `headers()`, `cookies()`...
- Náº¿u cáº§n `usePathname` â†’ chuyá»ƒn sang **Client Component**!

### â“ CÃ¢u 3: Táº¡i sao streamed response tráº£ 200 thay vÃ¬ 404?

**Tráº£ lá»i:**

VÃ¬ **response headers** (bao gá»“m status code) pháº£i gá»­i **TRÆ¯á»šC** body streaming!

- Headers gá»­i â†’ status = 200 â†’ **Cá» Äá»ŠNH!**
- `notFound()` gá»i SAU â†’ KHÃ”NG THá»‚ Ä‘á»•i status!
- **Mitigation**: Next.js auto thÃªm `<meta name="robots" content="noindex">`
- **Best practice**: Gá»i `notFound()` **TRÆ¯á»šC** Suspense boundaries + await!

### â“ CÃ¢u 4: Khi nÃ o cáº§n global-not-found.js?

**Tráº£ lá»i:**

Khi **KHÃ”NG THá»‚** build 404 báº±ng `layout.js` + `not-found.js` thÃ´ng thÆ°á»ng:

1. **Multiple root layouts**: `app/(admin)/layout.tsx` + `app/(shop)/layout.tsx` â†’ khÃ´ng cÃ³ single layout cho global 404!
2. **Dynamic segment root layout**: `app/[country]/layout.tsx` â†’ khÃ³ compose consistent 404!

Setup: `experimental: { globalNotFound: true }` trong `next.config.ts`

### â“ CÃ¢u 5: not-found.js resolution order nhÆ° tháº¿ nÃ o?

**Tráº£ lá»i:**

**Bubble up** tá»« deepest segment â†’ root!

```
URL: /blog/unknown-slug â†’ notFound() thrown

TÃ¬m kiáº¿m:
1. app/blog/[slug]/not-found.tsx  â†’ CÃ“? â†’ DÃ™NG!
2. app/blog/not-found.tsx         â†’ CÃ“? â†’ DÃ™NG!
3. app/not-found.tsx              â†’ CÃ“? â†’ DÃ™NG! (root fallback!)
```

Layout hierarchy **PRESERVED** â†’ sidebar, nav váº«n hiá»‡n!

### â“ CÃ¢u 6: global-not-found.js cáº§n import gÃ¬?

**Tráº£ lá»i:**

**Táº¤T Cáº¢** dependencies vÃ¬ bypass layout!

- `import './globals.css'` â€” global styles
- `import { Inter } from 'next/font/google'` â€” fonts
- Return full `<html>` + `<body>` document!
- CÃ³ thá»ƒ export `metadata` hoáº·c `generateMetadata`!
- ğŸ’¡ Tip: DÃ¹ng smaller CSS + simpler font â†’ **better performance!**

---

> ğŸ¯ **Tá»•ng káº¿t**: Guide phÃ¢n tÃ­ch TOÃ€N Bá»˜ trang `not-found.js`:
> - **0 hÃ¬nh áº£nh** trong trang gá»‘c (chá»‰ text + code blocks)
> - **3 sÆ¡ Ä‘á»“ tá»± váº½**: resolution flow, global bypass flow, file structure + placement
> - **NotFoundEngine** tá»± viáº¿t vá»›i 3 functions mÃ´ phá»ng (resolver, status code, comparison)
> - **6 cÃ¢u há»i luyá»‡n táº­p** vá»›i Ä‘Ã¡p Ã¡n chi tiáº¿t
> - **Version History**: v13.0.0 (not-found), v13.3.0 (root handles all), v15.4.0 (global-not-found experimental)
