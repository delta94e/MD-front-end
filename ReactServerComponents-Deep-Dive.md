# React Server Components (RSC) â€” Deep Dive: Hiá»ƒu HoÃ n ToÃ n Tá»« Sá»‘ 0

> **TÃ i liá»‡u há»c táº­p chuyÃªn sÃ¢u â€” HoÃ n toÃ n báº±ng Tiáº¿ng Viá»‡t**
> Tá»± viáº¿t tay má»i thá»©, khÃ´ng phá»¥ thuá»™c thÆ° viá»‡n â€” Giáº£i thÃ­ch cá»±c ká»³ chi tiáº¿t kÃ¨m sÆ¡ Ä‘á»“

---

## Má»¥c Lá»¥c

```
Â§1.  Táº¡i sao cáº§n Server Components? â€” Váº¥n Ä‘á» gá»‘c rá»…
Â§2.  Server Components lÃ  gÃ¬? â€” Äá»‹nh nghÄ©a & PhÃ¢n loáº¡i
Â§3.  SSR vs Server Components â€” Giá»‘ng vÃ  KhÃ¡c
Â§4.  Kiáº¿n trÃºc RSC â€” Luá»“ng Rendering hoÃ n chá»‰nh
Â§5.  RSC Wire Format â€” Äá»‹nh dáº¡ng trung gian
Â§6.  Zero-Bundle-Size Components â€” Giáº£m bundle size
Â§7.  Data Fetching â€” Truy cáº­p Backend tá»« má»i vá»‹ trÃ­
Â§8.  Automatic Code Splitting â€” Tá»± Ä‘á»™ng chia code
Â§9.  No Client-Server Waterfalls â€” Loáº¡i bá» thÃ¡c nÆ°á»›c
Â§10. Client Components vs Server Components â€” Quy táº¯c
Â§11. Tá»± viáº¿t tay RSC Renderer â€” KhÃ´ng dÃ¹ng framework
Â§12. Tá»± viáº¿t tay RSC Client â€” Streaming & Rendering
Â§13. Shared Components â€” Component cháº¡y 2 mÃ´i trÆ°á»ng
Â§14. RSC + SSR â€” Káº¿t há»£p hoÃ n chá»‰nh
Â§15. RSC trong Next.js App Router
Â§16. Best Practices & Anti-Patterns
Â§17. Phá»ng váº¥n Q&A â€” CÃ¢u há»i thÆ°á»ng gáº·p
```

---

## Â§1. Táº¡i Sao Cáº§n Server Components? â€” Váº¥n Äá» Gá»‘c Rá»…

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  2 Váº¤N Äá»€ Lá»šN Cá»¦A REACT TRUYá»€N THá»NG!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  Váº¤N Äá»€ 1: PERFORMANCE Tá»I Æ¯U QUÃ PHá»¨C Táº P!
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Developer pháº£i Tá»° tay tá»‘i Æ°u Má»ŒI THá»¨:              â”‚
  â”‚                                                        â”‚
  â”‚  â‘  Import thÆ° viá»‡n THEO NHU Cáº¦U:                    â”‚
  â”‚     â†’ import { format } from 'date-fns'               â”‚
  â”‚     â†’ KHÃ”NG import toÃ n bá»™ thÆ° viá»‡n!                 â”‚
  â”‚     â†’ Developer pháº£i BIáº¾T & NHá»š cÃ¡ch lÃ m!           â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ Code Splitting THá»¦ CÃ”NG:                          â”‚
  â”‚     â†’ const LazyPage = lazy(() => import('./Page'))    â”‚
  â”‚     â†’ Pháº£i biáº¿t CHÃNH XÃC tÃ¡ch á»Ÿ Ä‘Ã¢u!              â”‚
  â”‚     â†’ QuÃªn tÃ¡ch = bundle TO!                          â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ Æ¯u tiÃªn Data Request:                             â”‚
  â”‚     â†’ Prefetch data trÆ°á»›c khi component render!       â”‚
  â”‚     â†’ TrÃ¡nh waterfall requests!                       â”‚
  â”‚     â†’ Phá»©c táº¡p + dá»… quÃªn!                           â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ Giáº£m abstraction tax:                              â”‚
  â”‚     â†’ Má»—i wrapper component = thÃªm JS code!          â”‚
  â”‚     â†’ Higher Order Components (HOC) â†’ thÃªm layers!   â”‚
  â”‚     â†’ Context Providers â†’ thÃªm wrappers!              â”‚
  â”‚     â†’ Code gá»n gÃ ng â†” Performance = MÃ‚U THUáºªN!    â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ React team muá»‘n: HIGH PERFORMANCE BY DEFAULT!    â”‚
  â”‚  â†’ Developer "rÆ¡i vÃ o há»‘ thÃ nh cÃ´ng" (pit of success)â”‚
  â”‚  â†’ KhÃ´ng cáº§n tá»‘i Æ°u thá»§ cÃ´ng = váº«n nhanh!         â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Váº¤N Äá»€ 2: DATA FETCHING TRONG REACT QUÃ PHIá»€N!
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  CÃCH HIá»†N Táº I â€” "NÃ¢ng data lÃªn Ä‘áº§u trang":        â”‚
  â”‚                                                        â”‚
  â”‚  function ArtistPage({ artistID }) {                   â”‚
  â”‚    //  âš  FETCH Táº¤T Cáº¢ á» ÄÃ‚Y!                     â”‚
  â”‚    const data = fetchAllTheStuff();                    â”‚
  â”‚                                                        â”‚
  â”‚    return (                                            â”‚
  â”‚      <ArtistDetails details={data.details}>            â”‚
  â”‚        <TopTracks tracks={data.topTracks} />           â”‚
  â”‚        <Discography albums={data.discography} />       â”‚
  â”‚      </ArtistDetails>                                  â”‚
  â”‚    );                                                  â”‚
  â”‚  }                                                     â”‚
  â”‚                                                        â”‚
  â”‚  Váº¤N Äá»€:                                               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚ âŒ ArtistDetails KHÃ”NG biáº¿t data tá»« Ä‘Ã¢u!   â”‚      â”‚
  â”‚  â”‚ âŒ TopTracks nháº­n data qua PROPS, khÃ´ng     â”‚      â”‚
  â”‚  â”‚    biáº¿t nguá»“n gá»‘c!                          â”‚      â”‚
  â”‚  â”‚ âŒ XÃ³a TopTracks? Pháº£i NHá»š xÃ³a data fetch!â”‚      â”‚
  â”‚  â”‚ âŒ ThÃªm component? Pháº£i Sá»¬A parent fetch!  â”‚      â”‚
  â”‚  â”‚ âŒ DATA SOURCE â†” COMPONENT = TÃCH Rá»œI!   â”‚      â”‚
  â”‚  â”‚ âŒ Code maintenance = ÃC Má»˜NG!             â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  CÃCH MUá»N â€” "Má»—i component Tá»° fetch":              â”‚
  â”‚                                                        â”‚
  â”‚  function ArtistDetails({ artistId, children }) {      â”‚
  â”‚    const data = fetchDetails(artistId);                â”‚
  â”‚    // âœ… Component BIáº¾T data tá»« Ä‘Ã¢u!                 â”‚
  â”‚    // ...                                              â”‚
  â”‚  }                                                     â”‚
  â”‚  function TopTracks({ artistId }) {                    â”‚
  â”‚    const tracks = fetchTopTracks(artistId);            â”‚
  â”‚    // âœ… Tá»° fetch data Cá»¦A MÃŒNH!                    â”‚
  â”‚    // ...                                              â”‚
  â”‚  }                                                     â”‚
  â”‚  function Discography({ artistId }) {                  â”‚
  â”‚    const albums = fetchDiscography(artistId);          â”‚
  â”‚    // âœ… XÃ“A component = XÃ“A data fetch luÃ´n!       â”‚
  â”‚    // ...                                              â”‚
  â”‚  }                                                     â”‚
  â”‚                                                        â”‚
  â”‚  NHÆ¯NG! Má»—i component tá»± fetch = WATERFALL!          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  ArtistDetails fetch â”€â”€â”€â”€â”€â”€â–¶ 200ms            â”‚      â”‚
  â”‚  â”‚  (Ä‘á»£i render xong!)                           â”‚      â”‚
  â”‚  â”‚       TopTracks fetch â”€â”€â”€â”€â”€â”€â”€â”€â–¶ 150ms         â”‚      â”‚
  â”‚  â”‚       (Ä‘á»£i render xong!)                      â”‚      â”‚
  â”‚  â”‚            Discography fetch â”€â”€â”€â”€â–¶ 180ms      â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  Tá»”NG: 200 + 150 + 180 = 530ms!              â”‚      â”‚
  â”‚  â”‚  â†’ Sequential! Tá»«ng cÃ¡i chá» cÃ¡i trÆ°á»›c!      â”‚      â”‚
  â”‚  â”‚  â†’ CHáº¬M!                                      â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ GIáº¢I PHÃP Cá»¦A REACT TEAM:                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  â‘  Relay + GraphQL:                          â”‚      â”‚
  â”‚  â”‚     â†’ Gá»™p requests thÃ nh 1!                  â”‚      â”‚
  â”‚  â”‚     â†’ NhÆ°ng PHá»¤ THUá»˜C GraphQL!              â”‚      â”‚
  â”‚  â”‚     â†’ KhÃ´ng pháº£i ai cÅ©ng dÃ¹ng GraphQL!      â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  â‘¡ SERVER COMPONENTS! â† GIáº¢I PHÃP Má»šI!    â”‚      â”‚
  â”‚  â”‚     â†’ CHáº Y component TRÃŠN SERVER!            â”‚      â”‚
  â”‚  â”‚     â†’ Server â†’ Server nhanh (cÃ¹ng máº¡ng!)    â”‚      â”‚
  â”‚  â”‚     â†’ Data request Gáº¦N NHÆ¯ tá»©c thá»i!       â”‚      â”‚
  â”‚  â”‚     â†’ KHÃ”NG cáº§n táº£i code lÃªn client!         â”‚      â”‚
  â”‚  â”‚     â†’ = HIGH PERF + CLEAN CODE!               â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§2. Server Components LÃ  GÃ¬? â€” Äá»‹nh NghÄ©a & PhÃ¢n Loáº¡i

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  REACT 18+ CHIA COMPONENT THÃ€NH 3 LOáº I!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  3 LOáº I COMPONENT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚  â‘  SERVER Component (.server.js / máº·c Ä‘á»‹nh) â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  â†’ Chá»‰ cháº¡y trÃªn SERVER!                    â”‚      â”‚
  â”‚  â”‚  â†’ Code KHÃ”NG gá»­i cho client!               â”‚      â”‚
  â”‚  â”‚  â†’ Káº¿t quáº£ render gá»­i cho client!           â”‚      â”‚
  â”‚  â”‚  â†’ âœ… CÃ“ THá»‚: async/await, truy cáº­p DB,    â”‚      â”‚
  â”‚  â”‚     filesystem, fetch API backend!            â”‚      â”‚
  â”‚  â”‚  â†’ âŒ KHÃ”NG THá»‚: useState, useEffect,       â”‚      â”‚
  â”‚  â”‚     onClick, browser APIs!                    â”‚      â”‚
  â”‚  â”‚  â†’ âŒ KHÃ”NG THá»‚: TÆ°Æ¡ng tÃ¡c ngÆ°á»i dÃ¹ng!    â”‚      â”‚
  â”‚  â”‚  â†’ Káº¿t quáº£: React elements (mÃ´ táº£ UI!)     â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  // NoteList.server.js                        â”‚      â”‚
  â”‚  â”‚  async function NoteList() {                  â”‚      â”‚
  â”‚  â”‚    const notes = await db.query(              â”‚      â”‚
  â”‚  â”‚      'SELECT * FROM notes'                    â”‚      â”‚
  â”‚  â”‚    ); // âœ… Truy cáº­p DB trá»±c tiáº¿p!         â”‚      â”‚
  â”‚  â”‚    return notes.map(n =>                      â”‚      â”‚
  â”‚  â”‚      <NoteItem key={n.id} note={n} />         â”‚      â”‚
  â”‚  â”‚    );                                         â”‚      â”‚
  â”‚  â”‚  }                                            â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚  â‘¡ CLIENT Component ('use client')           â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  â†’ Cháº¡y trÃªn CLIENT (browser)!               â”‚      â”‚
  â”‚  â”‚  â†’ Code Gá»¬I cho client (trong bundle!)      â”‚      â”‚
  â”‚  â”‚  â†’ Giá»‘ng React component TRUYá»€N THá»NG!       â”‚      â”‚
  â”‚  â”‚  â†’ âœ… CÃ“ THá»‚: useState, useEffect,          â”‚      â”‚
  â”‚  â”‚     onClick, browser APIs!                    â”‚      â”‚
  â”‚  â”‚  â†’ âœ… CÃ“ THá»‚: TÆ°Æ¡ng tÃ¡c ngÆ°á»i dÃ¹ng!      â”‚      â”‚
  â”‚  â”‚  â†’ âŒ KHÃ”NG THá»‚: async component, truy cáº­p â”‚      â”‚
  â”‚  â”‚     DB, filesystem!                           â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  // Counter.client.js                         â”‚      â”‚
  â”‚  â”‚  'use client';                                â”‚      â”‚
  â”‚  â”‚  function Counter() {                         â”‚      â”‚
  â”‚  â”‚    const [count, setCount] = useState(0);     â”‚      â”‚
  â”‚  â”‚    return (                                   â”‚      â”‚
  â”‚  â”‚      <button onClick={() =>                   â”‚      â”‚
  â”‚  â”‚        setCount(c => c + 1)}>                 â”‚      â”‚
  â”‚  â”‚        Count: {count}                         â”‚      â”‚
  â”‚  â”‚      </button>                                â”‚      â”‚
  â”‚  â”‚    );                                         â”‚      â”‚
  â”‚  â”‚  }                                            â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚  â‘¢ SHARED Component                          â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  â†’ Cháº¡y ÄÆ¯á»¢C á» Cáº¢ HAI!                     â”‚      â”‚
  â”‚  â”‚  â†’ Server import â†’ cháº¡y trÃªn server!        â”‚      â”‚
  â”‚  â”‚  â†’ Client import â†’ cháº¡y trÃªn client!        â”‚      â”‚
  â”‚  â”‚  â†’ Pháº£i tuÃ¢n thá»§ GIá»šI Háº N cáº£ 2 bÃªn!       â”‚      â”‚
  â”‚  â”‚  â†’ âŒ KhÃ´ng useState, useEffect!             â”‚      â”‚
  â”‚  â”‚  â†’ âŒ KhÃ´ng async/await!                     â”‚      â”‚
  â”‚  â”‚  â†’ âœ… Chá»‰ nháº­n props, render UI!            â”‚      â”‚
  â”‚  â”‚  â†’ DÃ¹ng cho: UI components thuáº§n tÃºy!        â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  // Avatar.js (shared!)                       â”‚      â”‚
  â”‚  â”‚  function Avatar({ name, url }) {             â”‚      â”‚
  â”‚  â”‚    return <img src={url} alt={name} />;       â”‚      â”‚
  â”‚  â”‚  }                                            â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  SÆ  Äá»’ 3 LOáº I:                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚      â”‚
  â”‚  â”‚  â”‚  SERVER   â”‚ â”‚  SHARED   â”‚ â”‚  CLIENT   â”‚   â”‚      â”‚
  â”‚  â”‚  â”‚           â”‚ â”‚           â”‚ â”‚           â”‚   â”‚      â”‚
  â”‚  â”‚  â”‚ async     â”‚ â”‚ Pure UI   â”‚ â”‚ useState  â”‚   â”‚      â”‚
  â”‚  â”‚  â”‚ DB access â”‚ â”‚ No state  â”‚ â”‚ useEffect â”‚   â”‚      â”‚
  â”‚  â”‚  â”‚ fs.read   â”‚ â”‚ No effectsâ”‚ â”‚ onClick   â”‚   â”‚      â”‚
  â”‚  â”‚  â”‚ fetch API â”‚ â”‚ Props onlyâ”‚ â”‚ Browser   â”‚   â”‚      â”‚
  â”‚  â”‚  â”‚           â”‚ â”‚           â”‚ â”‚ APIs      â”‚   â”‚      â”‚
  â”‚  â”‚  â”‚ NO state! â”‚ â”‚ Both env! â”‚ â”‚           â”‚   â”‚      â”‚
  â”‚  â”‚  â”‚ NO events!â”‚ â”‚           â”‚ â”‚ NO DB!    â”‚   â”‚      â”‚
  â”‚  â”‚  â”‚           â”‚ â”‚           â”‚ â”‚ NO fs!    â”‚   â”‚      â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚      â”‚
  â”‚  â”‚  â•”â•â•â•â•â•â•â•â•â•â•â•â•—                â•”â•â•â•â•â•â•â•â•â•â•â•â•—  â”‚      â”‚
  â”‚  â”‚  â•‘  SERVER   â•‘                â•‘  CLIENT   â•‘  â”‚      â”‚
  â”‚  â”‚  â•‘  ONLY!    â•‘                â•‘  ONLY!    â•‘  â”‚      â”‚
  â”‚  â”‚  â•šâ•â•â•â•â•â•â•â•â•â•â•â•                â•šâ•â•â•â•â•â•â•â•â•â•â•â•  â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§3. SSR vs Server Components â€” Giá»‘ng VÃ  KhÃ¡c

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SSR â‰  SERVER COMPONENTS! KHÃC BIá»†T Cá»T LÃ•I!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  GIá»NG NHAU:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  Cáº£ hai Ä‘á»u RENDER TRÃŠN SERVER!                    â”‚
  â”‚     â†’ Logic cháº¡y á»Ÿ server!                           â”‚
  â”‚     â†’ Káº¿t quáº£ gá»­i cho client!                       â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ Cáº£ hai Ä‘á»u KHÃ”NG há»— trá»£ TÆ¯Æ NG TÃC!             â”‚
  â”‚     â†’ Server output = STATIC!                         â”‚
  â”‚     â†’ Cáº§n client code cho interactivity!              â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ Cáº£ hai Ä‘á»u Má» Rá»˜NG tá»« client â†’ server!          â”‚
  â”‚     â†’ TÃ¬m kiáº¿m performance breakthrough!              â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  KHÃC BIá»†T Cá»T LÃ•I:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚                 â”‚ SSR          â”‚ Server         â”‚   â”‚
  â”‚  â”‚                 â”‚ (truyá»n thá»‘ng)â”‚ Components    â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ Output          â”‚ HTML string! â”‚ React elements â”‚   â”‚
  â”‚  â”‚                 â”‚              â”‚ (JSON-like!)   â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ Client code     â”‚ Táº¤T Cáº¢ codeâ”‚ CHá»ˆ Client    â”‚   â”‚
  â”‚  â”‚   gá»­i cho      â”‚ gá»­i cho     â”‚ Component code â”‚   â”‚
  â”‚  â”‚   client?       â”‚ client!      â”‚ gá»­i! Server  â”‚   â”‚
  â”‚  â”‚                 â”‚              â”‚ code = KHÃ”NG!  â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ Data fetch      â”‚ CHá»ˆ á»Ÿ Ä‘áº§u â”‚ Má»ŒI Vá»Š TRÃ   â”‚   â”‚
  â”‚  â”‚   vá»‹ trÃ­       â”‚ trang!       â”‚ trong tree!    â”‚   â”‚
  â”‚  â”‚                 â”‚ (getServer   â”‚ Component nÃ o  â”‚   â”‚
  â”‚  â”‚                 â”‚ SideProps!)  â”‚ cÅ©ng fetch!   â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ Hydration       â”‚ Cáº¦N hydrate â”‚ KHÃ”NG cáº§n     â”‚   â”‚
  â”‚  â”‚                 â”‚ TOÃ€N Bá»˜!   â”‚ hydrate RSC!   â”‚   â”‚
  â”‚  â”‚                 â”‚              â”‚ (chá»‰ Client   â”‚   â”‚
  â”‚  â”‚                 â”‚              â”‚ Components!)   â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ Client state    â”‚ Máº¤T khi     â”‚ GIá»® NGUYÃŠN   â”‚   â”‚
  â”‚  â”‚                 â”‚ re-render!   â”‚ khi RSC update!â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ Khi nÃ o cháº¡y  â”‚ CHá»ˆ láº§n Ä‘áº§u â”‚ Má»ŒI Láº¦N      â”‚   â”‚
  â”‚  â”‚                 â”‚ (first load!)â”‚ cáº§n update!    â”‚   â”‚
  â”‚  â”‚                 â”‚              â”‚ (navigation,   â”‚   â”‚
  â”‚  â”‚                 â”‚              â”‚ refresh!)      â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ Streaming       â”‚ HTML chunks! â”‚ React element  â”‚   â”‚
  â”‚  â”‚                 â”‚              â”‚ chunks!        â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  SÆ  Äá»’ SO SÃNH TIMELINE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â•â•â• SSR TRUYá»€N THá»NG â•â•â•                              â”‚
  â”‚                                                        â”‚
  â”‚  Server          Client                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚ Render   â”‚â”€â”€â–¶â”‚ â‘  Hiá»ƒn thá»‹ HTML (KHÃ”NG tÆ°Æ¡ng   â”‚   â”‚
  â”‚  â”‚ â†’ HTML!  â”‚   â”‚    tÃ¡c!)                          â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â‘¡ Táº£i Táº¤T Cáº¢ JS code!         â”‚   â”‚
  â”‚                  â”‚ â‘¢ Hydrate (render Láº I toÃ n bá»™!)â”‚   â”‚
  â”‚                  â”‚ â‘£ â†’ CÃ“ tÆ°Æ¡ng tÃ¡c!              â”‚   â”‚
  â”‚                  â”‚                                  â”‚   â”‚
  â”‚                  â”‚ âš  BÆ°á»›c 2-3 Táº¢I & CHáº Y táº¥t cáº£â”‚   â”‚
  â”‚                  â”‚   component code! Ká»ƒ cáº£ code    â”‚   â”‚
  â”‚                  â”‚   KHÃ”NG Cáº¦N tÆ°Æ¡ng tÃ¡c!          â”‚   â”‚
  â”‚                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â•â•â• SERVER COMPONENTS â•â•â•                              â”‚
  â”‚                                                        â”‚
  â”‚  Server              Client                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚ Render RSC   â”‚   â”‚                              â”‚   â”‚
  â”‚  â”‚ â†’ JSON-like  â”‚â”€â”€â–¶â”‚ â‘  Nháº­n RSC payload!        â”‚   â”‚
  â”‚  â”‚   elements!  â”‚   â”‚ â‘¡ Render tá»« payload!       â”‚   â”‚
  â”‚  â”‚              â”‚   â”‚ â‘¢ CHá»ˆ táº£i Client Component â”‚   â”‚
  â”‚  â”‚ âœ… RSC code â”‚   â”‚    code! (KHÃ”NG táº£i RSC!)   â”‚   â”‚
  â”‚  â”‚ GIá»® trÃªn    â”‚   â”‚ â‘£ Hydrate CHá»ˆ Client Comps!â”‚   â”‚
  â”‚  â”‚ server!      â”‚   â”‚ â‘¤ â†’ CÃ“ tÆ°Æ¡ng tÃ¡c!        â”‚   â”‚
  â”‚  â”‚              â”‚   â”‚                              â”‚   â”‚
  â”‚  â”‚ Dependencies â”‚   â”‚ ğŸ’¡ Bundle NHá» HÆ N!        â”‚   â”‚
  â”‚  â”‚ cÅ©ng GIá»®   â”‚   â”‚ ï¿½ï¿½ Hydrate ÃT HÆ N!        â”‚   â”‚
  â”‚  â”‚ trÃªn server! â”‚   â”‚ ğŸ’¡ Nhanh interactive HÆ N!  â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Káº¾T Há»¢P RSC + SSR:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  RSC + SSR = Bá»” SUNG CHO NHAU!                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘  SSR: Render HTML nhanh cho FIRST PAINT!            â”‚
  â”‚     â†’ User tháº¥y content NGAY!                        â”‚
  â”‚     â†’ NhÆ°ng CHÆ¯A tÆ°Æ¡ng tÃ¡c!                          â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ RSC: GIáº¢M code cáº§n táº£i cho hydration!             â”‚
  â”‚     â†’ Server Component code = KHÃ”NG Táº¢I!             â”‚
  â”‚     â†’ CHá»ˆ táº£i Client Component code!                 â”‚
  â”‚     â†’ Hydrate NHANH HÆ N!                             â”‚
  â”‚     â†’ Interactive Sá»šM HÆ N!                           â”‚
  â”‚                                                        â”‚
  â”‚  Timeline:                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
  â”‚  â”‚ 0s    0.5s    1s    1.5s    2s    2.5s     â”‚        â”‚
  â”‚  â”‚ â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚ SSR! â”‚      â”‚      â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚ HTML â”‚      â”‚      â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚shown!â”‚      â”‚      â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚      â”‚ ONLY â”‚      â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚      â”‚Clientâ”‚      â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚      â”‚ JS   â”‚      â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚      â”‚loadedâ”‚      â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚      â”‚      â”‚Hydra-â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚      â”‚      â”‚ ted! â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚      â”‚      â”‚ âš¡  â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚      â”‚      â”‚INTER-â”‚      â”‚       â”‚        â”‚
  â”‚  â”‚ â”‚      â”‚      â”‚      â”‚ACTIVEâ”‚      â”‚       â”‚        â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
  â”‚  â†’ Nhanh hÆ¡n SSR thuáº§n! (táº£i Ã­t JS hÆ¡n!)            â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§4. Kiáº¿n TrÃºc RSC â€” Luá»“ng Rendering HoÃ n Chá»‰nh

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  LUá»’NG RENDER RSC Tá»ª Äáº¦U Äáº¾N CUá»I!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  SÆ  Äá»’ Tá»”NG THá»‚:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚                    SERVER                        â”‚   â”‚
  â”‚  â”‚                                                  â”‚   â”‚
  â”‚  â”‚  â‘  User REQUEST (URL / Action)                  â”‚   â”‚
  â”‚  â”‚     â”‚                                            â”‚   â”‚
  â”‚  â”‚     â–¼                                            â”‚   â”‚
  â”‚  â”‚  â‘¡ ROUTER xÃ¡c Ä‘á»‹nh component tree              â”‚   â”‚
  â”‚  â”‚     â”‚                                            â”‚   â”‚
  â”‚  â”‚     â–¼                                            â”‚   â”‚
  â”‚  â”‚  â‘¢ RENDER Server Components:                    â”‚   â”‚
  â”‚  â”‚     â†’ Gá»i component functions!                  â”‚   â”‚
  â”‚  â”‚     â†’ async/await fetch data!                   â”‚   â”‚
  â”‚  â”‚     â†’ Truy cáº­p DB, API, filesystem!             â”‚   â”‚
  â”‚  â”‚     â”‚                                            â”‚   â”‚
  â”‚  â”‚     â–¼                                            â”‚   â”‚
  â”‚  â”‚  â‘£ Gáº·p Client Component?                       â”‚   â”‚
  â”‚  â”‚     â†’ KHÃ”NG render! Ghi láº¡i MODULE REFERENCE!   â”‚   â”‚
  â”‚  â”‚     â†’ = "placeholder" chá»‰ Ä‘áº¿n bundle chunk!   â”‚   â”‚
  â”‚  â”‚     â†’ Serialize props (pháº£i JSON-serializable!) â”‚   â”‚
  â”‚  â”‚     â”‚                                            â”‚   â”‚
  â”‚  â”‚     â–¼                                            â”‚   â”‚
  â”‚  â”‚  â‘¤ Táº¡o RSC PAYLOAD (wire format):              â”‚   â”‚
  â”‚  â”‚     â†’ JSON-like stream!                         â”‚   â”‚
  â”‚  â”‚     â†’ Chá»©a: rendered server UI + client refs!  â”‚   â”‚
  â”‚  â”‚     â”‚                                            â”‚   â”‚
  â”‚  â”‚     â–¼                                            â”‚   â”‚
  â”‚  â”‚  â‘¥ STREAM payload cho client!                   â”‚   â”‚
  â”‚  â”‚                                                  â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                             â”‚ RSC Payload (stream!)     â”‚
  â”‚                             â–¼                           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚                    CLIENT                        â”‚   â”‚
  â”‚  â”‚                                                  â”‚   â”‚
  â”‚  â”‚  â‘¦ NHáº¬N RSC payload (streaming!)               â”‚   â”‚
  â”‚  â”‚     â”‚                                            â”‚   â”‚
  â”‚  â”‚     â–¼                                            â”‚   â”‚
  â”‚  â”‚  â‘§ React Client RUNTIME xá»­ lÃ½:                â”‚   â”‚
  â”‚  â”‚     â†’ Parse payload!                            â”‚   â”‚
  â”‚  â”‚     â†’ Server UI â†’ render TRá»°C TIáº¾P!           â”‚   â”‚
  â”‚  â”‚     â†’ Client Component refs â†’ Táº¢I module!     â”‚   â”‚
  â”‚  â”‚     â”‚                                            â”‚   â”‚
  â”‚  â”‚     â–¼                                            â”‚   â”‚
  â”‚  â”‚  â‘¨ RENDER Client Components:                    â”‚   â”‚
  â”‚  â”‚     â†’ Táº£i JS bundle cho Client Components!      â”‚   â”‚
  â”‚  â”‚     â†’ Render + hydrate!                         â”‚   â”‚
  â”‚  â”‚     â†’ Gáº¯n event handlers!                       â”‚   â”‚
  â”‚  â”‚     â”‚                                            â”‚   â”‚
  â”‚  â”‚     â–¼                                            â”‚   â”‚
  â”‚  â”‚  â‘© UI HOÃ€N CHá»ˆNH + TÆ¯Æ NG TÃC! âš¡             â”‚   â”‚
  â”‚  â”‚                                                  â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Gáº¶P CLIENT COMPONENT â€” CHI TIáº¾T:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  // Server Component (App.server.js):                   â”‚
  â”‚  async function App() {                                 â”‚
  â”‚    const data = await fetchData();                      â”‚
  â”‚    return (                                            â”‚
  â”‚      <div>                                              â”‚
  â”‚        <h1>{data.title}</h1>    â† SERVER render!      â”‚
  â”‚        <Counter />              â† CLIENT Component!   â”‚
  â”‚        <NoteList />             â† SERVER Component!   â”‚
  â”‚      </div>                                            â”‚
  â”‚    );                                                  â”‚
  â”‚  }                                                     â”‚
  â”‚                                                        â”‚
  â”‚  Server RENDER:                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  <div>                                        â”‚      â”‚
  â”‚  â”‚    <h1>My App</h1>       â† render ra text!   â”‚      â”‚
  â”‚  â”‚    @ref:Counter          â† KHÃ”NG render!     â”‚      â”‚
  â”‚  â”‚      props: {}           â† serialize props!  â”‚      â”‚
  â”‚  â”‚      module: "Counter.js"â† CHá»ˆ GHI REF!     â”‚      â”‚
  â”‚  â”‚    <ul>                   â† NoteList render! â”‚      â”‚
  â”‚  â”‚      <li>Note 1</li>     â† render ra text!   â”‚      â”‚
  â”‚  â”‚      <li>Note 2</li>                          â”‚      â”‚
  â”‚  â”‚    </ul>                                      â”‚      â”‚
  â”‚  â”‚  </div>                                       â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  ğŸ’¡ Counter KHÃ”NG Ä‘Æ°á»£c render trÃªn server!   â”‚      â”‚
  â”‚  â”‚  â†’ Server GHI Láº I: "táº£i module Counter.js"  â”‚      â”‚
  â”‚  â”‚  â†’ Client sáº½ táº£i vÃ  render Counter!          â”‚      â”‚
  â”‚  â”‚  â†’ Client CÃ“ THá»‚ hydrate Counter!            â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§5. RSC Wire Format â€” Äá»‹nh Dáº¡ng Trung Gian

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  RSC PAYLOAD = KHÃ”NG PHáº¢I HTML! KHÃ”NG PHáº¢I JSON THUáº¦N!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  RSC WIRE FORMAT â€” Dáº NG STREAM:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Server gá»­i payload dáº¡ng DÃ’NG (lines):                â”‚
  â”‚                                                        â”‚
  â”‚  // Má»—i dÃ²ng = 1 chunk!                              â”‚
  â”‚  // Format: ID:TYPE:DATA                                â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤ PAYLOAD:                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  // DÃ²ng 1: Module reference (Client Comp!)   â”‚      â”‚
  â”‚  â”‚  M1:{"id":"./Counter.js","name":"Counter"}    â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  // DÃ²ng 2: Server-rendered tree!             â”‚      â”‚
  â”‚  â”‚  J0:["$","div",null,{                         â”‚      â”‚
  â”‚  â”‚    "children":[                               â”‚      â”‚
  â”‚  â”‚      ["$","h1",null,{                         â”‚      â”‚
  â”‚  â”‚        "children":"My App"                    â”‚      â”‚
  â”‚  â”‚      }],                                      â”‚      â”‚
  â”‚  â”‚      ["$","@1",null,{}],                      â”‚      â”‚
  â”‚  â”‚      ["$","ul",null,{                         â”‚      â”‚
  â”‚  â”‚        "children":[                           â”‚      â”‚
  â”‚  â”‚          ["$","li",null,{"children":"Note1"}], â”‚      â”‚
  â”‚  â”‚          ["$","li",null,{"children":"Note2"}]  â”‚      â”‚
  â”‚  â”‚        ]                                      â”‚      â”‚
  â”‚  â”‚      }]                                       â”‚      â”‚
  â”‚  â”‚    ]                                          â”‚      â”‚
  â”‚  â”‚  }]                                           â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚  GIáº¢I THÃCH:                                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  "$"      = React element marker!             â”‚      â”‚
  â”‚  â”‚  "div"    = Native HTML element!              â”‚      â”‚
  â”‚  â”‚  "@1"     = Client Component REFERENCE!       â”‚      â”‚
  â”‚  â”‚             â†’ "@" + ID = tham chiáº¿u module!  â”‚      â”‚
  â”‚  â”‚             â†’ ID = M1 (Counter.js!)           â”‚      â”‚
  â”‚  â”‚  null     = key (khÃ´ng cÃ³!)                   â”‚      â”‚
  â”‚  â”‚  {...}    = props!                            â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  M1: = Module definition!                     â”‚      â”‚
  â”‚  â”‚  J0: = JSON (React tree) chunk!               â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  Táº I SAO KHÃ”NG DÃ™NG HTML?                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  HTML chá»‰ biá»ƒu diá»…n... HTML!                 â”‚      â”‚
  â”‚  â”‚  â†’ KHÃ”NG mang thÃ´ng tin React (props,         â”‚      â”‚
  â”‚  â”‚    component boundaries, client refs!)        â”‚      â”‚
  â”‚  â”‚  â†’ KHÃ”NG thá»ƒ merge giá»¯ client state!         â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  RSC Payload mang NHIá»€U HÆ N HTML:             â”‚      â”‚
  â”‚  â”‚  â†’ âœ… Props cho Client Components!            â”‚      â”‚
  â”‚  â”‚  â†’ âœ… Module references (táº£i code!)          â”‚      â”‚
  â”‚  â”‚  â†’ âœ… Component boundaries rÃµ rÃ ng!          â”‚      â”‚
  â”‚  â”‚  â†’ âœ… Streaming (gá»­i tá»«ng chunk!)            â”‚      â”‚
  â”‚  â”‚  â†’ âœ… Merge VÃ€O cÃ¢y React hiá»‡n táº¡i!         â”‚      â”‚
  â”‚  â”‚  â†’ âœ… GIá»® client state khi update!           â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  STREAMING â€” Tá»ªNG CHUNK:                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  Server gá»­i STREAMING (khÃ´ng Ä‘á»£i xong!):    â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  Thá»i gian  Server gá»­i      Client nháº­n     â”‚      â”‚
  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€      â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€       â”‚      â”‚
  â”‚  â”‚  0ms        M1 (module ref)  Parse M1!       â”‚      â”‚
  â”‚  â”‚  5ms        J0 (tree pháº§n 1) Render pháº§n 1! â”‚      â”‚
  â”‚  â”‚  10ms       â”€ (Ä‘ang fetch!)  Hiá»ƒn thá»‹       â”‚      â”‚
  â”‚  â”‚                               fallback...    â”‚      â”‚
  â”‚  â”‚  200ms      J2 (tree pháº§n 2) Render pháº§n 2! â”‚      â”‚
  â”‚  â”‚  205ms      DONE!            UI hoÃ n chá»‰nh! â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  ğŸ’¡ Client KHÃ”NG Äá»¢I server xong!           â”‚      â”‚
  â”‚  â”‚  â†’ Render NGAY khi nháº­n chunk Ä‘áº§u!          â”‚      â”‚
  â”‚  â”‚  â†’ Suspense fallback cho pháº§n chÆ°a cÃ³!      â”‚      â”‚
  â”‚  â”‚  â†’ Progressive rendering!                    â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§6. Zero-Bundle-Size Components â€” Giáº£m Bundle Size

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SERVER COMPONENT CODE = KHÃ”NG BAO GIá»œ Gá»¬I CHO CLIENT!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  SÆ  Äá»’ BUNDLE SIZE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â•â•â• REACT TRUYá»€N THá»NG (Táº¤T Cáº¢ CLIENT!) â•â•â•         â”‚
  â”‚                                                        â”‚
  â”‚  Client Bundle:                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚  App.js              (5 KB)                   â”‚      â”‚
  â”‚  â”‚  Header.js           (3 KB)                   â”‚      â”‚
  â”‚  â”‚  NoteList.js         (8 KB)                   â”‚      â”‚
  â”‚  â”‚  NoteEditor.js       (12 KB)                  â”‚      â”‚
  â”‚  â”‚  Sidebar.js          (6 KB)                   â”‚      â”‚
  â”‚  â”‚  MarkdownRenderer.js (45 KB) â† THÆ¯ VIá»†N Lá»šN!â”‚      â”‚
  â”‚  â”‚  date-fns            (20 KB) â† THÆ¯ VIá»†N!     â”‚      â”‚
  â”‚  â”‚  sanitize-html       (35 KB) â† THÆ¯ VIá»†N!     â”‚      â”‚
  â”‚  â”‚  highlight.js        (50 KB) â† THÆ¯ VIá»†N!     â”‚      â”‚
  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚      â”‚
  â”‚  â”‚  Tá»”NG: ~184 KB! ğŸ˜±                           â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  â†’ Táº¤T Cáº¢ code táº£i vá» client!               â”‚      â”‚
  â”‚  â”‚  â†’ Ká»ƒ cáº£ code KHÃ”NG Cáº¦N tÆ°Æ¡ng tÃ¡c!          â”‚      â”‚
  â”‚  â”‚  â†’ ThÆ° viá»‡n render markdown = 45KB            â”‚      â”‚
  â”‚  â”‚    â†’ CHá»ˆ Äá»‚ hiá»ƒn thá»‹! KhÃ´ng tÆ°Æ¡ng tÃ¡c!      â”‚      â”‚
  â”‚  â”‚    â†’ Váº«n pháº£i táº£i 45KB!                      â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â•â•â• Vá»šI SERVER COMPONENTS â•â•â•                         â”‚
  â”‚                                                        â”‚
  â”‚  Server (KHÃ”NG gá»­i cho client!):                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚  App.server.js       (5 KB)   â† GIá»® SERVER! â”‚      â”‚
  â”‚  â”‚  NoteList.server.js  (8 KB)   â† GIá»® SERVER! â”‚      â”‚
  â”‚  â”‚  Sidebar.server.js   (6 KB)   â† GIá»® SERVER! â”‚      â”‚
  â”‚  â”‚  MarkdownRenderer    (45 KB)  â† GIá»® SERVER! â”‚      â”‚
  â”‚  â”‚  date-fns            (20 KB)  â† GIá»® SERVER! â”‚      â”‚
  â”‚  â”‚  sanitize-html       (35 KB)  â† GIá»® SERVER! â”‚      â”‚
  â”‚  â”‚  highlight.js        (50 KB)  â† GIá»® SERVER! â”‚      â”‚
  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚      â”‚
  â”‚  â”‚  Tá»”NG GIá»® SERVER: ~169 KB (KHÃ”NG táº£i!)      â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚  Client Bundle (CHá»ˆ Client Components!):               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚  NoteEditor.client.js (12 KB) â† Cáº¦N tÆ°Æ¡ng  â”‚      â”‚
  â”‚  â”‚                                  tÃ¡c!        â”‚      â”‚
  â”‚  â”‚  Header.client.js     (3 KB)  â† Cáº¦N event! â”‚      â”‚
  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                â”‚      â”‚
  â”‚  â”‚  Tá»”NG: ~15 KB! ğŸ‰                            â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  â†’ GIáº¢M 92%! (184KB â†’ 15KB!)                â”‚      â”‚
  â”‚  â”‚  â†’ ThÆ° viá»‡n náº·ng GIá»® trÃªn server!           â”‚      â”‚
  â”‚  â”‚  â†’ Client CHá»ˆ táº£i code TÆ¯Æ NG TÃC!           â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤ Cá»¤ THá»‚ â€” MARKDOWN RENDERER:                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  // âŒ TRUYá»€N THá»NG: Client pháº£i táº£i!        â”‚      â”‚
  â”‚  â”‚  import marked from 'marked';     // 35KB!    â”‚      â”‚
  â”‚  â”‚  import sanitize from 'sanitize'; // 20KB!    â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  function NoteView({ text }) {                â”‚      â”‚
  â”‚  â”‚    const html = sanitize(marked(text));        â”‚      â”‚
  â”‚  â”‚    return <div                                â”‚      â”‚
  â”‚  â”‚      dangerouslySetInnerHTML={{__html: html}} â”‚      â”‚
  â”‚  â”‚    />;                                        â”‚      â”‚
  â”‚  â”‚  }                                            â”‚      â”‚
  â”‚  â”‚  // â†’ Client táº£i 55KB thÆ° viá»‡n!              â”‚      â”‚
  â”‚  â”‚  // â†’ Chá»‰ Ä‘á»ƒ HIá»‚N THá»Š! KhÃ´ng tÆ°Æ¡ng tÃ¡c!    â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  // âœ… SERVER COMPONENT: Client táº£i 0KB!     â”‚      â”‚
  â”‚  â”‚  // NoteView.server.js                        â”‚      â”‚
  â”‚  â”‚  import marked from 'marked';     // server!  â”‚      â”‚
  â”‚  â”‚  import sanitize from 'sanitize'; // server!  â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  function NoteView({ text }) {                â”‚      â”‚
  â”‚  â”‚    const html = sanitize(marked(text));        â”‚      â”‚
  â”‚  â”‚    return <div                                â”‚      â”‚
  â”‚  â”‚      dangerouslySetInnerHTML={{__html: html}} â”‚      â”‚
  â”‚  â”‚    />;                                        â”‚      â”‚
  â”‚  â”‚  }                                            â”‚      â”‚
  â”‚  â”‚  // â†’ Code + thÆ° viá»‡n GIá»® trÃªn server!      â”‚      â”‚
  â”‚  â”‚  // â†’ Client nháº­n Káº¾T QUáº¢ render (HTML)!   â”‚      â”‚
  â”‚  â”‚  // â†’ Bundle size = ZERO! ğŸ‰                â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§7. Data Fetching â€” Truy Cáº­p Backend Tá»« Má»i Vá»‹ TrÃ­

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SERVER COMPONENT FETCH DATA TRá»°C TIáº¾P Tá»ª SERVER!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  SO SÃNH CÃCH FETCH:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â•â•â• TRUYá»€N THá»NG: Client fetch qua HTTP â•â•â•          â”‚
  â”‚                                                        â”‚
  â”‚  Browser â”€â”€HTTPâ”€â”€â–¶ API Server â”€â”€SQLâ”€â”€â–¶ Database       â”‚
  â”‚                                                        â”‚
  â”‚  Latency: 50-200ms (network!) + 10ms (query!)         â”‚
  â”‚  â†’ Client pháº£i Ä‘á»£i network roundtrip!                â”‚
  â”‚  â†’ Má»—i component fetch = thÃªm 1 roundtrip!           â”‚
  â”‚  â†’ N components = N roundtrips! (waterfall!)           â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â•â•â• SERVER COMPONENT: Server fetch trá»±c tiáº¿p â•â•â•    â”‚
  â”‚                                                        â”‚
  â”‚  Server â”€â”€localâ”€â”€â–¶ Database (CÃ™NG Máº NG!)              â”‚
  â”‚                                                        â”‚
  â”‚  Latency: 1-5ms! (local network / same machine!)      â”‚
  â”‚  â†’ KHÃ”NG cÃ³ network roundtrip tá»« client!              â”‚
  â”‚  â†’ N components fetch = N local queries!               â”‚
  â”‚  â†’ Nhanh Gáº¦N NHÆ¯ Tá»¨C THÃŒ!                           â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  VÃ Dá»¤ THá»°C Táº¾:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  // âœ… Server Component â€” TRUY Cáº¬P TRá»°C TIáº¾P!       â”‚
  â”‚                                                        â”‚
  â”‚  // NoteList.server.js                                  â”‚
  â”‚  import { db } from './database';                       â”‚
  â”‚  import { readFile } from 'fs/promises';                â”‚
  â”‚                                                        â”‚
  â”‚  async function NoteList() {                            â”‚
  â”‚    // âœ… Truy cáº­p DATABASE trá»±c tiáº¿p!                â”‚
  â”‚    const notes = await db.query(                        â”‚
  â”‚      'SELECT * FROM notes ORDER BY updated_at DESC'    â”‚
  â”‚    );                                                   â”‚
  â”‚                                                        â”‚
  â”‚    // âœ… Äá»c FILE SYSTEM!                              â”‚
  â”‚    const template = await readFile(                     â”‚
  â”‚      './templates/note.html', 'utf-8'                   â”‚
  â”‚    );                                                   â”‚
  â”‚                                                        â”‚
  â”‚    // âœ… Gá»i INTERNAL API (cÃ¹ng máº¡ng!)               â”‚
  â”‚    const user = await fetch(                            â”‚
  â”‚      'http://internal-api:3001/user'                    â”‚
  â”‚    ).then(r => r.json());                               â”‚
  â”‚                                                        â”‚
  â”‚    return (                                             â”‚
  â”‚      <div>                                              â”‚
  â”‚        <h2>Welcome, {user.name}!</h2>                   â”‚
  â”‚        {notes.map(note =>                               â”‚
  â”‚          <NoteItem key={note.id} note={note} />         â”‚
  â”‚        )}                                               â”‚
  â”‚      </div>                                             â”‚
  â”‚    );                                                   â”‚
  â”‚  }                                                      â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  // âŒ Client Component â€” KHÃ”NG THá»‚ lÃ m nhÆ° trÃªn!    â”‚
  â”‚  // Counter.client.js                                   â”‚
  â”‚  'use client';                                          â”‚
  â”‚  function Counter() {                                   â”‚
  â”‚    // âŒ KHÃ”NG thá»ƒ: await db.query()!                 â”‚
  â”‚    // âŒ KHÃ”NG thá»ƒ: readFile()!                       â”‚
  â”‚    // âœ… Pháº£i dÃ¹ng: useEffect + fetch()!              â”‚
  â”‚    const [data, setData] = useState(null);              â”‚
  â”‚    useEffect(() => {                                    â”‚
  â”‚      fetch('/api/data').then(r => r.json())             â”‚
  â”‚        .then(setData); // â†’ Network roundtrip!        â”‚
  â”‚    }, []);                                              â”‚
  â”‚  }                                                      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  DATA SOURCE COLOCATION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Component + Data Source = CÃ™NG CHá»–!                   â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚ Component        â”‚ Data Source               â”‚      â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤      â”‚
  â”‚  â”‚ ArtistDetails    â”‚ fetchDetails(artistId)    â”‚      â”‚
  â”‚  â”‚ TopTracks        â”‚ fetchTopTracks(artistId)  â”‚      â”‚
  â”‚  â”‚ Discography      â”‚ fetchDiscography(artistId)â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚  âœ… XÃ³a ArtistDetails = xÃ³a fetchDetails luÃ´n!      â”‚
  â”‚  âœ… ThÃªm component = thÃªm fetch Cá»¦A NÃ“!             â”‚
  â”‚  âœ… KHÃ”NG cáº§n sá»­a parent!                             â”‚
  â”‚  âœ… Clear dependency = easy maintenance!               â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§8. Automatic Code Splitting â€” Tá»± Äá»™ng Chia Code

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  RSC Tá»° Äá»˜NG CODE SPLITTING CHO CLIENT COMPONENTS!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  TRUYá»€N THá»NG â€” THá»¦ CÃ”NG:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  // Developer pháº£i Tá»° TAY lazy import!                â”‚
  â”‚  const NoteEditor = lazy(                              â”‚
  â”‚    () => import('./NoteEditor')                         â”‚
  â”‚  );                                                     â”‚
  â”‚  const UserProfile = lazy(                              â”‚
  â”‚    () => import('./UserProfile')                        â”‚
  â”‚  );                                                     â”‚
  â”‚                                                        â”‚
  â”‚  function App() {                                       â”‚
  â”‚    return (                                             â”‚
  â”‚      <Suspense fallback={<Spinner />}>                  â”‚
  â”‚        <NoteEditor />                                   â”‚
  â”‚        <UserProfile />                                  â”‚
  â”‚      </Suspense>                                        â”‚
  â”‚    );                                                   â”‚
  â”‚  }                                                      â”‚
  â”‚                                                        â”‚
  â”‚  âŒ QuÃªn lazy = Táº¢I Táº¤T Cáº¢ trong main bundle!       â”‚
  â”‚  âŒ Pháº£i biáº¿t CHÃNH XÃC tÃ¡ch á»Ÿ Ä‘Ã¢u!                 â”‚
  â”‚  âŒ ThÃªm component = pháº£i nhá»› thÃªm lazy!              â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  RSC â€” Tá»° Äá»˜NG:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  // Server Component import Client Component:           â”‚
  â”‚  // â†’ Tá»° Äá»˜NG tÃ¡ch thÃ nh chunk riÃªng!                â”‚
  â”‚  // â†’ KHÃ”NG cáº§n lazy()!                                â”‚
  â”‚                                                        â”‚
  â”‚  // App.server.js                                       â”‚
  â”‚  import NoteEditor from './NoteEditor.client';          â”‚
  â”‚  import UserProfile from './UserProfile.client';        â”‚
  â”‚                                                        â”‚
  â”‚  async function App() {                                 â”‚
  â”‚    const data = await fetchData();                      â”‚
  â”‚    return (                                             â”‚
  â”‚      <div>                                              â”‚
  â”‚        <NoteEditor note={data.note} />                  â”‚
  â”‚        <UserProfile user={data.user} />                 â”‚
  â”‚      </div>                                             â”‚
  â”‚    );                                                   â”‚
  â”‚  }                                                      â”‚
  â”‚                                                        â”‚
  â”‚  âœ… Bundler Tá»° Äá»˜NG tÃ¡ch NoteEditor + UserProfile!  â”‚
  â”‚  âœ… Client CHá»ˆ táº£i component Cáº¦N THIáº¾T!              â”‚
  â”‚  âœ… Developer KHÃ”NG cáº§n quan tÃ¢m!                     â”‚
  â”‚  âœ… "Pit of success" â€” máº·c Ä‘á»‹nh Ä‘Ã£ tá»‘i Æ°u!          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  SÆ  Äá»’ BUNDLE OUTPUT:                                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  TRUYá»€N THá»NG:                                â”‚      â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚      â”‚
  â”‚  â”‚  â”‚ main.bundle.js (ALL CODE!) â”‚               â”‚      â”‚
  â”‚  â”‚  â”‚ 500KB! ğŸ˜±                  â”‚               â”‚      â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â”‚  RSC + AUTO SPLITTING:                        â”‚      â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚      â”‚
  â”‚  â”‚  â”‚ NoteEditor  â”‚ â”‚ UserProfile  â”‚             â”‚      â”‚
  â”‚  â”‚  â”‚ chunk (15KB)â”‚ â”‚ chunk (10KB) â”‚             â”‚      â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚      â”‚
  â”‚  â”‚  â†’ Táº£i CHá»ˆ khi cáº§n! On-demand!              â”‚      â”‚
  â”‚  â”‚  â†’ Trang chá»‰ dÃ¹ng NoteEditor?               â”‚      â”‚
  â”‚  â”‚    â†’ CHá»ˆ táº£i 15KB! KHÃ”NG táº£i UserProfile!   â”‚      â”‚
  â”‚  â”‚                                               â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§9. No Client-Server Waterfalls â€” Loáº¡i Bá» ThÃ¡c NÆ°á»›c

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  WATERFALL = CÃC REQUEST Ná»I ÄUÃ”I NHAU = CHáº¬M!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  CLIENT WATERFALL:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Truyá»n thá»‘ng â€” component fetch trÃªn CLIENT:           â”‚
  â”‚                                                        â”‚
  â”‚  0ms   100ms  200ms  300ms  400ms  500ms  600ms        â”‚
  â”‚  â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚            â”‚
  â”‚  â”‚      â”‚      â”‚      â”‚      â”‚      â”‚      â”‚            â”‚
  â”‚  â”‚ App renders!â”‚      â”‚      â”‚      â”‚      â”‚            â”‚
  â”‚  â”‚ useEffect()!â”‚      â”‚      â”‚      â”‚      â”‚            â”‚
  â”‚  â”‚ fetch /api/ â”‚      â”‚      â”‚      â”‚      â”‚            â”‚
  â”‚  â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚      â”‚      â”‚      â”‚      â”‚            â”‚
  â”‚  â”‚  â† 100ms â†’ â”‚      â”‚      â”‚      â”‚      â”‚            â”‚
  â”‚  â”‚             â”‚ ArtistDetails renders!    â”‚            â”‚
  â”‚  â”‚             â”‚ useEffect()!  â”‚      â”‚    â”‚            â”‚
  â”‚  â”‚             â”‚ fetch details â”‚      â”‚    â”‚            â”‚
  â”‚  â”‚             â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚      â”‚    â”‚            â”‚
  â”‚  â”‚             â”‚  â† 120ms â†’   â”‚      â”‚    â”‚            â”‚
  â”‚  â”‚             â”‚              â”‚TopTracks!  â”‚            â”‚
  â”‚  â”‚             â”‚              â”‚fetch tracksâ”‚            â”‚
  â”‚  â”‚             â”‚              â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚            â”‚
  â”‚  â”‚             â”‚              â”‚ â† 100ms â†’ â”‚            â”‚
  â”‚  â”‚             â”‚              â”‚            â”‚ DONE!      â”‚
  â”‚  â”‚             â”‚              â”‚            â”‚            â”‚
  â”‚  â”‚â—€â•â•â•â•â•â•â•â•â•â•â•â• Tá»”NG: 320ms â•â•â•â•â•â•â•â•â•â•â•â•â–¶â”‚            â”‚
  â”‚  â”‚  (3 requests Ná»I ÄUÃ”I NHAU!)          â”‚            â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  SERVER â€” KHÃ”NG WATERFALL:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  RSC â€” Táº¥t cáº£ fetch trÃªn SERVER (cÃ¹ng máº¡ng!):        â”‚
  â”‚                                                        â”‚
  â”‚  0ms   5ms   10ms   15ms   20ms                        â”‚
  â”‚  â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”‚                          â”‚
  â”‚  â”‚      â”‚      â”‚      â”‚      â”‚                          â”‚
  â”‚  â”‚ App renders!â”‚      â”‚      â”‚                          â”‚
  â”‚  â”‚ await fetch â† 3ms â”‚      â”‚                          â”‚
  â”‚  â”‚ ArtistDetails!     â”‚      â”‚                          â”‚
  â”‚  â”‚ await fetch â† 5ms â”‚      â”‚                          â”‚
  â”‚  â”‚ TopTracks!         â”‚      â”‚                          â”‚
  â”‚  â”‚ await fetch â† 4ms â”‚      â”‚                          â”‚
  â”‚  â”‚ Discography!       â”‚      â”‚                          â”‚
  â”‚  â”‚ await fetch â† 3ms â”‚      â”‚                          â”‚
  â”‚  â”‚             â”‚      â”‚      â”‚                          â”‚
  â”‚  â”‚â—€â•â• ~15ms â•â•â–¶â”‚      â”‚      â”‚                          â”‚
  â”‚  â”‚ DONE! (server-to-server = NHANH!)                   â”‚
  â”‚                                                        â”‚
  â”‚  320ms â†’ 15ms = NHANH HÆ N 21 Láº¦N! ğŸš€                â”‚
  â”‚                                                        â”‚
  â”‚  ï¿½ï¿½ VÃŒ SAO NHANH:                                      â”‚
  â”‚  â†’ Server fetch â†’ Server: cÃ¹ng datacenter (1-5ms!)   â”‚
  â”‚  â†’ KHÃ”NG cÃ³ browser â†’ server roundtrip!               â”‚
  â”‚  â†’ KHÃ”NG cáº§n Ä‘á»£i render rá»“i má»›i fetch!              â”‚
  â”‚  â†’ Component CÃ“ THá»‚ async/await TRá»°C TIáº¾P!          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---
