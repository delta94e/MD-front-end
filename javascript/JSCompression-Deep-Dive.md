# NÃ©n JavaScript (Compressing JavaScript) â€” Deep Dive

> **TÃ i liá»‡u há»c táº­p chuyÃªn sÃ¢u â€” HoÃ n toÃ n báº±ng Tiáº¿ng Viá»‡t**
> KhÃ´ng sá»­ dá»¥ng thÆ° viá»‡n â€” Tá»± viáº¿t tay tá»« Ä‘áº§u & giáº£i thÃ­ch cá»±c ká»³ chi tiáº¿t!

---

## Má»¥c Lá»¥c

1. [Tá»•ng Quan â€” Táº¡i Sao Pháº£i NÃ©n JavaScript?](#1)
2. [HTTP Compression â€” Ná»n Táº£ng](#2)
3. [Lossy vs Lossless â€” PhÃ¢n Loáº¡i NÃ©n](#3)
4. [Minification â€” BÆ°á»›c Äáº§u TiÃªn TrÆ°á»›c Khi NÃ©n](#4)
5. [Static vs Dynamic Compression](#5)
6. [Thuáº­t ToÃ¡n Gzip â€” Deep Dive](#6)
7. [Thuáº­t ToÃ¡n Brotli â€” Deep Dive](#7)
8. [So SÃ¡nh Gzip vs Brotli â€” Benchmarks](#8)
9. [KÃ­ch Hoáº¡t Compression Trong Thá»±c Táº¿](#9)
10. [Kiá»ƒm Tra (Audit) Compression](#10)
11. [Thuáº­t Ngá»¯ Bundling â€” Module, Bundle, Chunk](#11)
12. [Loading Granularity â€” Äá»™ Chi Tiáº¿t Táº£i Code](#12)
13. [Granularity Trade-off â€” BÃ i ToÃ¡n ÄÃ¡nh Äá»•i](#13)
14. [SplitChunksPlugin & Granular Chunking](#14)
15. [Tá»± Viáº¿t Tay: Minifier ÄÆ¡n Giáº£n](#15)
16. [Tá»± Viáº¿t Tay: Thuáº­t ToÃ¡n LZ77](#16)
17. [Tá»± Viáº¿t Tay: Huffman Coding](#17)
18. [Tá»± Viáº¿t Tay: Compression Pipeline HoÃ n Chá»‰nh](#18)
19. [Best Practices & Phá»ng Váº¥n](#19)

---

## Â§1. Tá»•ng Quan â€” Táº¡i Sao Pháº£i NÃ©n JavaScript?

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Váº¤N Äá»€: JAVASCRIPT LÃ€ "GÃN Náº¶NG" Lá»šN THá»¨ 2 Cá»¦A WEB
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Top 2 tÃ i nguyÃªn web Náº¶NG nháº¥t:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ #1  Images    â†’ chiáº¿m ~50% page weight             â”‚
  â”‚ #2  JavaScript â†’ chiáº¿m ~30% page weight            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  JavaScript KHÃC images á»Ÿ chá»—:
  â†’ Images: download â†’ decode â†’ paint (GPU!)
  â†’ JavaScript: download â†’ PARSE â†’ COMPILE â†’ EXECUTE (CPU!)
  â†’ 1MB JS tá»‘n NHIá»€U thá»i gian hÆ¡n 1MB image!

  PIPELINE Xá»¬ LÃ JAVASCRIPT:
  â”Œâ”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚Downloadâ”‚â”€â”€â†’â”‚ Parse  â”‚â”€â”€â†’â”‚ Compile â”‚â”€â”€â†’â”‚ Execute â”‚
  â”‚(network)â”‚  â”‚(CPU!)  â”‚   â”‚(CPU!)   â”‚   â”‚(CPU!)   â”‚
  â””â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
     â†‘
     â”‚ COMPRESSION giáº£m bÆ°á»›c nÃ y!
     â”‚ Download nhanh hÆ¡n = tá»•ng thá»i gian giáº£m!

  VÃ Dá»¤ THá»°C Táº¾:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Bundle gá»‘c:     1.2MB                              â”‚
  â”‚ Sau minify:     800KB  (giáº£m 33%)                  â”‚
  â”‚ Sau Gzip:       250KB  (giáº£m thÃªm 69%)             â”‚
  â”‚ Sau Brotli:     210KB  (giáº£m thÃªm 74%)             â”‚
  â”‚                                                    â”‚
  â”‚ TrÃªn 3G (1.5Mbps):                                â”‚
  â”‚   1.2MB â†’ 6.4 giÃ¢y download!                       â”‚
  â”‚   210KB â†’ 1.1 giÃ¢y download!                       â”‚
  â”‚   â†’ Tiáº¿t kiá»‡m 5.3 GIÃ‚Y! ğŸš€                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Káº¾T Há»¢P NHIá»€U Ká»¸ THUáº¬T:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â‘  Minification  â†’ bá» whitespace, comments         â”‚
  â”‚ â‘¡ Compression   â†’ nÃ©n binary (Gzip/Brotli)        â”‚
  â”‚ â‘¢ Code-splitting â†’ tÃ¡ch thÃ nh chunks nhá»          â”‚
  â”‚ â‘£ Tree-shaking   â†’ bá» dead code                   â”‚
  â”‚ â‘¤ Lazy-loading   â†’ táº£i sau khi cáº§n                â”‚
  â”‚ â‘¥ Caching        â†’ khÃ´ng táº£i láº¡i láº§n 2            â”‚
  â”‚                                                    â”‚
  â”‚ âš ï¸ NHÆ¯NG: cÃ¡c ká»¹ thuáº­t nÃ y ÄÃ”I KHI MÃ‚U THUáºªN!   â”‚
  â”‚ â†’ Compression tá»‘t hÆ¡n vá»›i file Lá»šN!               â”‚
  â”‚ â†’ Code-splitting táº¡o file NHá»!                    â”‚
  â”‚ â†’ ÄÃ¢y lÃ  GRANULARITY TRADE-OFF!                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§2. HTTP Compression â€” Ná»n Táº£ng

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  HTTP COMPRESSION HOáº T Äá»˜NG NHÆ¯ THáº¾ NÃ€O?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  FLOW:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ BROWSER  â”‚                          â”‚  SERVER  â”‚
  â”‚          â”‚  â‘  Request + Header:     â”‚          â”‚
  â”‚          â”‚â”€â”€Accept-Encoding:â”€â”€â”€â”€â”€â”€â”€â”€â†’â”‚          â”‚
  â”‚          â”‚  gzip, br, deflate       â”‚          â”‚
  â”‚          â”‚                          â”‚          â”‚
  â”‚          â”‚                          â”‚ â‘¡ NÃ©n    â”‚
  â”‚          â”‚                          â”‚ response â”‚
  â”‚          â”‚                          â”‚ báº±ng algoâ”‚
  â”‚          â”‚                          â”‚ tá»‘t nháº¥t â”‚
  â”‚          â”‚                          â”‚          â”‚
  â”‚          â”‚  â‘¢ Response + Header:    â”‚          â”‚
  â”‚          â”‚â†â”€â”€Content-Encoding:â”€â”€â”€â”€â”€â”€â”‚          â”‚
  â”‚          â”‚   br                     â”‚          â”‚
  â”‚          â”‚                          â”‚          â”‚
  â”‚ â‘£ Giáº£i   â”‚                          â”‚          â”‚
  â”‚ nÃ©n auto â”‚                          â”‚          â”‚
  â”‚ bá»Ÿi      â”‚                          â”‚          â”‚
  â”‚ browser! â”‚                          â”‚          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  CHI TIáº¾T HEADERS:

  REQUEST (browser gá»­i):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ GET /bundle.js HTTP/1.1                            â”‚
  â”‚ Host: example.com                                  â”‚
  â”‚ Accept-Encoding: gzip, deflate, br                 â”‚
  â”‚                   â†‘      â†‘       â†‘                 â”‚
  â”‚                   â”‚      â”‚       â””â”€ Brotli          â”‚
  â”‚                   â”‚      â””â”€ Deflate (Ã­t dÃ¹ng)       â”‚
  â”‚                   â””â”€ Gzip                           â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Browser NÃ“I: "TÃ´i HIá»‚U 3 loáº¡i nÃ©n nÃ y!"        â”‚
  â”‚ â†’ Server CHá»ŒN loáº¡i tá»‘t nháº¥t!                      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  RESPONSE (server gá»­i):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ HTTP/1.1 200 OK                                    â”‚
  â”‚ Content-Encoding: br                               â”‚
  â”‚ Content-Type: application/javascript                â”‚
  â”‚ Content-Length: 42580                               â”‚
  â”‚ Vary: Accept-Encoding                              â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Content-Encoding: br = "TÃ´i Ä‘Ã£ nÃ©n báº±ng Brotli!"â”‚
  â”‚ â†’ Vary: Accept-Encoding = "Cache theo encoding!"  â”‚
  â”‚   (CDN cache riÃªng cho gzip vs brotli!)            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Táº I SAO Cáº¦N "Vary: Accept-Encoding"?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Náº¿u KHÃ”NG CÃ“ Vary:                                â”‚
  â”‚ â†’ CDN cache báº£n Brotli!                            â”‚
  â”‚ â†’ Browser cÅ© (khÃ´ng há»— trá»£ Brotli) request        â”‚
  â”‚ â†’ CDN tráº£ báº£n Brotli â†’ Browser KHÃ”NG GIáº¢I NÃ‰N ÄÆ¯á»¢C!â”‚
  â”‚ â†’ BROKEN! âŒ                                       â”‚
  â”‚                                                    â”‚
  â”‚ CÃ“ Vary: Accept-Encoding:                         â”‚
  â”‚ â†’ CDN cache RIÃŠNG: báº£n gzip + báº£n brotli!         â”‚
  â”‚ â†’ Browser cÅ© â†’ nháº­n gzip âœ…                       â”‚
  â”‚ â†’ Browser má»›i â†’ nháº­n brotli âœ…                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§3. Lossy vs Lossless â€” PhÃ¢n Loáº¡i NÃ©n

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  2 LOáº I NÃ‰N: LOSSY vs LOSSLESS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚              â”‚ LOSSY (Máº¥t mÃ¡t)    â”‚ LOSSLESS (KhÃ´ng  â”‚
  â”‚              â”‚                    â”‚ máº¥t mÃ¡t)         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ NguyÃªn lÃ½    â”‚ Bá» bá»›t data KHÃ”NG â”‚ NÃ©n data nhÆ°ng   â”‚
  â”‚              â”‚ cáº§n thiáº¿t cho      â”‚ GIá»® NGUYÃŠN 100%  â”‚
  â”‚              â”‚ perception         â”‚ khi giáº£i nÃ©n     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Sau giáº£i nÃ©n â”‚ KhÃ¡c gá»‘c           â”‚ GIá»NG Há»†T gá»‘c   â”‚
  â”‚              â”‚ (nhÆ°ng cháº¥p nháº­n!) â”‚                  â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Tá»· lá»‡ nÃ©n   â”‚ CAO hÆ¡n            â”‚ THáº¤P hÆ¡n         â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ VÃ­ dá»¥        â”‚ JPEG, MP3, H.264   â”‚ PNG, FLAC, ZIP   â”‚
  â”‚              â”‚ WebP (lossy mode)  â”‚ Gzip, Brotli     â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ DÃ¹ng cho     â”‚ Images, Audio,     â”‚ Text, Code,      â”‚
  â”‚              â”‚ Video              â”‚ HTML, CSS, JS    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Táº I SAO JAVASCRIPT PHáº¢I DÃ™NG LOSSLESS?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Lossy bá» bá»›t data = OK cho áº£nh (máº¯t khÃ´ng tháº¥y!) â”‚
  â”‚                                                    â”‚
  â”‚ NHÆ¯NG JavaScript = CODE!                           â”‚
  â”‚ â†’ Bá» 1 kÃ½ tá»± = SYNTAX ERROR!                     â”‚
  â”‚ â†’ Bá» 1 dáº¥u ; = CODE BROKEN!                      â”‚
  â”‚ â†’ Bá» 1 biáº¿n = RUNTIME ERROR!                     â”‚
  â”‚                                                    â”‚
  â”‚ â†’ JavaScript PHáº¢I giáº£i nÃ©n ra GIá»NG Há»†T gá»‘c!     â”‚
  â”‚ â†’ Báº¯t buá»™c dÃ¹ng LOSSLESS: Gzip hoáº·c Brotli!      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  NHÆ¯NG TRÆ¯á»šC KHI NÃ‰N â†’ MINIFICATION!
  â†’ Minification = bá» thá»© KHÃ”NG Cáº¦N cho execution!
  â†’ Comments, whitespace, tÃªn biáº¿n dÃ i â†’ KHÃ”NG cáº§n!
  â†’ Minification = "lossy cho SOURCE, lossless cho LOGIC"!
```

---

## Â§4. Minification â€” BÆ°á»›c Äáº§u TiÃªn TrÆ°á»›c Khi NÃ©n

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  MINIFICATION = Bá» CODE KHÃ”NG Cáº¦N CHO EXECUTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  TRÆ¯á»šC MINIFICATION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ // HÃ m tÃ­nh tá»•ng 2 sá»‘                             â”‚
  â”‚ function calculateSum(firstNumber, secondNumber) { â”‚
  â”‚   // Cá»™ng 2 sá»‘ láº¡i                                â”‚
  â”‚   const result = firstNumber + secondNumber;       â”‚
  â”‚                                                    â”‚
  â”‚   // Tráº£ vá» káº¿t quáº£                               â”‚
  â”‚   return result;                                   â”‚
  â”‚ }                                                  â”‚
  â”‚                                                    â”‚
  â”‚ â†’ 234 bytes!                                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  SAU MINIFICATION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ function calculateSum(a,b){return a+b}             â”‚
  â”‚                                                    â”‚
  â”‚ â†’ 42 bytes! (giáº£m 82%!)                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  MINIFIER LÃ€M GÃŒ?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â‘  XÃ³a COMMENTS:                                   â”‚
  â”‚   // single-line comment â†’ XÃ“A                     â”‚
  â”‚   /* multi-line comment */ â†’ XÃ“A                   â”‚
  â”‚                                                    â”‚
  â”‚ â‘¡ XÃ³a WHITESPACE:                                 â”‚
  â”‚   Spaces, tabs, newlines â†’ XÃ“A                     â”‚
  â”‚   (giá»¯ láº¡i space Cáº¦N THIáº¾T:                       â”‚
  â”‚    "return result" khÃ´ng thÃ nh "returnresult"!)     â”‚
  â”‚                                                    â”‚
  â”‚ â‘¢ RÃºt gá»n TÃŠN BIáº¾N (mangling):                   â”‚
  â”‚   firstNumber â†’ a                                  â”‚
  â”‚   secondNumber â†’ b                                 â”‚
  â”‚   calculateResult â†’ c                              â”‚
  â”‚                                                    â”‚
  â”‚ â‘£ Tá»‘i Æ°u LOGIC:                                   â”‚
  â”‚   const result = a + b; return result;             â”‚
  â”‚   â†’ return a + b; (bá» biáº¿n trung gian!)            â”‚
  â”‚                                                    â”‚
  â”‚ â‘¤ Dead code elimination:                          â”‚
  â”‚   if (false) { ... } â†’ XÃ“A háº¿t block!            â”‚
  â”‚   function unused() { ... } â†’ XÃ“A!               â”‚
  â”‚                                                    â”‚
  â”‚ â‘¥ RÃºt gá»n boolean:                                â”‚
  â”‚   === true â†’ (bá»!)                                â”‚
  â”‚   === false â†’ ! (negate!)                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  CÃC CÃ”NG Cá»¤ MINIFICATION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Terser       â†’ Phá»• biáº¿n nháº¥t! ES6+ support!       â”‚
  â”‚                Webpack v4+ dÃ¹ng máº·c Ä‘á»‹nh!          â”‚
  â”‚                                                    â”‚
  â”‚ UglifyJS     â†’ CÅ© hÆ¡n, CHá»ˆ ES5!                  â”‚
  â”‚                Webpack v3 dÃ¹ng!                    â”‚
  â”‚                                                    â”‚
  â”‚ esbuild      â†’ Nhanh nháº¥t (Go-based!)             â”‚
  â”‚                Vite dÃ¹ng máº·c Ä‘á»‹nh!                 â”‚
  â”‚                Minify nhanh 10-100x Terser!        â”‚
  â”‚                                                    â”‚
  â”‚ SWC          â†’ Nhanh (Rust-based!)                 â”‚
  â”‚                Next.js 12+ dÃ¹ng!                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  MINIFICATION vs COMPRESSION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                Minification    Compression          â”‚
  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
  â”‚ Khi nÃ o?     Build time       Server/Build time    â”‚
  â”‚ LÃ m gÃ¬?      Bá» syntax thá»«a  NÃ©n binary patterns  â”‚
  â”‚ Output       Valid JS nhá» hÆ¡n Binary (khÃ´ng Ä‘á»c)   â”‚
  â”‚ Giáº£m size    ~30-60%         ~60-80% (thÃªm!)      â”‚
  â”‚ Reversible?  KHÃ”NG            CÃ“ (lossless!)       â”‚
  â”‚ Cáº§n cáº£ 2?   CÃ“! Minify TRÆ¯á»šC, compress SAU!      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§5. Static vs Dynamic Compression

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  2 CÃCH NÃ‰N: STATIC (trÆ°á»›c) vs DYNAMIC (táº¡i chá»—)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  STATIC COMPRESSION (nÃ©n trÆ°á»›c â€” build time):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ BUILD PROCESS:                                     â”‚
  â”‚                                                    â”‚
  â”‚ bundle.js â”€â”€â†’ Terser â”€â”€â†’ bundle.min.js             â”‚
  â”‚                            â”‚                       â”‚
  â”‚                            â”œâ”€â”€â†’ bundle.min.js.gz   â”‚
  â”‚                            â”‚    (Gzip level 9!)    â”‚
  â”‚                            â”‚                       â”‚
  â”‚                            â””â”€â”€â†’ bundle.min.js.br   â”‚
  â”‚                                 (Brotli level 11!) â”‚
  â”‚                                                    â”‚
  â”‚ â†’ NÃ©n 1 Láº¦N lÃºc build!                            â”‚
  â”‚ â†’ Server CHá»ˆ Cáº¦N serve file Ä‘Ã£ nÃ©n!               â”‚
  â”‚ â†’ CÃ³ thá»ƒ dÃ¹ng compression level CAO NHáº¤T!         â”‚
  â”‚ â†’ Build cháº­m hÆ¡n NHÆ¯NG download NHANH nháº¥t!       â”‚
  â”‚                                                    â”‚
  â”‚ KHI NÃ€O DÃ™NG:                                      â”‚
  â”‚ â†’ Files KHÃ”NG thay Ä‘á»•i thÆ°á»ng xuyÃªn!              â”‚
  â”‚ â†’ JS bundles, CSS files, static assets!            â”‚
  â”‚ â†’ Production builds!                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  DYNAMIC COMPRESSION (nÃ©n táº¡i chá»— â€” runtime):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ REQUEST TIME:                                      â”‚
  â”‚                                                    â”‚
  â”‚ Browser â”€â”€requestâ”€â”€â†’ Server                        â”‚
  â”‚                        â”‚                           â”‚
  â”‚                        â”œâ”€ Äá»c bundle.min.js        â”‚
  â”‚                        â”œâ”€ NÃ©n ON-THE-FLY!          â”‚
  â”‚                        â”‚  (Gzip level 6!)          â”‚
  â”‚                        â”‚  (Brotli level 4!)        â”‚
  â”‚                        â””â”€ Gá»­i response nÃ©n         â”‚
  â”‚                                                    â”‚
  â”‚ â†’ NÃ©n Má»–I request!                                â”‚
  â”‚ â†’ PHáº¢I dÃ¹ng compression level THáº¤P hÆ¡n!           â”‚
  â”‚ â†’ Náº¿u level cao: user CHá»œI nÃ©n â†’ cháº­m!            â”‚
  â”‚ â†’ Dá»… implement hÆ¡n!                                â”‚
  â”‚                                                    â”‚
  â”‚ KHI NÃ€O DÃ™NG:                                      â”‚
  â”‚ â†’ Content thay Ä‘á»•i THÆ¯á»œNG XUYÃŠN!                  â”‚
  â”‚ â†’ API responses (JSON!)                            â”‚
  â”‚ â†’ Server-rendered HTML!                            â”‚
  â”‚ â†’ User-generated content!                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  SO SÃNH:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚              â”‚ STATIC          â”‚ DYNAMIC          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Khi nÃ o nÃ©n  â”‚ Build time      â”‚ Request time     â”‚
  â”‚ Level nÃ©n    â”‚ CAO (9-11)      â”‚ THáº¤P (4-6)       â”‚
  â”‚ Tá»· lá»‡ nÃ©n   â”‚ Tá»T nháº¥t        â”‚ KÃ©m hÆ¡n ~5-10%   â”‚
  â”‚ CPU server   â”‚ KHÃ”NG (Ä‘Ã£ nÃ©n!) â”‚ CÃ“ (má»—i request)â”‚
  â”‚ Latency thÃªm â”‚ 0ms             â”‚ 5-50ms (tÃ¹y size)â”‚
  â”‚ Linh hoáº¡t    â”‚ THáº¤P            â”‚ CAO              â”‚
  â”‚ Setup        â”‚ Webpack plugin  â”‚ Server middleware â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  BEST PRACTICE: DÃ™NG Cáº¢ HAI!
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â†’ Static cho JS/CSS bundles (build time!)          â”‚
  â”‚ â†’ Dynamic cho API responses (runtime!)             â”‚
  â”‚ â†’ Nginx: try_files $uri.br $uri.gz $uri;           â”‚
  â”‚   â†’ Æ¯u tiÃªn Brotli â†’ fallback Gzip â†’ raw!        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§6. Thuáº­t ToÃ¡n Gzip â€” Deep Dive

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  GZIP = DEFLATE + HEADERS/CHECKSUM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Gzip (1992) â€” ~30 nÄƒm tuá»•i! Váº«n dÃ¹ng kháº¯p nÆ¡i!

  KIáº¾N TRÃšC:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚        GZIP = DEFLATE algorithm + wrapper          â”‚
  â”‚                                                    â”‚
  â”‚  â”Œâ”€ GZIP Header â”€â”€â”                               â”‚
  â”‚  â”‚ Magic: 1f 8b    â”‚ â† nháº­n diá»‡n file gzip        â”‚
  â”‚  â”‚ Method: 08      â”‚ â† deflate algorithm           â”‚
  â”‚  â”‚ Flags, Time...  â”‚                               â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
  â”‚  â”Œâ”€ DEFLATE Data â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚ Compressed blocks...                     â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚  â”Œâ”€ GZIP Trailer â”€â”                               â”‚
  â”‚  â”‚ CRC32 checksum  â”‚ â† verify integrity            â”‚
  â”‚  â”‚ Original size   â”‚                               â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  DEFLATE = LZ77 + HUFFMAN CODING (2 bÆ°á»›c):

  â•â•â• BÆ¯á»šC 1: LZ77 â€” TÃ¬m chuá»—i láº·p â•â•â•

  Input: "ABCABCABCABC"

  QuÃ¡ trÃ¬nh:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Pos 0: 'A' â†’ chÆ°a tháº¥y â†’ output literal 'A'      â”‚
  â”‚ Pos 1: 'B' â†’ chÆ°a tháº¥y â†’ output literal 'B'      â”‚
  â”‚ Pos 2: 'C' â†’ chÆ°a tháº¥y â†’ output literal 'C'      â”‚
  â”‚ Pos 3: 'A' â†’ ÄÃƒ THáº¤Y á»Ÿ pos 0!                    â”‚
  â”‚         'AB' â†’ ÄÃƒ THáº¤Y á»Ÿ pos 0-1!                â”‚
  â”‚         'ABC' â†’ ÄÃƒ THáº¤Y á»Ÿ pos 0-2!                â”‚
  â”‚         'ABCA' â†’ ÄÃƒ THáº¤Y á»Ÿ pos 0-3!               â”‚
  â”‚         'ABCAB' â†’ ÄÃƒ THáº¤Y á»Ÿ pos 0-4!              â”‚
  â”‚         'ABCABC' â†’ ÄÃƒ THáº¤Y á»Ÿ pos 0-5!             â”‚
  â”‚         'ABCABCA' â†’ ÄÃƒ THáº¤Y á»Ÿ pos 0-6!            â”‚
  â”‚         'ABCABCABC' â†’ ÄÃƒ THáº¤Y táº¥t cáº£!             â”‚
  â”‚         â†’ output BACKREFERENCE (distance=3, len=9) â”‚
  â”‚                                                    â”‚
  â”‚ Káº¾T QUáº¢: A B C (3,9)                              â”‚
  â”‚           â†‘ â†‘ â†‘  â†‘                                 â”‚
  â”‚        literals  backreference!                     â”‚
  â”‚                                                    â”‚
  â”‚ â†’ 12 kÃ½ tá»± â†’ 4 tokens! NÃ©n Ä‘Ã¡ng ká»ƒ!              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Backreference = (distance, length):
  â†’ distance = bao xa PHÃA TRÆ¯á»šC Ä‘Ã£ tháº¥y chuá»—i
  â†’ length = chuá»—i láº·p dÃ i bao nhiÃªu

  SLIDING WINDOW:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ LZ77 dÃ¹ng SLIDING WINDOW (cá»­a sá»• trÆ°á»£t):          â”‚
  â”‚                                                    â”‚
  â”‚ â—„â”€â”€â”€â”€ Search buffer â”€â”€â”€â”€â–ºâ—„â”€â”€ Look-ahead â”€â”€â–º       â”‚
  â”‚ (Ä‘Ã£ xá»­ lÃ½ â€” tÃ¬m match)   (chÆ°a xá»­ lÃ½)            â”‚
  â”‚                                                    â”‚
  â”‚ Gzip window size = 32KB!                           â”‚
  â”‚ â†’ Chá»‰ tÃ¬m match trong 32KB gáº§n nháº¥t!              â”‚
  â”‚ â†’ Window lá»›n hÆ¡n = tÃ¬m nhiá»u match hÆ¡n = cháº­m hÆ¡n!â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â•â•â• BÆ¯á»šC 2: HUFFMAN CODING â€” MÃ£ hÃ³a táº§n suáº¥t â•â•â•

  Ã TÆ¯á»NG: KÃ½ tá»± THÆ¯á»œNG Gáº¶P â†’ mÃ£ NGáº®N!
            KÃ½ tá»± HIáº¾M â†’ mÃ£ DÃ€I!

  VÃ Dá»¤: Text "AAAAABBC"
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Táº§n suáº¥t: A=5, B=2, C=1                           â”‚
  â”‚                                                    â”‚
  â”‚ ASCII bÃ¬nh thÆ°á»ng: má»—i kÃ½ tá»± = 8 bits             â”‚
  â”‚ â†’ 8 kÃ½ tá»± Ã— 8 bits = 64 bits                      â”‚
  â”‚                                                    â”‚
  â”‚ Huffman: xÃ¢y TREE theo táº§n suáº¥t                    â”‚
  â”‚          (8)                                       â”‚
  â”‚         /   \                                      â”‚
  â”‚       A(5)  (3)                                    â”‚
  â”‚             / \                                    â”‚
  â”‚           B(2) C(1)                                â”‚
  â”‚                                                    â”‚
  â”‚ MÃ£ Huffman:                                        â”‚
  â”‚   A = 0     (1 bit! â€” vÃ¬ A xuáº¥t hiá»‡n NHIá»€U nháº¥t!) â”‚
  â”‚   B = 10    (2 bits)                               â”‚
  â”‚   C = 11    (2 bits)                               â”‚
  â”‚                                                    â”‚
  â”‚ Encoded: 0 0 0 0 0 10 10 11                        â”‚
  â”‚ = 5Ã—1 + 2Ã—2 + 1Ã—2 = 11 bits!                      â”‚
  â”‚                                                    â”‚
  â”‚ 64 bits â†’ 11 bits = giáº£m 83%! ğŸš€                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  GZIP COMPRESSION LEVELS (1-9):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Level 1: Nhanh nháº¥t, nÃ©n ÃT nháº¥t                   â”‚
  â”‚          â†’ Ãt effort tÃ¬m match!                    â”‚
  â”‚ Level 6: DEFAULT! Balance tá»‘c Ä‘á»™ + tá»· lá»‡ nÃ©n      â”‚
  â”‚ Level 9: Cháº­m nháº¥t, nÃ©n Tá»T nháº¥t                   â”‚
  â”‚          â†’ TÃ¬m match Ká»¸LÆ¯á» NG nháº¥t!                â”‚
  â”‚                                                    â”‚
  â”‚ Gzip 9 â†’ RECOMMENDED cho static compression!       â”‚
  â”‚ Gzip 6 â†’ OK cho dynamic compression!               â”‚
  â”‚                                                    â”‚
  â”‚ Cáº¢NH BÃO: Level 9 chá»‰ tá»‘t hÆ¡n level 6 ~2-3%!     â”‚
  â”‚ NhÆ°ng CHáº¬M hÆ¡n 5-10x! â†’ ÄÃ¡ng cho static!         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  ZOPFLI â€” Gzip cáº£i tiáº¿n:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Zopfli (Google, 2013):                             â”‚
  â”‚ â†’ Compatible 100% vá»›i Gzip!                        â”‚
  â”‚ â†’ Browser giáº£i nÃ©n BÃŒNH THÆ¯á»œNG comme Gzip!        â”‚
  â”‚ â†’ NhÆ°ng nÃ©n Tá»T HÆ N 3-8%!                        â”‚
  â”‚ â†’ CHáº¬M hÆ¡n Gzip 80-100x!                          â”‚
  â”‚ â†’ Chá»‰ dÃ¹ng cho STATIC compression!                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§7. Thuáº­t ToÃ¡n Brotli â€” Deep Dive

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  BROTLI (2015) â€” GOOGLE'S NEXT-GEN COMPRESSION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Brotli = LZ77 + Huffman + 2 TÃNH NÄ‚NG Má»šI:

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ TÃNH NÄ‚NG 1: 2ND ORDER CONTEXT MODELING            â”‚
  â”‚                                                    â”‚
  â”‚ Gzip Huffman: 1 báº£ng mÃ£ cho TOÃ€N Bá»˜ block!        â”‚
  â”‚ Brotli:       NHIá»€U báº£ng mÃ£ cho CÃ™NG block!        â”‚
  â”‚                                                    â”‚
  â”‚ Context modeling = chá»n báº£ng mÃ£ Dá»°A VÃ€O           â”‚
  â”‚ kÃ½ tá»± TRÆ¯á»šC ÄÃ“!                                   â”‚
  â”‚                                                    â”‚
  â”‚ VÃ Dá»¤: Sau kÃ½ tá»± 'q' â†’ 99% lÃ  'u'!               â”‚
  â”‚ â†’ Báº£ng Huffman riÃªng cho "sau q" chá»‰ cáº§n           â”‚
  â”‚   1 bit cho 'u'! CÃ²n báº£ng chung cáº§n 5 bits!       â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Context modeling = NÃ‰N Tá»T HÆ N 5-10%!          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ TÃNH NÄ‚NG 2: STATIC DICTIONARY                    â”‚
  â”‚                                                    â”‚
  â”‚ Brotli cÃ³ Sáº´N dictionary gá»“m ~120KB tá»« phá»• biáº¿n: â”‚
  â”‚ â†’ Tá»« tiáº¿ng Anh thÆ°á»ng gáº·p                         â”‚
  â”‚ â†’ HTML tags: <div>, <span>, </script>              â”‚
  â”‚ â†’ CSS properties: margin, padding, display         â”‚
  â”‚ â†’ JS keywords: function, return, const             â”‚
  â”‚ â†’ HTTP headers: Content-Type, Cache-Control        â”‚
  â”‚                                                    â”‚
  â”‚ Brotli reference DICTIONARY thay vÃ¬ repeat!        â”‚
  â”‚ â†’ "function" = 1 reference thay vÃ¬ 8 kÃ½ tá»±!       â”‚
  â”‚                                                    â”‚
  â”‚ Gzip KHÃ”NG CÃ“ dictionary!                          â”‚
  â”‚ â†’ Pháº£i tÃ¬m match trong data hiá»‡n táº¡i!             â”‚
  â”‚ â†’ Náº¿u "function" xuáº¥t hiá»‡n láº§n Ä‘áº§u â†’ giá»¯ nguyÃªn! â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Dictionary Ä‘áº·c biá»‡t Tá»T cho HTML/CSS/JS!       â”‚
  â”‚ â†’ ÄÃ¢y lÃ  lÃ½ do Brotli Máº NH hÆ¡n cho web content!  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ TÃNH NÄ‚NG 3: WINDOW SIZE Lá»šN HÆ N                  â”‚
  â”‚                                                    â”‚
  â”‚ Gzip window: 32KB                                  â”‚
  â”‚ Brotli window: lÃªn Ä‘áº¿n 16MB!                       â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Window lá»›n hÆ¡n = tÃ¬m match XA hÆ¡n!              â”‚
  â”‚ â†’ File lá»›n: nhiá»u patterns láº·p á»Ÿ xa!              â”‚
  â”‚ â†’ File cÃ ng lá»›n â†’ Brotli CÃ€NG tá»‘t hÆ¡n Gzip!      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  BROTLI COMPRESSION LEVELS (0-11):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Level 0-3:  Nhanh, nÃ©n Ã­t                          â”‚
  â”‚ Level 4:    TÆ°Æ¡ng Ä‘Æ°Æ¡ng Gzip 9 vá» tá»· lá»‡!          â”‚
  â”‚ Level 5-6:  Balance Tá»T cho dynamic compression!  â”‚
  â”‚ Level 7-9:  Tá»‘t hÆ¡n Gzip Ä‘Ã¡ng ká»ƒ!                â”‚
  â”‚ Level 10-11: Tá»T NHáº¤T nhÆ°ng Ráº¤T CHáº¬M!            â”‚
  â”‚              â†’ CHá»ˆ dÃ¹ng cho static compression!    â”‚
  â”‚                                                    â”‚
  â”‚ INSIGHTS tá»« Chrome research:                       â”‚
  â”‚ â†’ Brotli 7 > Gzip 9 á»Ÿ Má»ŒI bundle size!           â”‚
  â”‚ â†’ Brotli 9-11 tá»‘t NHIá»€U hÆ¡n Gzip nhÆ°ng cháº­m!     â”‚
  â”‚ â†’ DÆ°á»›i Brotli 6: dÃ¹ng Gzip 9 nhanh hÆ¡n mÃ         â”‚
  â”‚   tá»· lá»‡ nÃ©n TÆ¯Æ NG ÄÆ¯Æ NG!                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Há»– TRá»¢ BROWSER:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Chrome    : âœ… tá»« Chrome 49 (2016)                 â”‚
  â”‚ Firefox   : âœ… tá»« Firefox 44 (2016)                â”‚
  â”‚ Safari    : âœ… tá»« Safari 11 (2017)                 â”‚
  â”‚ Edge      : âœ… tá»« Edge 15 (2017)                   â”‚
  â”‚ IE        : âŒ KhÃ´ng há»— trá»£!                       â”‚
  â”‚                                                    â”‚
  â”‚ â†’ 2026: ~97% browsers há»— trá»£ Brotli!             â”‚
  â”‚ â†’ Gzip = fallback cho 3% cÃ²n láº¡i!                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§8. So SÃ¡nh Gzip vs Brotli â€” Benchmarks

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  BENCHMARK: GZIP vs BROTLI â€” Sá» LIá»†U THá»°C Táº¾
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Báº¢NG SO SÃNH Tá»¶ Lá»† NÃ‰N (file JS 1MB):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Algo     â”‚ Level    â”‚ Size Out â”‚ Tá»‘c Ä‘á»™ nÃ©n       â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Gzip     â”‚ 1        â”‚ 380KB    â”‚ ~200MB/s         â”‚
  â”‚ Gzip     â”‚ 6        â”‚ 310KB    â”‚ ~50MB/s          â”‚
  â”‚ Gzip     â”‚ 9        â”‚ 305KB    â”‚ ~10MB/s          â”‚
  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
  â”‚ Brotli   â”‚ 1        â”‚ 370KB    â”‚ ~250MB/s         â”‚
  â”‚ Brotli   â”‚ 4        â”‚ 305KB    â”‚ ~40MB/s          â”‚
  â”‚ Brotli   â”‚ 6        â”‚ 280KB    â”‚ ~15MB/s          â”‚
  â”‚ Brotli   â”‚ 9        â”‚ 255KB    â”‚ ~3MB/s           â”‚
  â”‚ Brotli   â”‚ 11       â”‚ 240KB    â”‚ ~0.5MB/s         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  KEY INSIGHTS:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â‘  Gzip 9 â‰ˆ Brotli 4 vá» tá»· lá»‡ nÃ©n                 â”‚
  â”‚   â†’ Brotli 4 NHANH hÆ¡n Gzip 9!                    â”‚
  â”‚                                                    â”‚
  â”‚ â‘¡ Brotli 7 > Gzip 9 á»Ÿ Má»ŒI bundle size             â”‚
  â”‚   â†’ Brotli 7 nÃ©n Tá»T hÆ¡n Gzip Tá»T NHáº¤T!         â”‚
  â”‚                                                    â”‚
  â”‚ â‘¢ Brotli 9-11 nÃ©n TUYá»†T Vá»œI:                      â”‚
  â”‚   â†’ 15-25% nhá» hÆ¡n Gzip 9!                        â”‚
  â”‚   â†’ NHÆ¯NG cháº­m hÆ¡n 20-100x!                       â”‚
  â”‚   â†’ CHá»ˆ dÃ¹ng cho static compression!               â”‚
  â”‚                                                    â”‚
  â”‚ â‘£ File CÃ€NG Lá»šN â†’ Brotli CÃ€NG tá»‘t hÆ¡n Gzip:      â”‚
  â”‚   10KB: Brotli tá»‘t hÆ¡n ~10%                       â”‚
  â”‚   100KB: Brotli tá»‘t hÆ¡n ~15%                      â”‚
  â”‚   1MB: Brotli tá»‘t hÆ¡n ~20%                        â”‚
  â”‚   â†’ VÃ¬ window size lá»›n hÆ¡n + dictionary!          â”‚
  â”‚                                                    â”‚
  â”‚ â‘¤ Tá»‘c Ä‘á»™ GIáº¢I NÃ‰N gáº§n Báº°NG nhau!                  â”‚
  â”‚   â†’ Browser giáº£i nÃ©n Gzip â‰ˆ Brotli!               â”‚
  â”‚   â†’ KHÃ”NG áº£nh hÆ°á»Ÿng client-side performance!       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  CASE STUDIES THá»°C Táº¾:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ OYO (travel platform):                             â”‚
  â”‚ â†’ Chuyá»ƒn tá»« Gzip â†’ Brotli                          â”‚
  â”‚ â†’ Giáº£m 15-20% file sizes!                         â”‚
  â”‚ â†’ Load time cáº£i thiá»‡n Ä‘Ã¡ng ká»ƒ!                    â”‚
  â”‚                                                    â”‚
  â”‚ Wix (website builder):                             â”‚
  â”‚ â†’ Chuyá»ƒn tá»« Gzip â†’ Brotli                          â”‚
  â”‚ â†’ Giáº£m 21-25% file sizes!                         â”‚
  â”‚ â†’ DÃ¹ng Brotli 11 cho static assets!               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  KHUYáº¾N NGHá»Š:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ STATIC (build time):                               â”‚
  â”‚ â†’ Brotli 11 (tá»‘t nháº¥t!) + Gzip 9 (fallback!)     â”‚
  â”‚                                                    â”‚
  â”‚ DYNAMIC (runtime):                                 â”‚
  â”‚ â†’ Brotli 5-6 (balance!) + Gzip 6 (fallback!)     â”‚
  â”‚                                                    â”‚
  â”‚ Táº¡i sao Cáº¢ HAI?                                    â”‚
  â”‚ â†’ 97% browsers: nháº­n Brotli âœ…                    â”‚
  â”‚ â†’ 3% browsers cÅ©: nháº­n Gzip âœ…                    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§9. KÃ­ch Hoáº¡t Compression Trong Thá»±c Táº¿

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CÃCH ENABLE COMPRESSION â€” Tá»ªNG PLATFORM
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â‘  WEBPACK â€” Static Compression (build time):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ // webpack.config.js                               â”‚
  â”‚                                                    â”‚
  â”‚ // Gzip:                                           â”‚
  â”‚ const CompressionPlugin =                          â”‚
  â”‚   require('compression-webpack-plugin');            â”‚
  â”‚                                                    â”‚
  â”‚ module.exports = {                                 â”‚
  â”‚   plugins: [                                       â”‚
  â”‚     new CompressionPlugin({                        â”‚
  â”‚       algorithm: 'gzip',                           â”‚
  â”‚       test: /\.(js|css|html|svg)$/,                â”‚
  â”‚       threshold: 10240, // chá»‰ nÃ©n file > 10KB    â”‚
  â”‚       minRatio: 0.8,    // chá»‰ nÃ©n náº¿u giáº£m 20%+ â”‚
  â”‚     }),                                            â”‚
  â”‚   ],                                               â”‚
  â”‚ };                                                 â”‚
  â”‚                                                    â”‚
  â”‚ // Brotli:                                         â”‚
  â”‚ const BrotliPlugin =                               â”‚
  â”‚   require('brotli-webpack-plugin');                 â”‚
  â”‚                                                    â”‚
  â”‚ module.exports = {                                 â”‚
  â”‚   plugins: [                                       â”‚
  â”‚     new BrotliPlugin({                             â”‚
  â”‚       test: /\.(js|css|html|svg)$/,                â”‚
  â”‚       threshold: 10240,                            â”‚
  â”‚       quality: 11, // max compression!             â”‚
  â”‚     }),                                            â”‚
  â”‚   ],                                               â”‚
  â”‚ };                                                 â”‚
  â”‚                                                    â”‚
  â”‚ OUTPUT:                                            â”‚
  â”‚ dist/                                              â”‚
  â”‚ â”œâ”€â”€ bundle.js           (original)                 â”‚
  â”‚ â”œâ”€â”€ bundle.js.gz        (gzip compressed)          â”‚
  â”‚ â””â”€â”€ bundle.js.br        (brotli compressed)        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â‘¡ NEXT.JS:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â†’ Next.js cÃ³ Gzip Máº¶C Äá»ŠNH!                       â”‚
  â”‚ â†’ NHÆ¯NG recommend: enable á»Ÿ HTTP proxy!            â”‚
  â”‚                                                    â”‚
  â”‚ // next.config.js                                  â”‚
  â”‚ module.exports = {                                 â”‚
  â”‚   compress: true, // default: true!                â”‚
  â”‚ };                                                 â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Vercel platform: Gzip + Brotli tá»± Ä‘á»™ng á»Ÿ proxy! â”‚
  â”‚ â†’ KhÃ´ng cáº§n config thÃªm!                           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â‘¢ NGINX â€” Dynamic + Static:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ # nginx.conf                                       â”‚
  â”‚                                                    â”‚
  â”‚ # Dynamic Gzip:                                    â”‚
  â”‚ gzip on;                                           â”‚
  â”‚ gzip_vary on;                                      â”‚
  â”‚ gzip_proxied any;                                  â”‚
  â”‚ gzip_comp_level 6;                                 â”‚
  â”‚ gzip_types text/plain text/css                     â”‚
  â”‚   application/json application/javascript          â”‚
  â”‚   text/xml text/javascript;                        â”‚
  â”‚                                                    â”‚
  â”‚ # Static Brotli (serve pre-compressed):            â”‚
  â”‚ brotli_static on;  # serve .br files náº¿u cÃ³!      â”‚
  â”‚                                                    â”‚
  â”‚ # Dynamic Brotli:                                  â”‚
  â”‚ brotli on;                                         â”‚
  â”‚ brotli_comp_level 6;                               â”‚
  â”‚ brotli_types text/plain text/css                   â”‚
  â”‚   application/json application/javascript;         â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â‘£ EXPRESS (Node.js) â€” Dynamic:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ const express = require('express');                 â”‚
  â”‚ const compression = require('compression');         â”‚
  â”‚                                                    â”‚
  â”‚ const app = express();                             â”‚
  â”‚ app.use(compression({                              â”‚
  â”‚   level: 6,                                        â”‚
  â”‚   threshold: 1024, // chá»‰ nÃ©n > 1KB               â”‚
  â”‚   filter: (req, res) => {                          â”‚
  â”‚     if (req.headers['x-no-compression']) {         â”‚
  â”‚       return false;                                â”‚
  â”‚     }                                              â”‚
  â”‚     return compression.filter(req, res);           â”‚
  â”‚   },                                               â”‚
  â”‚ }));                                               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§10. Kiá»ƒm Tra (Audit) Compression

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CÃCH KIá»‚M TRA COMPRESSION CÃ“ HOáº T Äá»˜NG?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â‘  CHROME DEVTOOLS â†’ Network tab:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ 1. Má»Ÿ DevTools (F12)                               â”‚
  â”‚ 2. Tab Network                                     â”‚
  â”‚ 3. Reload page                                     â”‚
  â”‚ 4. Click vÃ o file .js                              â”‚
  â”‚ 5. Tab Headers â†’ Response Headers                  â”‚
  â”‚                                                    â”‚
  â”‚ TÃŒM: Content-Encoding: br    (hoáº·c gzip)          â”‚
  â”‚                                                    â”‚
  â”‚ Náº¾U KHÃ”NG CÃ“ Content-Encoding:                     â”‚
  â”‚ â†’ Server KHÃ”NG nÃ©n! âŒ                             â”‚
  â”‚ â†’ Cáº§n enable compression!                          â”‚
  â”‚                                                    â”‚
  â”‚ KIá»‚M TRA SIZE:                                      â”‚
  â”‚ â†’ "Size" column: transferred size (NÃ‰N!)           â”‚
  â”‚ â†’ "Actual Size" / hover: original size              â”‚
  â”‚ â†’ Size < Actual Size = compression Ä‘ang hoáº¡t Ä‘á»™ng! â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â‘¡ LIGHTHOUSE AUDIT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Lighthouse â†’ Performance â†’ "Enable Text Compression"â”‚
  â”‚                                                    â”‚
  â”‚ Lighthouse kiá»ƒm tra:                               â”‚
  â”‚ â†’ Táº¥t cáº£ text resources (JS, CSS, HTML)            â”‚
  â”‚ â†’ Xem cÃ³ Content-Encoding: br/gzip/deflate?        â”‚
  â”‚ â†’ Náº¿u KHÃ”NG CÃ“ â†’ warning + estimated savings!     â”‚
  â”‚                                                    â”‚
  â”‚ Lighthouse dÃ¹ng Gzip Ä‘á»ƒ Æ°á»›c tÃ­nh potential savings! â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â‘¢ COMMAND LINE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ # Kiá»ƒm tra server cÃ³ há»— trá»£ compression:          â”‚
  â”‚ curl -I -H "Accept-Encoding: br,gzip" \            â”‚
  â”‚   https://example.com/bundle.js                     â”‚
  â”‚                                                    â”‚
  â”‚ # TÃ¬m header: Content-Encoding: br                 â”‚
  â”‚ # Náº¿u cÃ³ â†’ compression Ä‘ang hoáº¡t Ä‘á»™ng!             â”‚
  â”‚                                                    â”‚
  â”‚ # So sÃ¡nh size:                                    â”‚
  â”‚ curl -so /dev/null -w '%{size_download}' \          â”‚
  â”‚   -H "Accept-Encoding: identity" URL   # raw       â”‚
  â”‚ curl -so /dev/null -w '%{size_download}' \          â”‚
  â”‚   -H "Accept-Encoding: gzip" URL       # gzip      â”‚
  â”‚ curl -so /dev/null -w '%{size_download}' \          â”‚
  â”‚   -H "Accept-Encoding: br" URL         # brotli    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§11. Thuáº­t Ngá»¯ Bundling â€” Module, Bundle, Chunk

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  THUáº¬T NGá»® QUAN TRá»ŒNG â€” PHáº¢I Náº®M RÃ•!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  MODULE â†’ BUNDLE â†’ CHUNK:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ MODULE (Source code):                              â”‚
  â”‚ â†’ ÄÆ¡n vá»‹ code NHá» NHáº¤T cÃ³ tÃ­nh Ä‘Ã³ng gÃ³i!          â”‚
  â”‚ â†’ 1 file = 1 module (thÆ°á»ng!)                      â”‚
  â”‚ â†’ Cung cáº¥p abstraction + encapsulation!            â”‚
  â”‚                                                    â”‚
  â”‚ src/                                               â”‚
  â”‚ â”œâ”€â”€ utils.js        â† 1 module                     â”‚
  â”‚ â”œâ”€â”€ api.js          â† 1 module                     â”‚
  â”‚ â”œâ”€â”€ components/                                    â”‚
  â”‚ â”‚   â”œâ”€â”€ Header.js   â† 1 module                     â”‚
  â”‚ â”‚   â””â”€â”€ Footer.js   â† 1 module                     â”‚
  â”‚ â””â”€â”€ index.js        â† 1 module (entry!)            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ BUNDLE (Sau bundler xá»­ lÃ½):                        â”‚
  â”‚ â†’ NHÃ“M cÃ¡c modules liÃªn quan!                      â”‚
  â”‚ â†’ ÄÃ£ qua: resolve imports, transform, optimize!    â”‚
  â”‚ â†’ CÃ³ thá»ƒ isolate, publish, cache RIÃŠNG!            â”‚
  â”‚                                                    â”‚
  â”‚ dist/                                              â”‚
  â”‚ â”œâ”€â”€ main.bundle.js    (app code)                   â”‚
  â”‚ â””â”€â”€ vendor.bundle.js  (third-party)                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ CHUNK (Output cuá»‘i cÃ¹ng â€” Webpack term):           â”‚
  â”‚ â†’ Káº¾T QUáº¢ CUá»I CÃ™NG cá»§a bundling + code-split!    â”‚
  â”‚ â†’ ÄÃ¢y lÃ  FILE thá»±c sá»± Ä‘Æ°á»£c DOWNLOAD!               â”‚
  â”‚ â†’ CÃ³ thá»ƒ táº¡o tá»«: entry config, SplitChunksPlugin, â”‚
  â”‚   hoáº·c dynamic import()!                           â”‚
  â”‚                                                    â”‚
  â”‚ dist/                                              â”‚
  â”‚ â”œâ”€â”€ main.a1b2c3.js       (entry chunk)             â”‚
  â”‚ â”œâ”€â”€ vendor.d4e5f6.js     (vendor chunk)            â”‚
  â”‚ â”œâ”€â”€ 123.g7h8i9.js        (async chunk - route A)   â”‚
  â”‚ â””â”€â”€ 456.j0k1l2.js        (async chunk - route B)   â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Má»—i chunk cÃ³ HASH trong tÃªn â†’ cache busting!    â”‚
  â”‚ â†’ Chunk KHÃC nhau = DOWNLOAD RIÃŠNG!               â”‚
  â”‚ â†’ Chunk KHÃ”NG thay Ä‘á»•i = CACHE lÃ¢u dÃ i!           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  SÆ  Äá»’: MODULES â†’ BUNDLER â†’ CHUNKS
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                    â”‚
  â”‚  SOURCE (Modules)         OUTPUT (Chunks)          â”‚
  â”‚                                                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                      â”‚
  â”‚  â”‚ index.js â”‚â”€â”€â”                                   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”œâ”€â”€â”€â†’â”‚ main.js  â”‚ (entry chunk)     â”‚
  â”‚  â”‚ utils.js â”‚â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
  â”‚  â”‚ react    â”‚â”€â”€â”€â”€â”€â”€â†’â”‚vendor.js â”‚ (vendor chunk)    â”‚
  â”‚  â”‚ lodash   â”‚â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
  â”‚  â”‚ PageA.js â”‚â”€â”€â”€â”€â”€â”€â†’â”‚  123.js  â”‚ (async chunk)     â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                   â”‚
  â”‚  â”‚ PageB.js â”‚â”€â”€â”€â”€â”€â”€â†’â”‚  456.js  â”‚ (async chunk)     â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
  â”‚                                                    â”‚
  â”‚  BUNDLER (Webpack) thá»±c hiá»‡n:                      â”‚
  â”‚  â†’ Resolve dependencies                            â”‚
  â”‚  â†’ Tree-shake dead code                            â”‚
  â”‚  â†’ Split into chunks                               â”‚
  â”‚  â†’ Minify + optimize                               â”‚
  â”‚  â†’ Generate hashed filenames                       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  OUTPUT SIZE vs LOADING GRANULARITY:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Output size = kÃ­ch thÆ°á»›c Cá»¦A chunks (sau optimize) â”‚
  â”‚ Loading granularity = Sá» LÆ¯á»¢NG chunks!             â”‚
  â”‚                                                    â”‚
  â”‚ Ãt chunks (granularity THáº¤P):                      â”‚
  â”‚ â†’ 2-3 chunks lá»›n                                   â”‚
  â”‚ â†’ Compress Tá»T hÆ¡n!                               â”‚
  â”‚ â†’ Cache KÃ‰MHÆ N! (thay Ä‘á»•i 1 dÃ²ng â†’ reload cáº£!)   â”‚
  â”‚                                                    â”‚
  â”‚ Nhiá»u chunks (granularity CAO):                    â”‚
  â”‚ â†’ 50-100 chunks nhá»                                â”‚
  â”‚ â†’ Compress KÃ‰M hÆ¡n!                               â”‚
  â”‚ â†’ Cache Tá»T hÆ¡n! (chá»‰ reload chunk bá»‹ thay Ä‘á»•i!) â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§12. Loading Granularity â€” Äá»™ Chi Tiáº¿t Táº£i Code

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  LOADING GRANULARITY = BAO NHIÃŠU CHUNKS?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Äá»˜ CHI TIáº¾T (granularity) áº£nh hÆ°á»Ÿng 3 Má»¤C TIÃŠU:

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Má»¤C TIÃŠU 1: DOWNLOAD NHANH (compression!)         â”‚
  â”‚                                                    â”‚
  â”‚ CÃ”NG THá»¨C QUAN TRá»ŒNG:                              â”‚
  â”‚                                                    â”‚
  â”‚   compress(a + b) <= compress(a) + compress(b)     â”‚
  â”‚                                                    â”‚
  â”‚ â†’ NÃ©n 1 file Lá»šN = Káº¾T QUáº¢ NHá» HÆ N               â”‚
  â”‚   so vá»›i nÃ©n NHIá»€U file nhá» cÃ¹ng ná»™i dung!        â”‚
  â”‚                                                    â”‚
  â”‚ Táº I SAO?                                           â”‚
  â”‚ â†’ Gzip/Brotli tÃ¬m PATTERNS Láº¶P Láº I!              â”‚
  â”‚ â†’ File lá»›n cÃ³ NHIá»€U patterns hÆ¡n!                  â”‚
  â”‚ â†’ Patterns láº·p á»Ÿ XA váº«n tÃ¬m Ä‘Æ°á»£c!                â”‚
  â”‚ â†’ File nhá»: Ã­t dá»¯ liá»‡u â†’ Ã­t patterns!            â”‚
  â”‚                                                    â”‚
  â”‚ VÃ Dá»¤:                                            â”‚
  â”‚ â†’ 1 file 200KB â†’ Gzip â†’ 50KB                      â”‚
  â”‚ â†’ 10 file Ã— 20KB â†’ Gzip â†’ 10 Ã— 6KB = 60KB        â”‚
  â”‚ â†’ Tá»•ng cÃ¹ng code: 50KB < 60KB!                    â”‚
  â”‚ â†’ Máº¥t ~5-10% cho small chunks!                    â”‚
  â”‚ â†’ Extreme case (unbundled): máº¥t 20%!              â”‚
  â”‚                                                    â”‚
  â”‚ NGOÃ€I RA â€” chi phÃ­ INFRASTRUCTURE má»—i chunk:       â”‚
  â”‚ â†’ IPC (Inter-Process Communication) overhead       â”‚
  â”‚ â†’ I/O overhead (Ä‘á»c/ghi file)                     â”‚
  â”‚ â†’ Processing overhead (má»—i <script> tag!)          â”‚
  â”‚ â†’ V8 streaming threshold: 30KB!                    â”‚
  â”‚   â†’ Chunks < 30KB: parse ON critical path!        â”‚
  â”‚   â†’ Chunks >= 30KB: V8 stream parse (nhanh hÆ¡n!)  â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Káº¿t luáº­n: chunks Lá»šN HÆ N â†’ download Tá»T HÆ N!  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Má»¤C TIÃŠU 2: CACHE HIá»†U QUáº¢                        â”‚
  â”‚                                                    â”‚
  â”‚ CHUNKS NHá» = CACHE Tá»T HÆ N!                       â”‚
  â”‚                                                    â”‚
  â”‚ VÃ Dá»¤: App cÃ³ 3 thÆ° viá»‡n: React, Lodash, Axios    â”‚
  â”‚                                                    â”‚
  â”‚ CÃ¡ch 1 â€” 1 vendor chunk:                           â”‚
  â”‚ vendor.js = React + Lodash + Axios = 150KB         â”‚
  â”‚ â†’ Báº¡n update Axios 1.0 â†’ 1.1                      â”‚
  â”‚ â†’ TOÃ€N Bá»˜ vendor.js pháº£i táº£i láº¡i! 150KB! âŒ      â”‚
  â”‚                                                    â”‚
  â”‚ CÃ¡ch 2 â€” 3 vendor chunks:                          â”‚
  â”‚ react.js = 40KB (cache hit! âœ…)                    â”‚
  â”‚ lodash.js = 70KB (cache hit! âœ…)                   â”‚
  â”‚ axios.js = 40KB (cache miss â†’ táº£i láº¡i!)            â”‚
  â”‚ â†’ Chá»‰ táº£i láº¡i 40KB thay vÃ¬ 150KB! ğŸš€             â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Chunks NHá» â†’ thay Ä‘á»•i ÃT chunks â†’ cache Tá»T!  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Má»¤C TIÃŠU 3: EXECUTE NHANH                          â”‚
  â”‚                                                    â”‚
  â”‚ â‘  Dependencies sáºµn sÃ ng:                           â”‚
  â”‚   â†’ Bundle liÃªn quan â†’ 1 chunk Lá»šN â†’ táº¥t cáº£ sáºµn! â”‚
  â”‚   â†’ Chia nhiá»u chunks â†’ pháº£i chá» download + parse! â”‚
  â”‚                                                    â”‚
  â”‚ â‘¡ KhÃ´ng download code thá»«a:                        â”‚
  â”‚   â†’ Commons chunk chá»©a code CHUNG cho nhiá»u pages  â”‚
  â”‚   â†’ NhÆ°ng page A chá»‰ cáº§n 60% commons chunk!       â”‚
  â”‚   â†’ 40% THá»ªA váº«n pháº£i download + parse!           â”‚
  â”‚   â†’ Chunks NHá» hÆ¡n â†’ Ã­t code thá»«a hÆ¡n!            â”‚
  â”‚                                                    â”‚
  â”‚ â‘¢ TrÃ¡nh Long Tasks:                                â”‚
  â”‚   â†’ 1 chunk 500KB â†’ parse 200ms â†’ BLOCK main thread!â”‚
  â”‚   â†’ Web Vital: Long Task > 50ms = Tá»†!             â”‚
  â”‚   â†’ Chunks nhá» hÆ¡n â†’ parse nhanh hÆ¡n â†’ khÃ´ng block!â”‚
  â”‚                                                    â”‚
  â”‚ â†’ MÃ¢u thuáº«n: â‘  muá»‘n Lá»šN, â‘¡â‘¢ muá»‘n NHá»!           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§13. Granularity Trade-off â€” BÃ i ToÃ¡n ÄÃ¡nh Äá»•i

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  TAM GIÃC ÄÃNH Äá»”I â€” KHÃ”NG THá»‚ Tá»I Æ¯U Cáº¢ 3!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  SÆ  Äá»’ TAM GIÃC:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                    â”‚
  â”‚              DOWNLOAD NHANH                        â”‚
  â”‚              (Compression)                         â”‚
  â”‚                  â–³                                 â”‚
  â”‚                 /  \                                â”‚
  â”‚                /    \                               â”‚
  â”‚               / TRADE \                             â”‚
  â”‚              /  -OFF!  \                            â”‚
  â”‚             /    ğŸ”º     \                           â”‚
  â”‚            /              \                         â”‚
  â”‚           â—â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–·                       â”‚
  â”‚     CACHE Tá»T           EXECUTE NHANH             â”‚
  â”‚   (De-duplication)     (Ãt code thá»«a)              â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Tá»‘i Æ°u 1 gÃ³c = GIáº¢M 2 gÃ³c cÃ²n láº¡i!             â”‚
  â”‚                                                    â”‚
  â”‚ Download nhanh â†’ chunks Lá»šN â†’ cache KÃ‰M!          â”‚
  â”‚ Cache tá»‘t â†’ chunks NHá» â†’ compress KÃ‰M!            â”‚
  â”‚ Execute nhanh â†’ CHá»ˆ code cáº§n â†’ nhiá»u chunks NHá»!  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  CORE CONFLICT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                    â”‚
  â”‚  "De-duplication vÃ  Caching                        â”‚
  â”‚   MÃ‚U THUáºªN vá»›i                                    â”‚
  â”‚   Browser Performance vÃ  Compression"              â”‚
  â”‚                                                    â”‚
  â”‚ De-duplication + Caching â†’ muá»‘n NHIá»€U chunks NHá»! â”‚
  â”‚ Performance + Compression â†’ muá»‘n ÃT chunks Lá»šN!   â”‚
  â”‚                                                    â”‚
  â”‚ â†’ ÄÃ¢y lÃ  GRANULARITY TRADE-OFF!                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  THá»°C Táº¾: Apps production dÃ¹ng bao nhiÃªu chunks?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â†’ Háº§u háº¿t: ~10 chunks                             â”‚
  â”‚ â†’ ÄÃ£ lÃ  COMPROMISE giá»¯a 3 má»¥c tiÃªu!              â”‚
  â”‚                                                    â”‚
  â”‚ â†’ NHÆ¯NG 10 chunks KHÃ”NG Äá»¦ cho apps lá»›n!          â”‚
  â”‚ â†’ Apps lá»›n cáº§n: caching tá»‘t hÆ¡n!                  â”‚
  â”‚ â†’ Cáº§n TÄ‚NG chunks â†’ 40-100!                       â”‚
  â”‚ â†’ NhÆ°ng browser overhead > 50 chunks â†’ CHáº¬M!      â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Giáº£i phÃ¡p? GRANULAR CHUNKING!                   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  VÃ Dá»¤: 50-100 CHUNKS â†’ Váº¤N Äá»€ BROWSER:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ 50-100 chunks táº£i cÃ¹ng lÃºc â†’ browser pháº£i:        â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Má»Ÿ 50-100 HTTP connections (HTTP/2 multiplex!)   â”‚
  â”‚ â†’ 50-100 cache lookups!                           â”‚
  â”‚ â†’ 50-100 <script> tags â†’ 50-100 parse tasks!      â”‚
  â”‚ â†’ IPC cho má»—i chunk! (browser process â†’ renderer)  â”‚
  â”‚ â†’ I/O cho má»—i chunk! (disk/network)                â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Tá»•ng overhead ÄÃNG Ká»‚!                          â”‚
  â”‚ â†’ Äáº·c biá»‡t trÃªn mobile/low-end devices!           â”‚
  â”‚                                                    â”‚
  â”‚ V8 Engine 30KB threshold:                          â”‚
  â”‚ â†’ Chunks >= 30KB: V8 stream-parse (off main thread)â”‚
  â”‚ â†’ Chunks < 30KB: parse ON main thread (blocking!) â”‚
  â”‚ â†’ 50 chunks Ã— 15KB má»—i chunk = Táº¤T Cáº¢ parse      â”‚
  â”‚   trÃªn main thread = CHáº¬M!                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§14. SplitChunksPlugin & Granular Chunking

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  GIáº¢I PHÃP: WEBPACK SplitChunksPlugin + GRANULAR CHUNKING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Lá»ŠCH Sá»¬ WEBPACK CHUNKING:

  Webpack v3 â€” CommonsChunkPlugin (CÅ¨):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ // webpack.config.js (v3)                          â”‚
  â”‚ new webpack.optimize.CommonsChunkPlugin({           â”‚
  â”‚   name: 'commons',                                 â”‚
  â”‚   minChunks: 2, // module dÃ¹ng >= 2 routes         â”‚
  â”‚ });                                                â”‚
  â”‚                                                    â”‚
  â”‚ Váº¤N Äá»€:                                           â”‚
  â”‚ â†’ Táº¤T Cáº¢ shared modules â†’ 1 commons chunk!        â”‚
  â”‚ â†’ Page A cáº§n 30% commons, page B cáº§n 70%!          â”‚
  â”‚ â†’ Page A pháº£i táº£i 100% commons = 70% thá»«a! âŒ     â”‚
  â”‚ â†’ Download + parse code KHÃ”NG Cáº¦N!                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Webpack v4+ â€” SplitChunksPlugin (Má»šI):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ // webpack.config.js (v4+)                         â”‚
  â”‚ module.exports = {                                 â”‚
  â”‚   optimization: {                                  â”‚
  â”‚     splitChunks: {                                 â”‚
  â”‚       chunks: 'all',                               â”‚
  â”‚       maxInitialRequests: 25,                      â”‚
  â”‚       minSize: 20000, // 20KB minimum!             â”‚
  â”‚       cacheGroups: {                               â”‚
  â”‚         vendor: {                                  â”‚
  â”‚           test: /[\\/]node_modules[\\/]/,           â”‚
  â”‚           name(module) {                           â”‚
  â”‚             // TÃ¡ch Tá»ªNG package!                   â”‚
  â”‚             const name = module.context.match(      â”‚
  â”‚               /[\\/]node_modules[\\/](.*?)([\\/]|$)/â”‚
  â”‚             )[1];                                   â”‚
  â”‚             return `vendor.${name}`;                â”‚
  â”‚           },                                       â”‚
  â”‚         },                                         â”‚
  â”‚       },                                           â”‚
  â”‚     },                                             â”‚
  â”‚   },                                               â”‚
  â”‚ };                                                 â”‚
  â”‚                                                    â”‚
  â”‚ OUTPUT:                                            â”‚
  â”‚ â†’ vendor.react.js       (40KB - cache lÃ¢u!)        â”‚
  â”‚ â†’ vendor.lodash.js      (70KB - cache lÃ¢u!)        â”‚
  â”‚ â†’ vendor.axios.js       (15KB - cache lÃ¢u!)        â”‚
  â”‚ â†’ shared.utils.ab12.js  (25KB - shared code)       â”‚
  â”‚ â†’ page-home.cd34.js     (30KB - home route)        â”‚
  â”‚ â†’ page-about.ef56.js    (20KB - about route)       â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Thay Ä‘á»•i axios â†’ CHá»ˆ táº£i láº¡i vendor.axios.js!   â”‚
  â”‚ â†’ CÃ¡c chunks khÃ¡c = CACHE HIT! âœ…                 â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  NEXT.JS GRANULAR CHUNKING STRATEGY:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Next.js implement 4 RULES:                         â”‚
  â”‚                                                    â”‚
  â”‚ â‘  Third-party >= 160KB â†’ TÃCH RIÃŠNG!              â”‚
  â”‚   â†’ react, react-dom â†’ riÃªng!                      â”‚
  â”‚   â†’ lodash â†’ riÃªng!                                â”‚
  â”‚   â†’ Ãt thay Ä‘á»•i â†’ cache LÃ‚U!                      â”‚
  â”‚                                                    â”‚
  â”‚ â‘¡ Framework chunk RIÃŠNG:                           â”‚
  â”‚   â†’ react + react-dom + scheduler = framework.js   â”‚
  â”‚   â†’ KHÃ”NG trá»™n vá»›i app code!                       â”‚
  â”‚   â†’ Framework cá»±c ká»³ á»•n Ä‘á»‹nh â†’ cache years!       â”‚
  â”‚                                                    â”‚
  â”‚ â‘¢ Shared chunks Tá»I ÄA 25:                        â”‚
  â”‚   â†’ Táº¡o shared chunks cho modules dÃ¹ng chung      â”‚
  â”‚   â†’ Giá»›i háº¡n 25 â†’ khÃ´ng quÃ¡ nhiá»u requests!       â”‚
  â”‚   â†’ Balance giá»¯a de-dup vÃ  request count!          â”‚
  â”‚                                                    â”‚
  â”‚ â‘£ Minimum chunk size = 20KB:                       â”‚
  â”‚   â†’ Chunks < 20KB â†’ merge láº¡i!                    â”‚
  â”‚   â†’ Äáº£m báº£o compression HIá»†U QUáº¢!                â”‚
  â”‚   â†’ V8 parse threshold = 30KB                      â”‚
  â”‚   â†’ 20KB lÃ  tradeoff: nhá» hÆ¡n 1 chÃºt nhÆ°ng OKcho â”‚
  â”‚     caching granularity!                            â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Káº¾T QUáº¢ THá»°C Táº¾:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ Next.js apps sau granular chunking:                â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Giáº£m total JS trÃªn má»—i page!                    â”‚
  â”‚ â†’ Cache hit rate TÄ‚NG Ä‘Ã¡ng ká»ƒ!                    â”‚
  â”‚ â†’ Repeat visits: load NHANH hÆ¡n 30-50%!           â”‚
  â”‚                                                    â”‚
  â”‚ Gatsby cÅ©ng implement tÆ°Æ¡ng tá»± â†’ similar benefits! â”‚
  â”‚                                                    â”‚
  â”‚ TRÆ¯á»šC GRANULAR CHUNKING:                           â”‚
  â”‚ commons.js = 200KB (chá»©a code KHÃ”NG Cáº¦N!)         â”‚
  â”‚ â†’ Má»—i page táº£i 200KB dÃ¹ chá»‰ cáº§n 50KB!           â”‚
  â”‚                                                    â”‚
  â”‚ SAU GRANULAR CHUNKING:                             â”‚
  â”‚ shared-1.js = 25KB âœ…                              â”‚
  â”‚ shared-2.js = 30KB âœ…                              â”‚
  â”‚ shared-3.js = 20KB âœ…                              â”‚
  â”‚ â†’ Má»—i page CHá»ˆ táº£i chunks nÃ³ Cáº¦N! ~50-75KB!     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  SÆ  Äá»’ SO SÃNH:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                    â”‚
  â”‚ TRÆ¯á»šC (CommonsChunkPlugin):                        â”‚
  â”‚                                                    â”‚
  â”‚ Page A â†â”€â”€ commons.js (200KB) â”€â”€â†’ Page B           â”‚
  â”‚   â†“              â†“                  â†“              â”‚
  â”‚ Cáº§n 50KB    Táº£i 200KB!         Cáº§n 150KB           â”‚
  â”‚ Thá»«a 150KB! âŒ                 Thá»«a 50KB!         â”‚
  â”‚                                                    â”‚
  â”‚ SAU (SplitChunksPlugin + Granular):                â”‚
  â”‚                                                    â”‚
  â”‚ Page A â†â”€â”€ shared-1.js (25KB)                      â”‚
  â”‚       â†â”€â”€ shared-2.js (30KB)                       â”‚
  â”‚       = 55KB (gáº§n exact!) âœ…                       â”‚
  â”‚                                                    â”‚
  â”‚ Page B â†â”€â”€ shared-1.js (25KB) (CACHE HIT!)         â”‚
  â”‚       â†â”€â”€ shared-2.js (30KB) (CACHE HIT!)          â”‚
  â”‚       â†â”€â”€ shared-3.js (20KB)                       â”‚
  â”‚       â†â”€â”€ shared-4.js (25KB)                       â”‚
  â”‚       â†â”€â”€ vendor.lib.js (50KB)                     â”‚
  â”‚       = 150KB (exact!) âœ…                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§15. Tá»± Viáº¿t Tay: Minifier ÄÆ¡n Giáº£n

```javascript
/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *  Tá»° VIáº¾T TAY: JavaScript Minifier â€” KHÃ”NG dÃ¹ng thÆ° viá»‡n!
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 *  Minifier thá»±c hiá»‡n 5 bÆ°á»›c:
 *  â‘  XÃ³a comments (single-line + multi-line)
 *  â‘¡ XÃ³a whitespace thá»«a
 *  â‘¢ XÃ³a newlines thá»«a
 *  â‘£ RÃºt gá»n tÃªn biáº¿n (mangling) â€” phiÃªn báº£n Ä‘Æ¡n giáº£n
 *  â‘¤ Tá»‘i Æ°u boolean expressions
 *
 *  LÆ¯U Ã: ÄÃ¢y lÃ  Minifier ÄÆ N GIáº¢N (educational)!
 *  Production dÃ¹ng Terser/esbuild (xÃ¢y trÃªn AST - chÃ­nh xÃ¡c hÆ¡n!)
 *  Minifier nÃ y dÃ¹ng REGEX â†’ cÃ³ edge cases!
 */

// â•â•â• BÆ¯á»šC 1: XÃ³a Comments â•â•â•
function removeComments(code) {
  let result = "";
  let i = 0;
  let inString = false; // Äang trong string literal?
  let stringChar = ""; // KÃ½ tá»± má»Ÿ string (' hoáº·c ")

  while (i < code.length) {
    // Kiá»ƒm tra string literal (khÃ´ng xÃ³a // trong string!)
    if (!inString && (code[i] === "'" || code[i] === '"' || code[i] === "`")) {
      inString = true;
      stringChar = code[i];
      result += code[i];
      i++;
      continue;
    }

    if (inString && code[i] === stringChar && code[i - 1] !== "\\") {
      inString = false;
      result += code[i];
      i++;
      continue;
    }

    if (inString) {
      result += code[i];
      i++;
      continue;
    }

    // Single-line comment: // ...
    if (code[i] === "/" && code[i + 1] === "/") {
      // Skip Ä‘áº¿n háº¿t dÃ²ng!
      while (i < code.length && code[i] !== "\n") {
        i++;
      }
      continue;
    }

    // Multi-line comment: /* ... */
    if (code[i] === "/" && code[i + 1] === "*") {
      i += 2; // skip /*
      while (i < code.length) {
        if (code[i] === "*" && code[i + 1] === "/") {
          i += 2; // skip */
          break;
        }
        i++;
      }
      continue;
    }

    result += code[i];
    i++;
  }

  return result;
}

// â•â•â• BÆ¯á»šC 2: XÃ³a Whitespace Thá»«a â•â•â•
function removeExtraWhitespace(code) {
  // Thay nhiá»u spaces/tabs liÃªn tiáº¿p â†’ 1 space
  let result = code.replace(/[ \t]+/g, " ");

  // XÃ³a space TRÆ¯á»šC cÃ¡c kÃ½ tá»± Ä‘áº·c biá»‡t
  result = result.replace(/ ([{}\[\]();,=+\-*/<>!&|?:])/g, "$1");

  // XÃ³a space SAU cÃ¡c kÃ½ tá»± Ä‘áº·c biá»‡t
  result = result.replace(/([{}\[\]();,=+\-*/<>!&|?:]) /g, "$1");

  // NHÆ¯NG giá»¯ space giá»¯a keywords vÃ  identifiers!
  // "return result" KHÃ”NG Ä‘Æ°á»£c thÃ nh "returnresult"!
  // "var name" KHÃ”NG Ä‘Æ°á»£c thÃ nh "varname"!
  const keywords = [
    "var",
    "let",
    "const",
    "function",
    "return",
    "if",
    "else",
    "for",
    "while",
    "do",
    "switch",
    "case",
    "break",
    "continue",
    "new",
    "delete",
    "typeof",
    "instanceof",
    "in",
    "of",
    "class",
    "extends",
    "import",
    "export",
    "default",
    "from",
    "async",
    "await",
    "yield",
    "throw",
    "try",
    "catch",
    "finally",
  ];

  for (const kw of keywords) {
    // Äáº£m báº£o keyword cÃ³ space SAU nÃ³ náº¿u tiáº¿p theo lÃ  identifier
    const regex = new RegExp(`\\b${kw}([a-zA-Z_$])`, "g");
    result = result.replace(regex, `${kw} $1`);
  }

  return result;
}

// â•â•â• BÆ¯á»šC 3: XÃ³a Newlines Thá»«a â•â•â•
function removeExtraNewlines(code) {
  // Thay nhiá»u newlines liÃªn tiáº¿p â†’ 1 newline
  let result = code.replace(/\n+/g, "\n");

  // XÃ³a newline SAU { vÃ  TRÆ¯á»šC }
  result = result.replace(/\{\n/g, "{");
  result = result.replace(/\n\}/g, "}");

  // XÃ³a newline SAU ; vÃ  ,
  result = result.replace(/;\n/g, ";");
  result = result.replace(/,\n/g, ",");

  // XÃ³a leading/trailing whitespace má»—i dÃ²ng
  result = result.replace(/^\s+/gm, "");
  result = result.replace(/\s+$/gm, "");

  // XÃ³a newlines cÃ²n láº¡i (ná»‘i thÃ nh 1 dÃ²ng!)
  result = result.replace(/\n/g, "");

  return result;
}

// â•â•â• BÆ¯á»šC 4: RÃºt Gá»n TÃªn Biáº¿n (Mangling) â•â•â•
function mangleVariableNames(code) {
  /**
   * ÄÃ‚Y LÃ€ PHIÃŠN Báº¢N ÄÆ N GIáº¢N!
   * Production mangler cáº§n AST Ä‘á»ƒ:
   * â†’ Hiá»ƒu SCOPE (biáº¿n nÃ o thuá»™c scope nÃ o)
   * â†’ TrÃ¡nh conflict (2 biáº¿n khÃ¡c scope â†’ cÃ¹ng tÃªn OK)
   * â†’ Giá»¯ nguyÃªn global/export names
   *
   * PhiÃªn báº£n nÃ y: regex-based, CHá»ˆ rename
   * local variables declared vá»›i let/const/var!
   */
  const varNames = new Map(); // oldName â†’ newName
  let counter = 0;

  // Táº¡o tÃªn ngáº¯n: a, b, c, ..., z, aa, ab, ...
  function generateShortName() {
    let name = "";
    let n = counter++;
    do {
      name = String.fromCharCode(97 + (n % 26)) + name;
      n = Math.floor(n / 26) - 1;
    } while (n >= 0);
    return name;
  }

  // TÃ¬m táº¥t cáº£ variable declarations
  const varRegex = /\b(var|let|const)\s+([a-zA-Z_$][a-zA-Z0-9_$]*)/g;
  let match;

  while ((match = varRegex.exec(code)) !== null) {
    const originalName = match[2];
    if (!varNames.has(originalName) && originalName.length > 1) {
      varNames.set(originalName, generateShortName());
    }
  }

  // Replace táº¥t cáº£ occurrences
  let result = code;
  for (const [original, short] of varNames) {
    const regex = new RegExp(`\\b${original}\\b`, "g");
    result = result.replace(regex, short);
  }

  return result;
}

// â•â•â• BÆ¯á»šC 5: Tá»‘i Æ¯u Boolean â•â•â•
function optimizeBooleans(code) {
  let result = code;

  // === true â†’ (bá»!)
  result = result.replace(/===true/g, "");
  result = result.replace(/!==true/g, "===false");

  // === false â†’ !
  result = result.replace(/===false/g, ""); // simplified

  // !0 = true, !1 = false (JS trick!)
  result = result.replace(/\btrue\b/g, "!0");
  result = result.replace(/\bfalse\b/g, "!1");

  return result;
}

// â•â•â• PIPELINE: Cháº¡y táº¥t cáº£ bÆ°á»›c â•â•â•
function minify(code) {
  let result = code;

  console.log("ğŸ“¥ Input size:", code.length, "bytes");

  // BÆ°á»›c 1: XÃ³a comments
  result = removeComments(result);
  console.log("  â‘  Sau xÃ³a comments:", result.length, "bytes");

  // BÆ°á»›c 2: XÃ³a whitespace thá»«a
  result = removeExtraWhitespace(result);
  console.log("  â‘¡ Sau xÃ³a whitespace:", result.length, "bytes");

  // BÆ°á»›c 3: XÃ³a newlines thá»«a
  result = removeExtraNewlines(result);
  console.log("  â‘¢ Sau xÃ³a newlines:", result.length, "bytes");

  // BÆ°á»›c 4: Mangle variable names
  result = mangleVariableNames(result);
  console.log("  â‘£ Sau mangle:", result.length, "bytes");

  // BÆ°á»›c 5: Optimize booleans
  result = optimizeBooleans(result);
  console.log("  â‘¤ Sau optimize:", result.length, "bytes");

  const savings = ((1 - result.length / code.length) * 100).toFixed(1);
  console.log(`ğŸ“¤ Output size: ${result.length} bytes (giáº£m ${savings}%!)`);

  return result;
}

// â•â•â• TEST â•â•â•
const testCode = `
// HÃ m tÃ­nh tá»•ng 2 sá»‘
function calculateSum(firstNumber, secondNumber) {
  // Cá»™ng 2 sá»‘ láº¡i
  const result = firstNumber + secondNumber;

  /* Tráº£ vá» káº¿t quáº£
     cho caller */
  return result;
}

// Kiá»ƒm tra sá»‘ dÆ°Æ¡ng
function isPositiveNumber(value) {
  if (value > 0 === true) {
    return true;
  }
  return false;
}
`;

console.log("=== Káº¾T QUáº¢ MINIFY ===");
const minified = minify(testCode);
console.log("\nOutput:", minified);

/*
 * Káº¾T QUáº¢ MONG Äá»¢I:
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ ğŸ“¥ Input size: ~350 bytes                          â”‚
 * â”‚   â‘  Sau xÃ³a comments: ~250 bytes                  â”‚
 * â”‚   â‘¡ Sau xÃ³a whitespace: ~200 bytes                â”‚
 * â”‚   â‘¢ Sau xÃ³a newlines: ~180 bytes                  â”‚
 * â”‚   â‘£ Sau mangle: ~120 bytes                        â”‚
 * â”‚   â‘¤ Sau optimize: ~110 bytes                      â”‚
 * â”‚ ğŸ“¤ Output: ~110 bytes (giáº£m ~68%!)                â”‚
 * â”‚                                                    â”‚
 * â”‚ âš ï¸ Terser sáº½ nÃ©n Tá»T HÆ N vÃ¬ dÃ¹ng AST!          â”‚
 * â”‚ â†’ Hiá»ƒu scope â†’ mangle CHÃNH XÃC hÆ¡n!             â”‚
 * â”‚ â†’ Inline expressions â†’ tá»‘i Æ°u logic!              â”‚
 * â”‚ â†’ Dead code elimination hoÃ n chá»‰nh!               â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */
```

---

## Â§16. Tá»± Viáº¿t Tay: Thuáº­t ToÃ¡n LZ77

```javascript
/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *  Tá»° VIáº¾T TAY: LZ77 Compression â€” KHÃ”NG dÃ¹ng thÆ° viá»‡n!
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 *  LZ77 (Lempel-Ziv 1977):
 *  â†’ TÃ¬m chuá»—i ÄÃƒ XUáº¤T HIá»†N trÆ°á»›c Ä‘Ã³!
 *  â†’ Thay báº±ng BACKREFERENCE: (distance, length)!
 *  â†’ Ná»n táº£ng cá»§a DEFLATE (Gzip) vÃ  Brotli!
 *
 *  SLIDING WINDOW:
 *  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *  â”‚    Search Buffer        â”‚  Look-ahead   â”‚
 *  â”‚  (Ä‘Ã£ xá»­ lÃ½ â€” tÃ¬m match)â”‚ (chÆ°a xá»­ lÃ½) â”‚
 *  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *  â—„â”€â”€ windowSize (32KB trong Gzip) â”€â”€â–º
 */

class LZ77 {
  constructor(windowSize = 4096, lookAheadSize = 18) {
    this.windowSize = windowSize; // KÃ­ch thÆ°á»›c search buffer
    this.lookAheadSize = lookAheadSize; // KÃ­ch thÆ°á»›c look-ahead buffer
  }

  // â•â•â• ENCODE (NÃ‰N) â•â•â•
  encode(input) {
    const tokens = []; // Káº¿t quáº£: máº£ng tokens
    let position = 0; // Vá»‹ trÃ­ hiá»‡n táº¡i trong input

    while (position < input.length) {
      let bestDistance = 0; // Khoáº£ng cÃ¡ch Ä‘áº¿n match tá»‘t nháº¥t
      let bestLength = 0; // Äá»™ dÃ i match tá»‘t nháº¥t

      // XÃ¡c Ä‘á»‹nh pháº¡m vi search buffer
      const searchStart = Math.max(0, position - this.windowSize);

      // XÃ¡c Ä‘á»‹nh pháº¡m vi look-ahead buffer
      const lookAheadEnd = Math.min(
        position + this.lookAheadSize,
        input.length,
      );

      // TÃ¬m match DÃ€I NHáº¤T trong search buffer!
      for (let i = searchStart; i < position; i++) {
        let matchLength = 0;

        // So sÃ¡nh tá»«ng kÃ½ tá»±
        while (
          position + matchLength < lookAheadEnd &&
          input[i + matchLength] === input[position + matchLength]
        ) {
          matchLength++;

          /**
           * QUAN TRá»ŒNG: i + matchLength CÃ“ THá»‚ >= position!
           * â†’ ÄÃ¢y lÃ  "match vÆ°á»£t qua position"!
           * â†’ VÃ Dá»¤: "ABCABCABC" táº¡i position 3:
           *   - i=0, position=3
           *   - match 'A','B','C','A','B','C' (láº·p láº¡i!)
           *   - matchLength = 6 (> position - i = 3!)
           *
           * â†’ ÄÃ¢y lÃ  LÃ DO LZ77 Máº NH:
           *   CÃ³ thá»ƒ encode patterns láº·p NGáº®N â†’ chuá»—i DÃ€I!
           */
        }

        // Cáº­p nháº­t match tá»‘t nháº¥t
        if (matchLength > bestLength) {
          bestLength = matchLength;
          bestDistance = position - i;
        }
      }

      if (bestLength >= 3) {
        /**
         * MATCH TÃŒM THáº¤Y!
         * â†’ Output backreference: (distance, length)
         *
         * Táº I SAO >= 3?
         * â†’ Backreference = (distance, length) cáº§n ~2-3 bytes
         * â†’ Match length 1-2: backreference CÃ’N Lá»šN HÆ N literal!
         * â†’ Match length >= 3: backreference TIáº¾T KIá»†M hÆ¡n!
         *
         * Gzip cÅ©ng dÃ¹ng minimum match = 3!
         */
        tokens.push({
          type: "match",
          distance: bestDistance,
          length: bestLength,
        });
        position += bestLength;
      } else {
        /**
         * KHÃ”NG TÃŒM THáº¤Y match Ä‘á»§ dÃ i!
         * â†’ Output literal (kÃ½ tá»± gá»‘c)
         */
        tokens.push({
          type: "literal",
          value: input[position],
        });
        position++;
      }
    }

    return tokens;
  }

  // â•â•â• DECODE (GIáº¢I NÃ‰N) â•â•â•
  decode(tokens) {
    let output = "";

    for (const token of tokens) {
      if (token.type === "literal") {
        // Literal: thÃªm kÃ½ tá»± gá»‘c!
        output += token.value;
      } else {
        // Backreference: copy tá»« vá»‹ trÃ­ trÆ°á»›c Ä‘Ã³!
        const start = output.length - token.distance;

        for (let i = 0; i < token.length; i++) {
          /**
           * QUAN TRá»ŒNG: dÃ¹ng output[start + i]
           * CHá»¨ KHÃ”NG pháº£i substring!
           *
           * VÃŒ: match cÃ³ thá»ƒ Vá»†T QUA start position!
           * VD: start=0, length=6, output="ABC"
           * â†’ i=0: output[0]='A' â†’ output="ABCA"
           * â†’ i=1: output[1]='B' â†’ output="ABCAB"
           * â†’ i=2: output[2]='C' â†’ output="ABCABC"
           * â†’ i=3: output[3]='A' â†’ output="ABCABCA"
           * ...
           * â†’ ÄÃºng! Copy "trÃ n" = láº·p láº¡i pattern!
           */
          output += output[start + i];
        }
      }
    }

    return output;
  }
}

// â•â•â• VISUALIZATION HELPER â•â•â•
function visualizeLZ77(input, tokens) {
  console.log("â•â•â• LZ77 ENCODING VISUALIZATION â•â•â•");
  console.log(`Input: "${input}" (${input.length} chars)\n`);

  let position = 0;
  for (let i = 0; i < tokens.length; i++) {
    const token = tokens[i];
    if (token.type === "literal") {
      console.log(
        `  Token ${i}: LITERAL '${token.value}'` + `  (pos ${position})`,
      );
      position++;
    } else {
      const matchedStr = input.substr(position, token.length);
      console.log(
        `  Token ${i}: MATCH (d=${token.distance}, l=${token.length})` +
          `  â†’ "${matchedStr}"  (pos ${position})` +
          `  [copy tá»« pos ${position - token.distance}]`,
      );
      position += token.length;
    }
  }

  const literalCount = tokens.filter((t) => t.type === "literal").length;
  const matchCount = tokens.filter((t) => t.type === "match").length;
  const matchedChars = tokens
    .filter((t) => t.type === "match")
    .reduce((sum, t) => sum + t.length, 0);

  console.log(`\nğŸ“Š Thá»‘ng kÃª:`);
  console.log(`  Literals: ${literalCount} tokens (${literalCount} chars)`);
  console.log(`  Matches:  ${matchCount} tokens (${matchedChars} chars)`);
  console.log(`  Tá»•ng tokens: ${tokens.length} (tá»« ${input.length} chars)`);
  console.log(
    `  Tá»· lá»‡ compression: ${tokens.length}/${input.length}` +
      ` = ${((tokens.length / input.length) * 100).toFixed(1)}%`,
  );
}

// â•â•â• TEST â•â•â•
const lz77 = new LZ77();

// Test 1: Chuá»—i láº·p Ä‘Æ¡n giáº£n
const test1 = "ABCABCABCABC";
const encoded1 = lz77.encode(test1);
visualizeLZ77(test1, encoded1);
console.log("\nDecoded:", lz77.decode(encoded1));
console.log("Match:", lz77.decode(encoded1) === test1 ? "âœ…" : "âŒ");

console.log("\n" + "â•".repeat(50) + "\n");

// Test 2: JavaScript code (thá»±c táº¿ hÆ¡n!)
const test2 = "function add(a,b){return a+b}function sub(a,b){return a-b}";
const encoded2 = lz77.encode(test2);
visualizeLZ77(test2, encoded2);
console.log("\nDecoded:", lz77.decode(encoded2));
console.log("Match:", lz77.decode(encoded2) === test2 ? "âœ…" : "âŒ");

console.log("\n" + "â•".repeat(50) + "\n");

// Test 3: Chuá»—i KHÃ”NG láº·p (worst case!)
const test3 = "ABCDEFGHIJ";
const encoded3 = lz77.encode(test3);
visualizeLZ77(test3, encoded3);
console.log("\nDecoded:", lz77.decode(encoded3));
console.log("Match:", lz77.decode(encoded3) === test3 ? "âœ…" : "âŒ");

/*
 * Káº¾T QUáº¢ MONG Äá»¢I:
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ Test 1: "ABCABCABCABC" (12 chars)                  â”‚
 * â”‚   Token 0: LITERAL 'A'                             â”‚
 * â”‚   Token 1: LITERAL 'B'                             â”‚
 * â”‚   Token 2: LITERAL 'C'                             â”‚
 * â”‚   Token 3: MATCH (d=3, l=9)  â†’ "ABCABCABC"       â”‚
 * â”‚   â†’ 4 tokens tá»« 12 chars = 33.3%! ğŸš€             â”‚
 * â”‚                                                    â”‚
 * â”‚ Test 2: JavaScript code â€” nhiá»u patterns:          â”‚
 * â”‚   "function", "(a,b)", "{return a", "b}" láº·p láº¡i! â”‚
 * â”‚   â†’ Token count << input length!                   â”‚
 * â”‚                                                    â”‚
 * â”‚ Test 3: "ABCDEFGHIJ" â€” KHÃ”NG láº·p!                 â”‚
 * â”‚   â†’ 10 literals = KHÃ”NG nÃ©n Ä‘Æ°á»£c! (worst case!)   â”‚
 * â”‚   â†’ LZ77 = lossless â†’ pháº£i giá»¯ nguyÃªn!           â”‚
 * â”‚                                                    â”‚
 * â”‚ INSIGHT: Compression TÃ™YTHUá»˜C data!               â”‚
 * â”‚ â†’ Data láº·p nhiá»u â†’ nÃ©n Tá»T!                      â”‚
 * â”‚ â†’ Data random â†’ KHÃ”NG nÃ©n Ä‘Æ°á»£c!                   â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */
```

---

## Â§17. Tá»± Viáº¿t Tay: Huffman Coding

```javascript
/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *  Tá»° VIáº¾T TAY: Huffman Coding â€” KHÃ”NG dÃ¹ng thÆ° viá»‡n!
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 *  Huffman Coding (David Huffman, 1952):
 *  â†’ KÃ½ tá»± THÆ¯á»œNG Gáº¶P â†’ mÃ£ NGáº®N (Ã­t bits!)
 *  â†’ KÃ½ tá»± HIáº¾M â†’ mÃ£ DÃ€I (nhiá»u bits!)
 *  â†’ PREFIX-FREE: khÃ´ng mÃ£ nÃ o lÃ  prefix cá»§a mÃ£ khÃ¡c!
 *    â†’ Giáº£i mÃ£ KHÃ”NG Cáº¦N delimiter!
 *
 *  TRONG GZIP/BROTLI:
 *  â†’ Huffman cháº¡y SAU LZ77!
 *  â†’ Encode cÃ¡c LZ77 tokens (literals + backreferences)!
 *  â†’ Káº¿t há»£p = DEFLATE algorithm!
 */

// â•â•â• Node trong Huffman Tree â•â•â•
class HuffmanNode {
  constructor(char, freq) {
    this.char = char; // KÃ½ tá»± (null náº¿u internal node)
    this.freq = freq; // Táº§n suáº¥t
    this.left = null; // Child trÃ¡i (bit 0)
    this.right = null; // Child pháº£i (bit 1)
  }
}

// â•â•â• Priority Queue (Min-Heap Ä‘Æ¡n giáº£n) â•â•â•
class MinPriorityQueue {
  constructor() {
    this.items = [];
  }

  enqueue(node) {
    this.items.push(node);
    // Sáº¯p xáº¿p theo táº§n suáº¥t TÄ‚NG Dáº¦N (min-heap)
    this.items.sort((a, b) => a.freq - b.freq);
  }

  dequeue() {
    return this.items.shift(); // Láº¥y node cÃ³ freq NHá» nháº¥t!
  }

  get size() {
    return this.items.length;
  }
}

// â•â•â• Huffman Encoder/Decoder â•â•â•
class HuffmanCoding {
  // BÆ¯á»šC 1: Äáº¿m táº§n suáº¥t má»—i kÃ½ tá»±
  buildFrequencyTable(input) {
    const freq = new Map();
    for (const char of input) {
      freq.set(char, (freq.get(char) || 0) + 1);
    }
    return freq;
  }

  // BÆ¯á»šC 2: XÃ¢y dá»±ng Huffman Tree
  buildTree(freqTable) {
    const pq = new MinPriorityQueue();

    /**
     * Báº¯t Ä‘áº§u: má»—i kÃ½ tá»± = 1 leaf node!
     * â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”
     * â”‚A:5â”‚ â”‚B:2â”‚ â”‚C:1â”‚ â”‚D:3â”‚ â”‚E:1â”‚
     * â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜
     */
    for (const [char, freq] of freqTable) {
      pq.enqueue(new HuffmanNode(char, freq));
    }

    /**
     * Láº·p: ghÃ©p 2 node cÃ³ freq NHá» NHáº¤T!
     *
     * VÃ²ng 1: ghÃ©p C(1) + E(1) = CE(2)
     * â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”€â” â”Œâ”€â”€â”€â”
     * â”‚A:5â”‚ â”‚B:2â”‚ â”‚CE:2â”‚ â”‚D:3â”‚
     * â””â”€â”€â”€â”˜ â””â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”˜
     *
     * VÃ²ng 2: ghÃ©p B(2) + CE(2) = BCE(4)
     * â”Œâ”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”
     * â”‚A:5â”‚ â”‚BCE:4â”‚  â”‚D:3â”‚
     * â””â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”˜
     *
     * ... tiáº¿p tá»¥c cho Ä‘áº¿n 1 ROOT!
     */
    while (pq.size > 1) {
      const left = pq.dequeue(); // Node freq nhá» nháº¥t
      const right = pq.dequeue(); // Node freq nhá» thá»© 2

      // Táº¡o internal node (khÃ´ng cÃ³ char!)
      const parent = new HuffmanNode(null, left.freq + right.freq);
      parent.left = left; // bit 0
      parent.right = right; // bit 1

      pq.enqueue(parent);
    }

    return pq.dequeue(); // Root cá»§a tree!
  }

  // BÆ¯á»šC 3: Táº¡o báº£ng mÃ£ tá»« tree
  buildCodeTable(root) {
    const codeTable = new Map();

    function traverse(node, code) {
      if (!node) return;

      // Leaf node = kÃ½ tá»±!
      if (node.char !== null) {
        codeTable.set(node.char, code || "0");
        return;
      }

      // Internal node: Ä‘i trÃ¡i = '0', Ä‘i pháº£i = '1'
      traverse(node.left, code + "0");
      traverse(node.right, code + "1");
    }

    traverse(root, "");
    return codeTable;
  }

  // â•â•â• ENCODE (NÃ‰N) â•â•â•
  encode(input) {
    if (input.length === 0) return { encoded: "", tree: null };

    // BÆ°á»›c 1: Táº§n suáº¥t
    const freqTable = this.buildFrequencyTable(input);

    // BÆ°á»›c 2: XÃ¢y tree
    const tree = this.buildTree(freqTable);

    // BÆ°á»›c 3: Táº¡o báº£ng mÃ£
    const codeTable = this.buildCodeTable(tree);

    // BÆ°á»›c 4: Encode má»—i kÃ½ tá»± báº±ng Huffman code!
    let encoded = "";
    for (const char of input) {
      encoded += codeTable.get(char);
    }

    return {
      encoded, // Chuá»—i bits
      tree, // Tree (cáº§n Ä‘á»ƒ decode!)
      codeTable, // Báº£ng mÃ£ (Ä‘á»ƒ hiá»ƒn thá»‹)
      freqTable, // Táº§n suáº¥t (Ä‘á»ƒ hiá»ƒn thá»‹)
    };
  }

  // â•â•â• DECODE (GIáº¢I NÃ‰N) â•â•â•
  decode(encoded, tree) {
    if (!tree || encoded.length === 0) return "";

    let result = "";
    let current = tree;

    /**
     * Duyá»‡t tá»«ng bit:
     * â†’ '0' = Ä‘i trÃ¡i
     * â†’ '1' = Ä‘i pháº£i
     * â†’ Gáº·p leaf = XUáº¤T KÃ Tá»° + quay láº¡i root!
     *
     * PREFIX-FREE Ä‘áº£m báº£o: má»—i chuá»—i bits
     * CHá»ˆ decode Ä‘Æ°á»£c 1 cÃ¡ch DUY NHáº¤T!
     */
    for (const bit of encoded) {
      if (bit === "0") {
        current = current.left;
      } else {
        current = current.right;
      }

      // Leaf node = tÃ¬m tháº¥y kÃ½ tá»±!
      if (current.char !== null) {
        result += current.char;
        current = tree; // Reset vá» root!
      }
    }

    return result;
  }
}

// â•â•â• VISUALIZATION HELPER â•â•â•
function visualizeHuffman(input, result) {
  console.log("â•â•â• HUFFMAN CODING VISUALIZATION â•â•â•");
  console.log(`Input: "${input}" (${input.length} chars)\n`);

  // Hiá»ƒn thá»‹ báº£ng táº§n suáº¥t
  console.log("ğŸ“Š Báº£ng táº§n suáº¥t:");
  const sortedFreq = [...result.freqTable.entries()].sort(
    (a, b) => b[1] - a[1],
  );
  for (const [char, freq] of sortedFreq) {
    const bar = "â–ˆ".repeat(freq);
    console.log(`  '${char}': ${freq} ${bar}`);
  }

  // Hiá»ƒn thá»‹ báº£ng mÃ£ Huffman
  console.log("\nğŸ”¤ Báº£ng mÃ£ Huffman:");
  const sortedCodes = [...result.codeTable.entries()].sort(
    (a, b) => a[1].length - b[1].length,
  );
  for (const [char, code] of sortedCodes) {
    const freq = result.freqTable.get(char);
    console.log(
      `  '${char}': ${code.padEnd(10)}` + `(${code.length} bits, freq=${freq})`,
    );
  }

  // TÃ­nh toÃ¡n hiá»‡u quáº£
  const originalBits = input.length * 8; // ASCII = 8 bits/char
  const encodedBits = result.encoded.length;
  const savings = ((1 - encodedBits / originalBits) * 100).toFixed(1);

  console.log("\nğŸ“ˆ Hiá»‡u quáº£ nÃ©n:");
  console.log(
    `  Original: ${input.length} chars Ã— 8 bits = ${originalBits} bits`,
  );
  console.log(`  Encoded:  ${encodedBits} bits`);
  console.log(`  Giáº£m:     ${savings}%`);
  console.log(`  Encoded:  ${result.encoded}`);
}

// â•â•â• TEST â•â•â•
const huffman = new HuffmanCoding();

// Test 1: Chuá»—i Ä‘Æ¡n giáº£n
const test1 = "AAAAABBC";
const result1 = huffman.encode(test1);
visualizeHuffman(test1, result1);
const decoded1 = huffman.decode(result1.encoded, result1.tree);
console.log(`\nDecoded: "${decoded1}"`);
console.log("Match:", decoded1 === test1 ? "âœ…" : "âŒ");

console.log("\n" + "â•".repeat(50) + "\n");

// Test 2: Text thá»±c táº¿ hÆ¡n
const test2 = "the quick brown fox jumps over the lazy dog";
const result2 = huffman.encode(test2);
visualizeHuffman(test2, result2);
const decoded2 = huffman.decode(result2.encoded, result2.tree);
console.log(`\nDecoded: "${decoded2}"`);
console.log("Match:", decoded2 === test2 ? "âœ…" : "âŒ");

/*
 * Káº¾T QUáº¢ MONG Äá»¢I:
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ Test 1: "AAAAABBC" (8 chars)                       â”‚
 * â”‚                                                    â”‚
 * â”‚ Táº§n suáº¥t: A=5, B=2, C=1                           â”‚
 * â”‚                                                    â”‚
 * â”‚ Huffman Tree:                                      â”‚
 * â”‚          (8)                                       â”‚
 * â”‚         /   \                                      â”‚
 * â”‚       A(5)  (3)                                    â”‚
 * â”‚             / \                                    â”‚
 * â”‚           B(2) C(1)                                â”‚
 * â”‚                                                    â”‚
 * â”‚ MÃ£ Huffman:                                        â”‚
 * â”‚   A = 0    (1 bit â€” NHIá»€U nháº¥t â†’ NGáº®N nháº¥t!)     â”‚
 * â”‚   B = 10   (2 bits)                               â”‚
 * â”‚   C = 11   (2 bits)                               â”‚
 * â”‚                                                    â”‚
 * â”‚ Encoded: 00000101011                               â”‚
 * â”‚ = 5Ã—1 + 2Ã—2 + 1Ã—2 = 11 bits                      â”‚
 * â”‚ Original: 8 Ã— 8 = 64 bits                         â”‚
 * â”‚ Giáº£m: 82.8%! ğŸš€                                  â”‚
 * â”‚                                                    â”‚
 * â”‚ QUAN TRá»ŒNG:                                        â”‚
 * â”‚ â†’ A xuáº¥t hiá»‡n 5/8 láº§n â†’ chá»‰ cáº§n 1 bit!          â”‚
 * â”‚ â†’ C xuáº¥t hiá»‡n 1/8 láº§n â†’ 2 bits (cháº¥p nháº­n!)     â”‚
 * â”‚ â†’ Tá»•ng bits << ASCII 8 bits/char!                 â”‚
 * â”‚                                                    â”‚
 * â”‚ INSIGHT FOR GZIP:                                  â”‚
 * â”‚ â†’ JavaScript code cÃ³ NHIá»€U kÃ½ tá»± láº·p:             â”‚
 * â”‚   space, ;, {, }, (, ), =                         â”‚
 * â”‚ â†’ Huffman nÃ©n HIá»†U QUáº¢ cho JS!                   â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */
```

---

## Â§18. Tá»± Viáº¿t Tay: Compression Pipeline HoÃ n Chá»‰nh

```javascript
/**
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *  Tá»° VIáº¾T TAY: COMPRESSION PIPELINE HOÃ€N CHá»ˆNH
 *  MÃ´ phá»ng cÃ¡ch GZIP hoáº¡t Ä‘á»™ng: LZ77 â†’ Huffman!
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 *  PIPELINE:
 *  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 *  â”‚  Input   â”‚â”€â”€â†’ â”‚ LZ77  â”‚â”€â”€â†’ â”‚Serializeâ”‚â”€â”€â†’ â”‚ Huffman â”‚
 *  â”‚ (string) â”‚    â”‚Encode â”‚    â”‚ Tokens  â”‚    â”‚ Encode  â”‚
 *  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 *
 *  Decompress:
 *  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”
 *  â”‚Compressedâ”‚â”€â”€â†’ â”‚ Huffman â”‚â”€â”€â†’ â”‚Deserializeâ”‚â”€â”€â†’ â”‚ LZ77 â”‚
 *  â”‚  (bits)  â”‚    â”‚ Decode  â”‚    â”‚  Tokens   â”‚    â”‚Decodeâ”‚
 *  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”˜
 */

// (Sá»­ dá»¥ng LZ77 vÃ  HuffmanCoding classes tá»« Â§16 vÃ  Â§17)

class CompressionPipeline {
  constructor() {
    this.lz77 = new LZ77(4096, 18);
    this.huffman = new HuffmanCoding();
  }

  // â•â•â• Serialize LZ77 tokens thÃ nh string â•â•â•
  serializeTokens(tokens) {
    /**
     * Format:
     * â†’ Literal:  L<char>     vÃ­ dá»¥: LA, LB, L
     * â†’ Match:    M<dist>,<len>  vÃ­ dá»¥: M3,9
     *
     * Separator: | (pipe)
     *
     * VÃ­ dá»¥: "LA|LB|LC|M3,9"
     */
    return tokens
      .map((t) => {
        if (t.type === "literal") {
          return `L${t.value}`;
        } else {
          return `M${t.distance},${t.length}`;
        }
      })
      .join("|");
  }

  // â•â•â• Deserialize string â†’ LZ77 tokens â•â•â•
  deserializeTokens(serialized) {
    return serialized.split("|").map((s) => {
      if (s[0] === "L") {
        return { type: "literal", value: s.substring(1) };
      } else {
        const parts = s.substring(1).split(",");
        return {
          type: "match",
          distance: parseInt(parts[0]),
          length: parseInt(parts[1]),
        };
      }
    });
  }

  // â•â•â• COMPRESS (NÃ‰N) â•â•â•
  compress(input) {
    console.log("â•â•â• COMPRESSION PIPELINE â•â•â•");
    console.log(`\nğŸ“¥ Input: "${input}"`);
    console.log(`   Size: ${input.length} chars (${input.length * 8} bits)\n`);

    // BÆ¯á»šC 1: LZ77 Encode
    console.log("â”€â”€ BÆ°á»›c 1: LZ77 Encode â”€â”€");
    const lz77Tokens = this.lz77.encode(input);
    const literalCount = lz77Tokens.filter((t) => t.type === "literal").length;
    const matchCount = lz77Tokens.filter((t) => t.type === "match").length;
    console.log(
      `   Tokens: ${lz77Tokens.length} (${literalCount} literals, ${matchCount} matches)`,
    );

    // BÆ¯á»šC 2: Serialize tokens
    console.log("\nâ”€â”€ BÆ°á»›c 2: Serialize Tokens â”€â”€");
    const serialized = this.serializeTokens(lz77Tokens);
    console.log(`   Serialized: "${serialized}"`);
    console.log(`   Size: ${serialized.length} chars`);

    // BÆ¯á»šC 3: Huffman Encode
    console.log("\nâ”€â”€ BÆ°á»›c 3: Huffman Encode â”€â”€");
    const huffmanResult = this.huffman.encode(serialized);
    console.log(`   Encoded bits: ${huffmanResult.encoded.length}`);

    // Hiá»ƒn thá»‹ báº£ng mÃ£ Huffman (top 5)
    const topCodes = [...huffmanResult.codeTable.entries()]
      .sort((a, b) => a[1].length - b[1].length)
      .slice(0, 5);
    for (const [char, code] of topCodes) {
      console.log(`     '${char}' â†’ ${code} (${code.length} bits)`);
    }
    if (huffmanResult.codeTable.size > 5) {
      console.log(`     ... vÃ  ${huffmanResult.codeTable.size - 5} mÃ£ khÃ¡c`);
    }

    // Tá»•ng káº¿t
    const originalBits = input.length * 8;
    const compressedBits = huffmanResult.encoded.length;
    const ratio = ((1 - compressedBits / originalBits) * 100).toFixed(1);

    console.log("\nğŸ“Š Káº¾T QUáº¢:");
    console.log(`   Original:    ${originalBits} bits (${input.length} bytes)`);
    console.log(
      `   Sau LZ77:    ${serialized.length * 8} bits (${serialized.length} bytes)`,
    );
    console.log(
      `   Sau Huffman: ${compressedBits} bits (~${Math.ceil(compressedBits / 8)} bytes)`,
    );
    console.log(`   Tá»· lá»‡ nÃ©n:  ${ratio}%`);
    console.log(
      `   Tá»· sá»‘:       ${Math.ceil(compressedBits / 8)}/${input.length}` +
        ` = ${((Math.ceil(compressedBits / 8) / input.length) * 100).toFixed(1)}%`,
    );

    return {
      encoded: huffmanResult.encoded,
      tree: huffmanResult.tree,
      originalLength: input.length,
    };
  }

  // â•â•â• DECOMPRESS (GIáº¢I NÃ‰N) â•â•â•
  decompress(compressed) {
    console.log("\nâ•â•â• DECOMPRESSION PIPELINE â•â•â•");

    // BÆ°á»›c 1: Huffman Decode
    console.log("â”€â”€ BÆ°á»›c 1: Huffman Decode â”€â”€");
    const serialized = this.huffman.decode(compressed.encoded, compressed.tree);
    console.log(`   Deserialized: "${serialized}"`);

    // BÆ°á»›c 2: Deserialize tokens
    console.log("â”€â”€ BÆ°á»›c 2: Deserialize Tokens â”€â”€");
    const tokens = this.deserializeTokens(serialized);
    console.log(`   Tokens: ${tokens.length}`);

    // BÆ°á»›c 3: LZ77 Decode
    console.log("â”€â”€ BÆ°á»›c 3: LZ77 Decode â”€â”€");
    const output = this.lz77.decode(tokens);
    console.log(`   Output: "${output}"`);

    return output;
  }
}

// â•â•â• TEST PIPELINE â•â•â•
const pipeline = new CompressionPipeline();

// Test 1: Chuá»—i láº·p
console.log("\n" + "â•".repeat(60));
console.log("  TEST 1: Chuá»—i láº·p");
console.log("â•".repeat(60));

const test1 = "ABCABCABCABCABCABCABC";
const compressed1 = pipeline.compress(test1);
const decompressed1 = pipeline.decompress(compressed1);
console.log(`\nâœ… Match: ${decompressed1 === test1 ? "PASS âœ…" : "FAIL âŒ"}`);

// Test 2: JavaScript code
console.log("\n" + "â•".repeat(60));
console.log("  TEST 2: JavaScript code");
console.log("â•".repeat(60));

const test2 =
  'function hello(){console.log("hello")}function world(){console.log("world")}';
const compressed2 = pipeline.compress(test2);
const decompressed2 = pipeline.decompress(compressed2);
console.log(`\nâœ… Match: ${decompressed2 === test2 ? "PASS âœ…" : "FAIL âŒ"}`);

// Test 3: Data KHÃ”NG láº·p (worst case!)
console.log("\n" + "â•".repeat(60));
console.log("  TEST 3: Data khÃ´ng láº·p (worst case)");
console.log("â•".repeat(60));

const test3 = "abcdefghijklmnop";
const compressed3 = pipeline.compress(test3);
const decompressed3 = pipeline.decompress(compressed3);
console.log(`\nâœ… Match: ${decompressed3 === test3 ? "PASS âœ…" : "FAIL âŒ"}`);

/*
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *  INSIGHTS Tá»ª PIPELINE:
 * â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
 *
 * â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
 * â”‚ â‘  LZ77 + Huffman PHá»I Há»¢P = Máº NH HÆ N RIÃŠNG Láºº! â”‚
 * â”‚   â†’ LZ77 giáº£m redundancy (chuá»—i láº·p)             â”‚
 * â”‚   â†’ Huffman giáº£m encoding (táº§n suáº¥t kÃ½ tá»±)        â”‚
 * â”‚   â†’ Káº¿t há»£p = DEFLATE = ná»n táº£ng Gzip!           â”‚
 * â”‚                                                    â”‚
 * â”‚ â‘¡ Data Láº¶P NHIá»€U â†’ nÃ©n Tá»T!                      â”‚
 * â”‚   â†’ JavaScript code láº·p NHIá»€U patterns!            â”‚
 * â”‚   â†’ "function", "return", "const", "{}", "()"     â”‚
 * â”‚   â†’ NÃ©n JavaScript ráº¥t HIá»†U QUáº¢!                 â”‚
 * â”‚                                                    â”‚
 * â”‚ â‘¢ Data RANDOM â†’ nÃ©n KÃ‰M!                         â”‚
 * â”‚   â†’ Entropy cao = Ã­t patterns = Ã­t nÃ©n!            â”‚
 * â”‚   â†’ ÄÃ£ nÃ©n rá»“i thÃ¬ KHÃ”NG nÃ©n thÃªm Ä‘Æ°á»£c!          â”‚
 * â”‚   â†’ áº¢nh JPEG nÃ©n láº¡i = KHÃ”NG giáº£m!               â”‚
 * â”‚                                                    â”‚
 * â”‚ â‘£ Overhead cho file NHá»:                          â”‚
 * â”‚   â†’ Huffman tree cáº§n lÆ°u trá»¯!                     â”‚
 * â”‚   â†’ LZ77 serialization cÃ³ overhead!                â”‚
 * â”‚   â†’ File < 1KB: overhead > savings!               â”‚
 * â”‚   â†’ File > 10KB: savings >> overhead!              â”‚
 * â”‚   â†’ ÄÃ¢y lÃ  lÃ½ do Gzip/Brotli cÃ³ threshold!       â”‚
 * â”‚                                                    â”‚
 * â”‚ â‘¤ So sÃ¡nh vá»›i Gzip/Brotli tháº­t:                   â”‚
 * â”‚   â†’ Gzip: DEFLATE = LZ77 + Huffman (giá»‘ng!)      â”‚
 * â”‚   â†’ NHÆ¯NG: Gzip tá»‘i Æ°u tree hÆ¡n (static/dynamic) â”‚
 * â”‚   â†’ NHÆ¯NG: Gzip dÃ¹ng bit-level packing (compact!) â”‚
 * â”‚   â†’ NHÆ¯NG: Brotli thÃªm context model + dictionary!â”‚
 * â”‚   â†’ Pipeline nÃ y = GIáº¢I THÃCH nguyÃªn lÃ½!          â”‚
 * â”‚   â†’ Gzip/Brotli = PRODUCTION OPTIMIZED!           â”‚
 * â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
 */
```

---

## Â§19. Best Practices & Phá»ng Váº¥n

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  BEST PRACTICES â€” CHECKLIST CHO PRODUCTION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  âœ… COMPRESSION CHECKLIST:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â–¡ 1. Build pipeline:                               â”‚
  â”‚   â†’ Minify táº¥t cáº£ JS/CSS (Terser/esbuild/SWC)     â”‚
  â”‚   â†’ Tree-shake dead code (Webpack/Rollup/Vite)     â”‚
  â”‚   â†’ Code-split routes (dynamic import!)            â”‚
  â”‚                                                    â”‚
  â”‚ â–¡ 2. Static compression:                           â”‚
  â”‚   â†’ Brotli 11 cho JS/CSS/HTML/SVG                  â”‚
  â”‚   â†’ Gzip 9 cho fallback                            â”‚
  â”‚   â†’ Webpack CompressionPlugin / Vite plugin        â”‚
  â”‚   â†’ Threshold: chá»‰ nÃ©n file > 10KB                â”‚
  â”‚                                                    â”‚
  â”‚ â–¡ 3. Dynamic compression:                          â”‚
  â”‚   â†’ Nginx: gzip on + brotli on                     â”‚
  â”‚   â†’ Level: Brotli 5-6, Gzip 6                     â”‚
  â”‚   â†’ Ãp dá»¥ng cho: API responses (JSON!)             â”‚
  â”‚                                                    â”‚
  â”‚ â–¡ 4. Serve pre-compressed:                         â”‚
  â”‚   â†’ Nginx: brotli_static on; gzip_static on;      â”‚
  â”‚   â†’ Æ¯u tiÃªn .br â†’ .gz â†’ original                  â”‚
  â”‚   â†’ CDN: Cloudflare/Vercel tá»± handle!              â”‚
  â”‚                                                    â”‚
  â”‚ â–¡ 5. Headers Ä‘Ãºng:                                 â”‚
  â”‚   â†’ Content-Encoding: br (hoáº·c gzip)               â”‚
  â”‚   â†’ Vary: Accept-Encoding                          â”‚
  â”‚   â†’ Cache-Control: public, max-age=31536000        â”‚
  â”‚     (cho hashed static assets!)                    â”‚
  â”‚                                                    â”‚
  â”‚ â–¡ 6. Chunking strategy:                            â”‚
  â”‚   â†’ SplitChunksPlugin chunks: 'all'                â”‚
  â”‚   â†’ maxInitialRequests: 25                         â”‚
  â”‚   â†’ minSize: 20000 (20KB)                          â”‚
  â”‚   â†’ TÃ¡ch vendor packages lá»›n riÃªng                 â”‚
  â”‚   â†’ Framework chunk riÃªng (react + react-dom)      â”‚
  â”‚                                                    â”‚
  â”‚ â–¡ 7. Audit thÆ°á»ng xuyÃªn:                           â”‚
  â”‚   â†’ Lighthouse "Enable text compression"           â”‚
  â”‚   â†’ DevTools Network â†’ Content-Encoding            â”‚
  â”‚   â†’ Bundle analyzer (webpack-bundle-analyzer)       â”‚
  â”‚   â†’ curl kiá»ƒm tra headers                          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CÃ‚U Há»I PHá»NG Váº¤N â€” VÃ€ CÃCH TRáº¢ Lá»œI
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  Q1: "Gzip hoáº¡t Ä‘á»™ng nhÆ° tháº¿ nÃ o?"
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… TRáº¢ Lá»œI:                                       â”‚
  â”‚ Gzip dÃ¹ng DEFLATE algorithm = LZ77 + Huffman:      â”‚
  â”‚                                                    â”‚
  â”‚ â†’ LZ77: tÃ¬m chuá»—i ÄÃƒ XUáº¤T HIá»†N trong sliding     â”‚
  â”‚   window (32KB), thay báº±ng backreference           â”‚
  â”‚   (distance, length). VD: "ABCABC" â†’ ABC(3,3)     â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Huffman: encode kÃ½ tá»±/token theo Táº¦N SUáº¤T.      â”‚
  â”‚   KÃ½ tá»± thÆ°á»ng gáº·p â†’ mÃ£ ngáº¯n (1-2 bits).          â”‚
  â”‚   KÃ½ tá»± hiáº¿m â†’ mÃ£ dÃ i. Prefix-free â†’ decode OK!   â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Gzip thÃªm header (magic bytes, flags) vÃ          â”‚
  â”‚   trailer (CRC32 checksum) bao quanh DEFLATE data! â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Compression level 1-9: trade-off giá»¯a tá»‘c Ä‘á»™    â”‚
  â”‚   nÃ©n vÃ  tá»· lá»‡ nÃ©n. Level 6 lÃ  default!           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Q2: "Brotli khÃ¡c Gzip nhÆ° tháº¿ nÃ o? Khi nÃ o dÃ¹ng?"
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… TRáº¢ Lá»œI:                                       â”‚
  â”‚ Brotli (Google, 2015) cÃ³ 3 cáº£i tiáº¿n so vá»›i Gzip:   â”‚
  â”‚                                                    â”‚
  â”‚ â‘  Context Modeling:                                â”‚
  â”‚   Gzip: 1 báº£ng Huffman cho toÃ n block.             â”‚
  â”‚   Brotli: NHIá»€U báº£ng Huffman dá»±a vÃ o kÃ½ tá»± trÆ°á»›c! â”‚
  â”‚   â†’ Sau 'q' â†’ 99% lÃ  'u' â†’ chá»‰ cáº§n 1 bit!       â”‚
  â”‚                                                    â”‚
  â”‚ â‘¡ Static Dictionary (~120KB):                      â”‚
  â”‚   Chá»©a sáºµn HTML tags, CSS properties, JS keywords! â”‚
  â”‚   "function" = 1 reference thay vÃ¬ 8 kÃ½ tá»±!       â”‚
  â”‚   â†’ Äáº·c biá»‡t Tá»T cho web content!                â”‚
  â”‚                                                    â”‚
  â”‚ â‘¢ Window Size: 16MB vs 32KB (Gzip)!                â”‚
  â”‚   â†’ TÃ¬m match XA hÆ¡n â†’ nÃ©n tá»‘t hÆ¡n cho file lá»›n! â”‚
  â”‚                                                    â”‚
  â”‚ Káº¿t quáº£: Brotli nÃ©n nhá» hÆ¡n 15-25% so vá»›i Gzip!   â”‚
  â”‚ Tá»‘c Ä‘á»™ giáº£i nÃ©n: tÆ°Æ¡ng Ä‘Æ°Æ¡ng Gzip!                â”‚
  â”‚ Há»— trá»£: 97% browsers hiá»‡n táº¡i!                    â”‚
  â”‚                                                    â”‚
  â”‚ Khi nÃ o dÃ¹ng:                                      â”‚
  â”‚ â†’ Static: Brotli 11 + Gzip 9 fallback!            â”‚
  â”‚ â†’ Dynamic: Brotli 5-6 + Gzip 6 fallback!          â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Q3: "PhÃ¢n biá»‡t static vÃ  dynamic compression?"
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… TRáº¢ Lá»œI:                                       â”‚
  â”‚ Static: nÃ©n TRÆ¯á»šC lÃºc build. DÃ¹ng level CAO NHáº¤T! â”‚
  â”‚ â†’ JS/CSS bundles, static assets.                   â”‚
  â”‚ â†’ Server CHá»ˆ serve file Ä‘Ã£ nÃ©n. CPU = 0!          â”‚
  â”‚ â†’ Webpack CompressionPlugin táº¡o .gz vÃ  .br files!  â”‚
  â”‚                                                    â”‚
  â”‚ Dynamic: nÃ©n ON-THE-FLY má»—i request!              â”‚
  â”‚ â†’ API responses, server-rendered HTML, user content.â”‚
  â”‚ â†’ PHáº¢I dÃ¹ng level THáº¤P hÆ¡n (4-6) Ä‘á»ƒ giáº£m latency!â”‚
  â”‚ â†’ Nginx gzip/brotli modules hoáº·c Express middleware!â”‚
  â”‚                                                    â”‚
  â”‚ Best practice: DÃ™NG Cáº¢ HAI!                        â”‚
  â”‚ â†’ Static cho assets (build time!)                  â”‚
  â”‚ â†’ Dynamic cho everything else (runtime!)           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Q4: "Táº¡i sao khÃ´ng nÃ©n JavaScript thÃ nh 1 file lá»›n?"
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… TRáº¢ Lá»œI: GRANULARITY TRADE-OFF!                â”‚
  â”‚                                                    â”‚
  â”‚ 1 file lá»›n:                                        â”‚
  â”‚ âœ… Compress Tá»T hÆ¡n (compress(a+b) <= c(a)+c(b))  â”‚
  â”‚ âŒ Cache KÃ‰M (thay Ä‘á»•i 1 dÃ²ng â†’ táº£i láº¡i Cáº¢!)    â”‚
  â”‚ âŒ Parse time Lá»šN â†’ block main thread!            â”‚
  â”‚ âŒ Táº£i code KHÃ”NG Cáº¦N cho page hiá»‡n táº¡i!          â”‚
  â”‚                                                    â”‚
  â”‚ Nhiá»u file nhá»:                                    â”‚
  â”‚ âœ… Cache Tá»T (chá»‰ táº£i láº¡i file bá»‹ thay Ä‘á»•i!)     â”‚
  â”‚ âœ… CHá»ˆ táº£i code Cáº¦N cho page hiá»‡n táº¡i!            â”‚
  â”‚ âŒ Compress KÃ‰M hÆ¡n 5-10%!                        â”‚
  â”‚ âŒ Browser overhead: IPC, I/O, <script> parsing!   â”‚
  â”‚                                                    â”‚
  â”‚ Giáº£i phÃ¡p: GRANULAR CHUNKING (Next.js strategy!)   â”‚
  â”‚ â†’ Framework chunk riÃªng (react: cache years!)      â”‚
  â”‚ â†’ Vendor packages lá»›n (>160KB) riÃªng              â”‚
  â”‚ â†’ Shared chunks tá»‘i Ä‘a 25, min size 20KB          â”‚
  â”‚ â†’ TÃ¬m SWEET SPOT giá»¯a 3 má»¥c tiÃªu!               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Q5: "Minification khÃ¡c Compression nhÆ° tháº¿ nÃ o?"
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… TRáº¢ Lá»œI:                                       â”‚
  â”‚                                                    â”‚
  â”‚ Minification (build time):                         â”‚
  â”‚ â†’ XÃ³a comments, whitespace, newlines               â”‚
  â”‚ â†’ RÃºt gá»n tÃªn biáº¿n (mangling): result â†’ a         â”‚
  â”‚ â†’ Tá»‘i Æ°u logic: === true â†’ bá»!                   â”‚
  â”‚ â†’ Output: VALID JavaScript, Ä‘á»c Ä‘Æ°á»£c!              â”‚
  â”‚ â†’ Giáº£m ~30-60%                                    â”‚
  â”‚ â†’ KHÃ”NG reversible! (comments máº¥t vÄ©nh viá»…n!)     â”‚
  â”‚ â†’ Tools: Terser, esbuild, SWC                     â”‚
  â”‚                                                    â”‚
  â”‚ Compression (server/build time):                   â”‚
  â”‚ â†’ NÃ©n binary: LZ77 + Huffman (patterns + freq)     â”‚
  â”‚ â†’ Output: BINARY, KHÃ”NG Ä‘á»c Ä‘Æ°á»£c!                 â”‚
  â”‚ â†’ Browser Tá»° Äá»˜NG giáº£i nÃ©n (transparent!)          â”‚
  â”‚ â†’ Giáº£m thÃªm ~60-80%                               â”‚
  â”‚ â†’ REVERSIBLE! (lossless = giáº£i nÃ©n = giá»‘ng gá»‘c!)  â”‚
  â”‚ â†’ Tools: Gzip, Brotli                              â”‚
  â”‚                                                    â”‚
  â”‚ â†’ Cáº¦N Cáº¢ HAI! Minify TRÆ¯á»šC â†’ Compress SAU!       â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Q6: "V8 streaming threshold lÃ  gÃ¬?"
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… TRáº¢ Lá»œI:                                       â”‚
  â”‚                                                    â”‚
  â”‚ V8 (Chrome JS engine) cÃ³ stream parsing:            â”‚
  â”‚ â†’ Chunks >= 30KB: parse OFF main thread!           â”‚
  â”‚   (background thread parse while downloading!)      â”‚
  â”‚ â†’ Chunks < 30KB: parse ON main thread!             â”‚
  â”‚   (blocking! = cháº­m!)                              â”‚
  â”‚                                                    â”‚
  â”‚ áº¢nh hÆ°á»Ÿng chunking strategy:                       â”‚
  â”‚ â†’ Minimum chunk size nÃªn >= 20-30KB!               â”‚
  â”‚ â†’ QuÃ¡ nhiá»u chunks nhá» â†’ táº¥t cáº£ parse trÃªn main   â”‚
  â”‚   thread â†’ CHáº¬M hÆ¡n 1 chunk lá»›n!                  â”‚
  â”‚                                                    â”‚
  â”‚ â†’ ÄÃ¢y lÃ  1 trong nhá»¯ng lÃ½ do granular chunking    â”‚
  â”‚   cá»§a Next.js Ä‘áº·t minSize = 20KB!                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

  Q7: "Zopfli lÃ  gÃ¬?"
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ âœ… TRáº¢ Lá»œI:                                       â”‚
  â”‚                                                    â”‚
  â”‚ Zopfli (Google, 2013):                             â”‚
  â”‚ â†’ Gzip-COMPATIBLE nhÆ°ng nÃ©n Tá»T HÆ N 3-8%!        â”‚
  â”‚ â†’ Browser giáº£i nÃ©n bÃ¬nh thÆ°á»ng nhÆ° Gzip!           â”‚
  â”‚ â†’ TÃ¬m DEFLATE encoding Tá»I Æ¯U hÆ¡n!               â”‚
  â”‚ â†’ CHáº¬M hÆ¡n Gzip 9 khoáº£ng 80-100x!                â”‚
  â”‚ â†’ CHá»ˆ dÃ¹ng cho STATIC compression!                â”‚
  â”‚ â†’ Náº¿u Ä‘Ã£ dÃ¹ng Brotli â†’ Zopfli Ã­t cáº§n thiáº¿t!     â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Tá»”NG Káº¾T: COMPRESSION PIPELINE HOÃ€N CHá»ˆNH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                    â”‚
  â”‚  SOURCE CODE                                       â”‚
  â”‚      â”‚                                             â”‚
  â”‚      â–¼                                             â”‚
  â”‚  â‘  TREE-SHAKING (bá» dead code)                    â”‚
  â”‚      â”‚                                             â”‚
  â”‚      â–¼                                             â”‚
  â”‚  â‘¡ CODE-SPLITTING (tÃ¡ch routes, lazy load)         â”‚
  â”‚      â”‚                                             â”‚
  â”‚      â–¼                                             â”‚
  â”‚  â‘¢ MINIFICATION (Terser/esbuild/SWC)              â”‚
  â”‚      â”‚ â†’ bá» comments, whitespace, mangle           â”‚
  â”‚      â–¼                                             â”‚
  â”‚  â‘£ STATIC COMPRESSION (build time)                 â”‚
  â”‚      â”‚ â†’ Brotli 11 + Gzip 9                        â”‚
  â”‚      â”‚ â†’ Táº¡o .br vÃ  .gz files                      â”‚
  â”‚      â–¼                                             â”‚
  â”‚  â‘¤ DEPLOY â†’ CDN / Server                           â”‚
  â”‚      â”‚                                             â”‚
  â”‚      â–¼                                             â”‚
  â”‚  â‘¥ SERVER serves:                                  â”‚
  â”‚      â”‚ â†’ Æ¯u tiÃªn .br â†’ .gz â†’ original             â”‚
  â”‚      â”‚ â†’ Content-Encoding: br                      â”‚
  â”‚      â”‚ â†’ Vary: Accept-Encoding                     â”‚
  â”‚      â–¼                                             â”‚
  â”‚  â‘¦ BROWSER:                                        â”‚
  â”‚      â†’ Tá»± Ä‘á»™ng giáº£i nÃ©n!                           â”‚
  â”‚      â†’ Parse â†’ Compile â†’ Execute!                  â”‚
  â”‚      â†’ Cache hashed chunks lÃ¢u dÃ i!                â”‚
  â”‚                                                    â”‚
  â”‚  Káº¾T QUáº¢:                                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
  â”‚  â”‚  1.2MB source                    â”‚               â”‚
  â”‚  â”‚  â†’ 800KB (minified, -33%)        â”‚               â”‚
  â”‚  â”‚  â†’ 210KB (Brotli, -74%)          â”‚               â”‚
  â”‚  â”‚  â†’ Download: 1.1s thay vÃ¬ 6.4s! â”‚               â”‚
  â”‚  â”‚  â†’ Tiáº¿t kiá»‡m 5.3 GIÃ‚Y! ğŸš€      â”‚               â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

> **TÃ i liá»‡u hoÃ n thÃ nh!** ğŸ‰
>
> 19 sections chuyÃªn sÃ¢u â€” tá»« lÃ½ thuyáº¿t Ä‘áº¿n thá»±c hÃ nh â€”
> bao gá»“m 4 thuáº­t toÃ¡n viáº¿t tay tá»« Ä‘áº§u!
>
> **TÃ³m táº¯t kiáº¿n thá»©c:**
>
> - Â§1-Â§5: Ná»n táº£ng (HTTP compression, lossy/lossless, minification, static/dynamic)
> - Â§6-Â§8: Algorithms (Gzip DEFLATE, Brotli context modeling, benchmarks)
> - Â§9-Â§10: Thá»±c hÃ nh (Webpack, Next.js, Nginx, Express, audit tools)
> - Â§11-Â§14: Bundling & Granularity (module/bundle/chunk, trade-off triangle, SplitChunksPlugin)
> - Â§15-Â§18: Viáº¿t tay (Minifier, LZ77, Huffman, Pipeline hoÃ n chá»‰nh)
> - Â§19: Best practices & phá»ng váº¥n
