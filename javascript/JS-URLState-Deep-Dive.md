# URL State Management â€” Deep Dive!

> **Chá»§ Ä‘á»**: Tá»« useState â†’ URL State â€” Táº¡i sao experts xÃ³a state management code?
> **NgÃ´n ngá»¯**: Tiáº¿ng Viá»‡t â€” giáº£i thÃ­ch cá»±c ká»³ chi tiáº¿t!
> **PhÆ°Æ¡ng chÃ¢m**: Tá»± viáº¿t láº¡i báº±ng tay â€” KHÃ”NG dÃ¹ng thÆ° viá»‡n!
> **Nguá»“n**: "From useState to URLState: Why are the experts deleting state management code?"

---

## Má»¥c Lá»¥c

1. [Â§1. URL â€” SiÃªu NÄƒng Lá»±c Bá»‹ Bá» QuÃªn](#1)
2. [Â§2. Tráº¡ng ThÃ¡i ÄÆ°á»£c MÃ£ HÃ³a Trong URL Tháº¿ NÃ o?](#2)
3. [Â§3. CÃ¡c Pattern MÃ£ HÃ³a URL Phá»• Biáº¿n](#3)
4. [Â§4. Tráº¡ng ThÃ¡i NÃ o NÃŠN vÃ  KHÃ”NG NÃŠN VÃ o URL?](#4)
5. [Â§5. Triá»ƒn Khai â€” Vanilla JS + React](#5)
6. [Â§6. Best Practices](#6)
7. [Â§7. Anti-patterns Cáº§n TrÃ¡nh](#7)
8. [Â§8. SÆ¡ Äá»“ Tá»± Váº½](#8)
9. [Â§9. Tá»± Viáº¿t â€” URLStateEngine](#9)
10. [Â§10. CÃ¢u Há»i Luyá»‡n Táº­p](#10)

---

## Â§1. URL â€” SiÃªu NÄƒng Lá»±c Bá»‹ Bá» QuÃªn!

```
  URL STATE â€” Táº I SAO?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  VÃ Dá»¤ THá»°C Táº¾:                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ https://prismjs.com/download.html                    â”‚    â”‚
  â”‚  â”‚   #themes=prism                                      â”‚    â”‚
  â”‚  â”‚   &languages=markup+css+clike+javascript             â”‚    â”‚
  â”‚  â”‚   &plugins=line-numbers                              â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Má»Ÿ link = Táº¤T Cáº¢ config Ä‘Ã£ Ä‘Æ°á»£c chá»n sáºµn!       â”‚    â”‚
  â”‚  â”‚ â†’ Thay Ä‘á»•i config = URL tá»± cáº­p nháº­t!               â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG cáº§n database, cookies, localStorage!        â”‚    â”‚
  â”‚  â”‚ â†’ 1 URL = 1 STATE CONTAINER hoÃ n chá»‰nh!            â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  URL LÃ€ GÃŒ?                                                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ <scheme>://<netloc>/<path>?<query>#<fragment>        â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ scheme:   https                                      â”‚    â”‚
  â”‚  â”‚ netloc:   www.example.com                            â”‚    â”‚
  â”‚  â”‚ path:     /products/laptop                           â”‚    â”‚
  â”‚  â”‚ query:    ?color=silver&sort=price                   â”‚    â”‚
  â”‚  â”‚ fragment: #reviews                                   â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  URL = GIáº¢I PHÃP STATE MANAGEMENT Tá»° NHIÃŠN!                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ 1. SHAREABILITY (Chia sáº»!)                          â”‚    â”‚
  â”‚  â”‚    â†’ Gá»­i link = ngÆ°á»i nháº­n tháº¥y ÄÃšNG ná»™i dung!    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 2. BOOKMARKABLE (ÄÃ¡nh dáº¥u!)                        â”‚    â”‚
  â”‚  â”‚    â†’ LÆ°u URL = lÆ°u tráº¡ng thÃ¡i 1 thá»i Ä‘iá»ƒm!       â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 3. BROWSER HISTORY (Lá»‹ch sá»­!)                       â”‚    â”‚
  â”‚  â”‚    â†’ NÃºt Back/Forward hoáº¡t Ä‘á»™ng ÄÃšNG!              â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 4. DEEP LINKS (LiÃªn káº¿t sÃ¢u!)                       â”‚    â”‚
  â”‚  â”‚    â†’ Nháº£y tháº³ng tá»›i tráº¡ng thÃ¡i Cá»¤ THá»‚!            â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  Váº¤N Äá»€ Vá»šI useState:                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ const [filters, setFilters] = useState({})           â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ User REFRESH trang = Máº¤T Háº¾T state! ğŸ’€          â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG thá»ƒ chia sáº» báº±ng link!                     â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG bookmark Ä‘Æ°á»£c!                              â”‚    â”‚
  â”‚  â”‚ â†’ NÃºt Back KHÃ”NG hoáº¡t Ä‘á»™ng!                        â”‚    â”‚
  â”‚  â”‚ â†’ Báº¡n Ä‘Ã£ PHÃ Vá»  chá»©c nÄƒng cÆ¡ báº£n cá»§a web!         â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  â†’ URL state = cÃ¡ch QUáº¢N LÃ STATE Äáº¦U TIÃŠN cá»§a web!        â”‚
  â”‚  â†’ Tá»“n táº¡i tá»« 1990! Äá»ªNG quÃªn sá»­ dá»¥ng!                     â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§2. Tráº¡ng ThÃ¡i ÄÆ°á»£c MÃ£ HÃ³a Trong URL Tháº¿ NÃ o?

```
  URL ENCODING â€” 3 PHáº¦N:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  â‘  PATH SEGMENT (/path/to/resource):                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ PhÃ¹ há»£p nháº¥t cho PHÃ‚N Cáº¤P TÃ€I NGUYÃŠN!           â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ /users/123/posts        â†’ bÃ i viáº¿t cá»§a user 123    â”‚    â”‚
  â”‚  â”‚ /docs/api/authentication â†’ cáº¥u trÃºc tÃ i liá»‡u      â”‚    â”‚
  â”‚  â”‚ /products/laptop/dell    â†’ category > subcategory  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Hierarchical (phÃ¢n cáº¥p!)                          â”‚    â”‚
  â”‚  â”‚ â†’ Resource identification (nháº­n diá»‡n tÃ i nguyÃªn!)   â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  â‘¡ QUERY PARAMETERS (?key=value&key2=value2):                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ HoÃ n háº£o cho FILTERS, OPTIONS, CONFIGURATIONS!   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ ?theme=dark&lang=en       â†’ UI preferences         â”‚    â”‚
  â”‚  â”‚ ?page=2&limit=20          â†’ phÃ¢n trang             â”‚    â”‚
  â”‚  â”‚ ?status=active&sort=date  â†’ data filtering         â”‚    â”‚
  â”‚  â”‚ ?color=silver&brand=dell  â†’ product filter         â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Non-hierarchical (phi phÃ¢n cáº¥p!)                  â”‚    â”‚
  â”‚  â”‚ â†’ Key-value pairs!                                   â”‚    â”‚
  â”‚  â”‚ â†’ Dá»… thÃªm/bá»›t parameters!                          â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  â‘¢ ANCHOR FRAGMENT (#section):                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ PhÃ¹ há»£p cho CLIENT-SIDE navigation!              â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ #L20-L35        â†’ GitHub: highlight dÃ²ng 20-35     â”‚    â”‚
  â”‚  â”‚ #features       â†’ scroll tá»›i section "features"    â”‚    â”‚
  â”‚  â”‚ #reviews        â†’ nháº£y tá»›i pháº§n Ä‘Ã¡nh giÃ¡          â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG gá»­i tá»›i server!                            â”‚    â”‚
  â”‚  â”‚ â†’ Chá»‰ xá»­ lÃ½ phÃ­a client!                           â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG reload trang!                               â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§3. CÃ¡c Pattern MÃ£ HÃ³a URL Phá»• Biáº¿n!

```
  URL ENCODING PATTERNS:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  PATTERN 1: MULTIPLE VALUES Vá»šI SEPARATORS                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ ?languages=javascript+typescript+python              â”‚    â”‚
  â”‚  â”‚ ?tags=frontend,react,hooks                           â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Separator: + (dáº¥u cá»™ng) hoáº·c , (dáº¥u pháº©y)       â”‚    â”‚
  â”‚  â”‚ â†’ Ngáº¯n gá»n, dá»… Ä‘á»c!                                â”‚    â”‚
  â”‚  â”‚ â†’ Require MANUAL PARSING phÃ­a server!               â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  PATTERN 2: NESTED / STRUCTURED DATA                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ Key-value pairs:                                     â”‚    â”‚
  â”‚  â”‚ ?filters=status:active,owner:me,priority:high        â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ Base64-encoded JSON:                                 â”‚    â”‚
  â”‚  â”‚ ?config=eyJyaWNrIjoicm9sbCJ9==                      â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Complex filters/config trong 1 query string!      â”‚    â”‚
  â”‚  â”‚ â†’ Base64 cho "báº£o máº­t" (obfuscation, khÃ´ng mÃ£ hÃ³a!)â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  PATTERN 3: ARRAY (BRACKET NOTATION)                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ ?tags[]=frontend&tags[]=react&tags[]=hooks           â”‚    â”‚
  â”‚  â”‚ ?ids[0]=42&ids[1]=73                                 â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Gá»‘c tá»« PHP! [] = array indicator!                 â”‚    â”‚
  â”‚  â”‚ â†’ Node qs library, Express middleware há»— trá»£!      â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG chuáº©n hÃ³a trong URL spec!                  â”‚    â”‚
  â”‚  â”‚ â†’ Behavior KHÃC NHAU giá»¯a server/client!           â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  PATTERN 4: BOOLEAN                                           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ Explicit:                                            â”‚    â”‚
  â”‚  â”‚ ?debug=true&analytics=false                          â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ Implicit (presence = true!):                         â”‚    â”‚
  â”‚  â”‚ ?mobile     â† cÃ³ key = true! KhÃ´ng cáº§n =true!      â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ RÃºt ngáº¯n URL! ÄÆ¡n giáº£n hÃ³a feature toggle!      â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  Káº¾T LUáº¬N:                                                    â”‚
  â”‚  â†’ Pattern nÃ o cÅ©ng OK! Quan trá»ng lÃ  NHáº¤T QUÃN!            â”‚
  â”‚  â†’ Chá»n 1 pattern â†’ giá»¯ xuyÃªn suá»‘t app!                    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§4. Tráº¡ng ThÃ¡i NÃ o NÃŠN vÃ  KHÃ”NG NÃŠN VÃ o URL?

```
  NÃŠN vs KHÃ”NG NÃŠN:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  âœ… NÃŠN ÄÆ¯A VÃ€O URL:                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ 1. Search queries + filters                          â”‚    â”‚
  â”‚  â”‚    â†’ ?q=react+hooks&category=frontend               â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 2. PhÃ¢n trang + sáº¯p xáº¿p                             â”‚    â”‚
  â”‚  â”‚    â†’ ?page=3&sort=date&order=desc                   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 3. View mode (list/grid, dark/light)                 â”‚    â”‚
  â”‚  â”‚    â†’ ?view=grid&theme=dark                          â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 4. Date range + time period                          â”‚    â”‚
  â”‚  â”‚    â†’ ?from=2025-01-01&to=2025-12-31                 â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 5. Selected item / active tab                        â”‚    â”‚
  â”‚  â”‚    â†’ ?tab=settings&item=notifications               â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 6. UI config áº£nh hÆ°á»Ÿng ná»™i dung                      â”‚    â”‚
  â”‚  â”‚    â†’ ?lang=vi&currency=VND                          â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 7. Feature flags + A/B test                          â”‚    â”‚
  â”‚  â”‚    â†’ ?experiment=new-checkout&variant=B              â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  âŒ KHÃ”NG NÃŠN ÄÆ¯A VÃ€O URL:                                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ 1. ThÃ´ng tin nháº¡y cáº£m!                               â”‚    â”‚
  â”‚  â”‚    â†’ ?password=secret123 â† TUYá»†T Äá»I KHÃ”NG!       â”‚    â”‚
  â”‚  â”‚    â†’ Tokens, PII (Personally Identifiable Info)     â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 2. Tráº¡ng thÃ¡i UI táº¡m thá»i!                          â”‚    â”‚
  â”‚  â”‚    â†’ Modal Ä‘ang má»Ÿ/Ä‘Ã³ng? â†’ useState!               â”‚    â”‚
  â”‚  â”‚    â†’ Tooltip visible? â†’ useState!                   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 3. Form input Ä‘ang nháº­p (chÆ°a lÆ°u!)                â”‚    â”‚
  â”‚  â”‚    â†’ Unsaved changes â†’ useState!                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 4. Data cá»±c lá»›n hoáº·c nested phá»©c táº¡p!               â”‚    â”‚
  â”‚  â”‚    â†’ URL cÃ³ giá»›i háº¡n 2000-8000 kÃ½ tá»±!              â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ 5. Transient táº§n suáº¥t cao!                           â”‚    â”‚
  â”‚  â”‚    â†’ Vá»‹ trÃ­ chuá»™t, scroll position                  â”‚    â”‚
  â”‚  â”‚    â†’ Thay Ä‘á»•i quÃ¡ nhanh â†’ khÃ´ng phÃ¹ há»£p URL!      â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  TIÃŠU CHÃ ÄÃNH GIÃ:                                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ "Náº¿u ngÆ°á»i khÃ¡c click URL nÃ y,                      â”‚    â”‚
  â”‚  â”‚  há» CÃ“ NÃŠN tháº¥y cÃ¹ng tráº¡ng thÃ¡i khÃ´ng?"            â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ CÃ“ â†’ ÄÆ¯A VÃ€O URL! âœ…                              â”‚    â”‚
  â”‚  â”‚ KHÃ”NG â†’ GIá»® TRONG STATE! âŒ                        â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§5. Triá»ƒn Khai â€” Vanilla JS + React!

### 5.1. Vanilla JavaScript â€” URLSearchParams

```javascript
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// VANILLA JS â€” URLSearchParams API!
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// â‘  Äá»ŒC URL params:
var params = new URLSearchParams(window.location.search);
var view = params.get("view") || "grid"; // default = "grid"
var page = parseInt(params.get("page")) || 1; // default = 1
var theme = params.get("theme") || "light"; // default = "light"

// â‘¡ Cáº¬P NHáº¬T URL params (KHÃ”NG reload trang!):
function updateFilters(filters) {
  var params = new URLSearchParams(window.location.search);

  // Set tá»«ng filter
  params.set("status", filters.status);
  params.set("sort", filters.sort);

  // Náº¿u giÃ¡ trá»‹ = default â†’ XÃ“A khá»i URL! (clean!)
  if (filters.status === "all") params.delete("status");
  if (filters.sort === "date") params.delete("sort");

  // Cáº­p nháº­t URL KHÃ”NG reload!
  var newUrl = window.location.pathname + "?" + params.toString();
  window.history.pushState({}, "", newUrl);
}

// â‘¢ Xá»¬ LÃ nÃºt Back/Forward:
window.addEventListener("popstate", function () {
  var params = new URLSearchParams(window.location.search);
  var filters = {
    status: params.get("status") || "all",
    sort: params.get("sort") || "date",
  };
  renderContent(filters); // Re-render vá»›i state tá»« URL!
});
```

```
  GIáº¢I THÃCH:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  URLSearchParams:                                             â”‚
  â”‚  â†’ API hiá»‡n Ä‘áº¡i Ä‘á»ƒ Ä‘á»c/ghi query string!                    â”‚
  â”‚  â†’ .get(key) â†’ láº¥y giÃ¡ trá»‹                                 â”‚
  â”‚  â†’ .set(key, value) â†’ ghi/cáº­p nháº­t                         â”‚
  â”‚  â†’ .delete(key) â†’ xÃ³a                                      â”‚
  â”‚  â†’ .toString() â†’ serialize thÃ nh "key=value&..."           â”‚
  â”‚  â†’ .has(key) â†’ kiá»ƒm tra tá»“n táº¡i                            â”‚
  â”‚  â†’ .getAll(key) â†’ láº¥y táº¥t cáº£ giÃ¡ trá»‹ (array)             â”‚
  â”‚                                                              â”‚
  â”‚  window.history.pushState({}, "", newUrl):                    â”‚
  â”‚  â†’ Cáº­p nháº­t URL bar KHÃ”NG reload trang!                     â”‚
  â”‚  â†’ ThÃªm entry vÃ o browser history!                           â”‚
  â”‚  â†’ NÃºt Back sáº½ quay láº¡i URL trÆ°á»›c!                         â”‚
  â”‚                                                              â”‚
  â”‚  window.history.replaceState({}, "", newUrl):                 â”‚
  â”‚  â†’ Thay tháº¿ URL hiá»‡n táº¡i KHÃ”NG thÃªm history entry!          â”‚
  â”‚  â†’ DÃ¹ng khi KHÃ”NG muá»‘n user Back láº¡i state cÅ©!             â”‚
  â”‚                                                              â”‚
  â”‚  "popstate" event:                                            â”‚
  â”‚  â†’ Fire khi user click Back/Forward!                         â”‚
  â”‚  â†’ Äá»c láº¡i URL â†’ re-render vá»›i state má»›i!                  â”‚
  â”‚  â†’ QUAN TRá»ŒNG: khÃ´ng fire khi pushState/replaceState!       â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5.2. React â€” useSearchParams

```javascript
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// REACT â€” useSearchParams Hook!
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// import { useSearchParams } from "react-router-dom";

function ProductList() {
  // searchParams = URLSearchParams instance!
  // setSearchParams = function Ä‘á»ƒ cáº­p nháº­t!
  var result = useSearchParams(); // [searchParams, setSearchParams]
  var searchParams = result[0];
  var setSearchParams = result[1];

  var color = searchParams.get("color") || "all";
  var sort = searchParams.get("sort") || "price";
  var page = parseInt(searchParams.get("page")) || 1;

  // Thay Ä‘á»•i color â†’ URL tá»± cáº­p nháº­t!
  function handleColorChange(newColor) {
    setSearchParams(function (prev) {
      var params = new URLSearchParams(prev);
      params.set("color", newColor);
      return params;
    });
  }

  // Thay Ä‘á»•i page:
  function handlePageChange(newPage) {
    setSearchParams(function (prev) {
      var params = new URLSearchParams(prev);
      params.set("page", String(newPage));
      return params;
    });
  }

  // React render vá»›i state Tá»ª URL!
  // â†’ Refresh = giá»¯ nguyÃªn state! âœ…
  // â†’ Share link = cÃ¹ng state! âœ…
  // â†’ Back/Forward = hoáº¡t Ä‘á»™ng! âœ…
}
```

```
  useState vs useSearchParams:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  useState:                    useSearchParams:               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚ const [f, setF] =     â”‚  â”‚ const [sp, setSP] =        â”‚ â”‚
  â”‚  â”‚   useState({})        â”‚  â”‚   useSearchParams()         â”‚ â”‚
  â”‚  â”‚                        â”‚  â”‚                            â”‚ â”‚
  â”‚  â”‚ â†’ State trong MEMORY! â”‚  â”‚ â†’ State trong URL!          â”‚ â”‚
  â”‚  â”‚ â†’ Refresh = Máº¤T! ğŸ’€  â”‚  â”‚ â†’ Refresh = GIá»®! âœ…       â”‚ â”‚
  â”‚  â”‚ â†’ Share = KHÃ”NG! âŒ   â”‚  â”‚ â†’ Share = CÃ“! âœ…           â”‚ â”‚
  â”‚  â”‚ â†’ Back = KHÃ”NG! âŒ    â”‚  â”‚ â†’ Back = HOáº T Äá»˜NG! âœ…     â”‚ â”‚
  â”‚  â”‚ â†’ Bookmark = KHÃ”NG! âŒâ”‚  â”‚ â†’ Bookmark = CÃ“! âœ…        â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§6. Best Practices!

```
  BEST PRACTICES:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  â‘  GRACEFUL DEFAULT VALUES:                                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ KHÃ”NG Ä‘Æ°a default values vÃ o URL!                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ âŒ ?theme=light&lang=en&page=1&sort=date            â”‚    â”‚
  â”‚  â”‚    â†’ DÃ i dÃ²ng! light, en, 1, date lÃ  DEFAULT!      â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ âœ… ?theme=dark                                       â”‚    â”‚
  â”‚  â”‚    â†’ Chá»‰ Ä‘Æ°a giÃ¡ trá»‹ KHÃC default!                â”‚    â”‚
  â”‚  â”‚    â†’ light = default â†’ khÃ´ng cáº§n thÃªm!             â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ Äá»c params â†’ set default TRONG CODE:                â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ function getTheme(params) {                          â”‚    â”‚
  â”‚  â”‚   return params.get("theme") || "light"; // default!â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ URL ngáº¯n gá»n, clean!                             â”‚    â”‚
  â”‚  â”‚ â†’ Default values = single source of truth trong codeâ”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  â‘¡ URL UPDATE DEBOUNCING:                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ Váº¤N Äá»€: Search input â†’ má»—i keystroke = URL update!â”‚    â”‚
  â”‚  â”‚ â†’ "r" â†’ "re" â†’ "rea" â†’ "reac" â†’ "react"          â”‚    â”‚
  â”‚  â”‚ â†’ 5 láº§n pushState! History bá»‹ rÃ¡c!                 â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ GIáº¢I PHÃP: Debounce!                                 â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```javascript
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// DEBOUNCE CHO URL UPDATE â€” Tá»° VIáº¾T!
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

function debounce(fn, delay) {
  var timer = null;
  return function () {
    var context = this;
    var args = arguments;
    clearTimeout(timer);
    timer = setTimeout(function () {
      fn.apply(context, args);
    }, delay);
  };
}

var updateSearchParam = debounce(function (value) {
  var params = new URLSearchParams(window.location.search);
  if (value) {
    params.set("q", value);
  } else {
    params.delete("q");
  }
  // replaceState thay vÃ¬ pushState â†’ khÃ´ng rÃ¡c history!
  window.history.replaceState({}, "", "?" + params.toString());
}, 300);

// User gÃµ "react" â†’ chá»‰ 1 láº§n URL update SAU 300ms!
```

```
  â‘¢ URL PHáº¢I CÃ“ Ã NGHÄ¨A (Meaningful URLs!):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  âŒ Xáº¤U:                                                      â”‚
  â”‚  https://example.com/p?id=x7f2k&v=3                         â”‚
  â”‚  â†’ áº¨n giáº¥u Ã½ Ä‘á»‹nh! KhÃ´ng Ä‘á»c Ä‘Æ°á»£c!                        â”‚
  â”‚                                                              â”‚
  â”‚  âœ… Tá»T:                                                      â”‚
  â”‚  https://example.com/products/laptop?color=silver&sort=price â”‚
  â”‚  â†’ Con ngÆ°á»i Äá»ŒC HIá»‚U Ä‘Æ°á»£c!                               â”‚
  â”‚  â†’ MÃ¡y cÃ³ thá»ƒ PARSE vÃ  trÃ­ch xuáº¥t Ã½ nghÄ©a!               â”‚
  â”‚  â†’ Self-documenting URL!                                     â”‚
  â”‚                                                              â”‚
  â”‚  QUY Táº®C:                                                     â”‚
  â”‚  â†’ Key names = mÃ´ táº£, nháº¥t quÃ¡n!                            â”‚
  â”‚  â†’ DÃ¹ng kebab-case hoáº·c camelCase xuyÃªn suá»‘t!              â”‚
  â”‚  â†’ TrÃ¡nh viáº¿t táº¯t khÃ³ hiá»ƒu (foo, bar, x, v)!              â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§7. Anti-patterns Cáº§n TrÃ¡nh!

```
  ANTI-PATTERNS:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  âŒ ANTI-PATTERN 1: In-memory state trong SPA!               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ const [filters, setFilters] = useState({})           â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ User REFRESH â†’ state Máº¤T Háº¾T!                   â”‚    â”‚
  â”‚  â”‚ â†’ PhÃ¡ vá»¡ chá»©c nÄƒng CÆ  Báº¢N cá»§a web!                â”‚    â”‚
  â”‚  â”‚ â†’ Users MONG Äá»¢I URL giá»¯ context!                 â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ FIX: DÃ¹ng URL state cho filters, pagination, etc.!  â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  âŒ ANTI-PATTERN 2: Sensitive data trong URL!                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ ?password=secret123         â† TUYá»†T Äá»I KHÃ”NG!    â”‚    â”‚
  â”‚  â”‚ ?token=eyJhbGc...          â† KHÃ”NG!                â”‚    â”‚
  â”‚  â”‚ ?ssn=123-45-6789           â† KHÃ”NG!                â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ URL hiá»‡n trong browser bar!                       â”‚    â”‚
  â”‚  â”‚ â†’ URL náº±m trong browser history!                    â”‚    â”‚
  â”‚  â”‚ â†’ URL Ä‘Æ°á»£c gá»­i trong Referer header!                â”‚    â”‚
  â”‚  â”‚ â†’ URL hiá»‡n trong server logs!                       â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  âŒ ANTI-PATTERN 3: Naming KHÃ”NG nháº¥t quÃ¡n!                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ âŒ ?foo=true&bar=2&x=dark                           â”‚    â”‚
  â”‚  â”‚    â†’ foo, bar, x = nghÄ©a gÃ¬?!                      â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ âœ… ?mobile=true&page=2&theme=dark                   â”‚    â”‚
  â”‚  â”‚    â†’ Self-documenting! RÃµ rÃ ng!                     â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  âŒ ANTI-PATTERN 4: URL quÃ¡ dÃ i!                             â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ Browsers: giá»›i háº¡n 2,000 - 8,000 kÃ½ tá»±!         â”‚    â”‚
  â”‚  â”‚ â†’ Server: configs khÃ¡c nhau!                        â”‚    â”‚
  â”‚  â”‚ â†’ CDN: cáº¯t bá»›t URL dÃ i!                            â”‚    â”‚
  â”‚  â”‚ â†’ SEO: search engines giá»›i háº¡n URL!                â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ Náº¿u gáº·p giá»›i háº¡n â†’ RETHINK STRATEGY!              â”‚    â”‚
  â”‚  â”‚ â†’ LÆ°u state phá»©c táº¡p vÃ o DB, chá»‰ giá»¯ ID trong URL!â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§8. SÆ¡ Äá»“ Tá»± Váº½!

### SÆ¡ Äá»“ 1: useState vs URL State Flow

```
  useState vs URL STATE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€ useState â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                        â”‚  â”‚
  â”‚  â”‚  User Action â†’ setState â†’ Re-render â†’ âœ… OK          â”‚  â”‚
  â”‚  â”‚       â”‚                                                â”‚  â”‚
  â”‚  â”‚       â–¼                                                â”‚  â”‚
  â”‚  â”‚  REFRESH / SHARE LINK / BOOKMARK                       â”‚  â”‚
  â”‚  â”‚       â”‚                                                â”‚  â”‚
  â”‚  â”‚       â–¼                                                â”‚  â”‚
  â”‚  â”‚  âŒ STATE Máº¤T! (in-memory only!)                      â”‚  â”‚
  â”‚  â”‚                                                        â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€ URL State â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                        â”‚  â”‚
  â”‚  â”‚  User Action â†’ setSearchParams â†’ URL cáº­p nháº­t         â”‚  â”‚
  â”‚  â”‚       â”‚              â”‚                                 â”‚  â”‚
  â”‚  â”‚       â–¼              â–¼                                 â”‚  â”‚
  â”‚  â”‚  REFRESH â†’ Äá»c URL â†’ Re-render â†’ âœ… GIá»®A STATE!     â”‚  â”‚
  â”‚  â”‚  SHARE  â†’ CÃ¹ng URL â†’ CÃ¹ng STATE! â†’ âœ…              â”‚  â”‚
  â”‚  â”‚  BACK   â†’ popstate â†’ Äá»c URL â†’ âœ… HISTORY!         â”‚  â”‚
  â”‚  â”‚  BOOKMARK â†’ LÆ°u URL â†’ LÆ°u STATE! â†’ âœ…             â”‚  â”‚
  â”‚  â”‚                                                        â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÆ¡ Äá»“ 2: URL Parts â€” State Mapping

```
  URL ANATOMY:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  https://store.com/products/laptop?color=silver&sort=price#r â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”¤ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤â”‚ â”‚
  â”‚  scheme    netloc      path             query           frag â”‚
  â”‚                                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
  â”‚  â”‚ URL Part     â”‚ State Type              â”‚ Example       â”‚ â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
  â”‚  â”‚ Path         â”‚ TÃ i nguyÃªn phÃ¢n cáº¥p     â”‚ /users/123    â”‚ â”‚
  â”‚  â”‚              â”‚ Navigation hierarchy    â”‚ /products/lap â”‚ â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
  â”‚  â”‚ Query (?)    â”‚ Filters, options        â”‚ ?color=silver â”‚ â”‚
  â”‚  â”‚              â”‚ Pagination, sort        â”‚ ?page=2&sort= â”‚ â”‚
  â”‚  â”‚              â”‚ Config, preferences     â”‚ ?theme=dark   â”‚ â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
  â”‚  â”‚ Fragment (#) â”‚ Client-side navigation  â”‚ #reviews      â”‚ â”‚
  â”‚  â”‚              â”‚ Page sections           â”‚ #L20-L35      â”‚ â”‚
  â”‚  â”‚              â”‚ SPA routing (hash mode) â”‚ #/about       â”‚ â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÆ¡ Äá»“ 3: Decision Tree â€” URL hay useState?

```
  DECISION TREE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  Tráº¡ng thÃ¡i nÃ y cáº§n SHARE qua link?                          â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â”œâ”€â”€ YES â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
  â”‚       â”‚                               â”‚                      â”‚
  â”‚       â”‚         Tráº¡ng thÃ¡i nÃ y NHáº Y Cáº¢M?                    â”‚
  â”‚       â”‚              â”‚                                       â”‚
  â”‚       â”‚         YES â†’ âŒ KHÃ”NG URL!                         â”‚
  â”‚       â”‚              â”‚   DÃ¹ng auth state!                   â”‚
  â”‚       â”‚              â”‚                                       â”‚
  â”‚       â”‚         NO â†’ Data QUÃ Lá»šN?                         â”‚
  â”‚       â”‚                   â”‚                                  â”‚
  â”‚       â”‚              YES â†’ âŒ LÆ°u DB + ID trong URL!       â”‚
  â”‚       â”‚              NO  â†’ âœ… ÄÆ¯A VÃ€O URL! â˜…             â”‚
  â”‚       â”‚                                                      â”‚
  â”‚       â”œâ”€â”€ NO â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
  â”‚       â”‚                               â”‚                      â”‚
  â”‚       â”‚         State Táº M THá»œI? (modal, tooltip)            â”‚
  â”‚       â”‚              â”‚                                       â”‚
  â”‚       â”‚         YES â†’ âœ… useState!                          â”‚
  â”‚       â”‚         NO  â†’ âœ… Context/Redux!                    â”‚
  â”‚       â”‚                                                      â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÆ¡ Äá»“ 4: VÃ­ Dá»¥ Thá»±c Táº¿ â€” URL State

```
  REAL-WORLD EXAMPLES:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  â‘  GITHUB â€” Line Highlighting:                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ github.com/user/repo/blob/main/file.js#L108-L136    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Nháº£y tháº³ng tá»›i file, highlight dÃ²ng 108-136!     â”‚    â”‚
  â”‚  â”‚ â†’ Share link = ngÆ°á»i nháº­n tháº¥y ÄÃšNG dÃ²ng code!     â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  â‘¡ E-COMMERCE â€” Filters:                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ store.com/laptops?brand=dell+hp&price=500-1500       â”‚    â”‚
  â”‚  â”‚   &rating=4&sort=price-asc                           â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ LÆ°u Ä‘iá»u kiá»‡n filter báº±ng bookmark!              â”‚    â”‚
  â”‚  â”‚ â†’ Share káº¿t quáº£ tÃ¬m kiáº¿m vá»›i báº¡n bÃ¨!              â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  â‘¢ GOOGLE MAPS â€” Coordinates:                                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ google.com/maps/@22.443842,-74.220744,19z            â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Tá»a Ä‘á»™, zoom level, loáº¡i báº£n Ä‘á»“ = trong URL!    â”‚    â”‚
  â”‚  â”‚ â†’ Share = cÃ¹ng vá»‹ trÃ­, cÃ¹ng zoom!                  â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§9. Tá»± Viáº¿t â€” URLStateEngine!

```javascript
/**
 * URLStateEngine â€” Quáº£n lÃ½ state qua URL!
 * Tá»± viáº¿t báº±ng tay, KHÃ”NG dÃ¹ng thÆ° viá»‡n nÃ o!
 * Covers: read, write, debounce, serialize, history
 */
var URLStateEngine = (function () {
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 1. READ â€” Äá»c state tá»« URL
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function getParams(url) {
    var queryString = (url || "").split("?")[1] || "";
    queryString = queryString.split("#")[0]; // bá» fragment
    var params = {};
    if (!queryString) return params;

    var pairs = queryString.split("&");
    for (var i = 0; i < pairs.length; i++) {
      var parts = pairs[i].split("=");
      var key = decodeURIComponent(parts[0]);
      var value = parts[1] ? decodeURIComponent(parts[1]) : true;
      // Boolean: ?mobile (no value) â†’ true
      params[key] = value;
    }
    return params;
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 2. WRITE â€” Serialize state thÃ nh query string
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function toQueryString(params, defaults) {
    defaults = defaults || {};
    var parts = [];

    for (var key in params) {
      if (!params.hasOwnProperty(key)) continue;
      var value = params[key];

      // Best practice: bá» giÃ¡ trá»‹ = default!
      if (
        defaults[key] !== undefined &&
        String(defaults[key]) === String(value)
      ) {
        continue; // Skip default values!
      }

      // Boolean: true â†’ key only, false â†’ skip!
      if (value === true) {
        parts.push(encodeURIComponent(key));
      } else if (value === false || value === null || value === undefined) {
        continue; // Bá» qua!
      } else {
        parts.push(encodeURIComponent(key) + "=" + encodeURIComponent(value));
      }
    }

    return parts.length > 0 ? "?" + parts.join("&") : "";
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 3. DEBOUNCE â€” Chá»‘ng cáº­p nháº­t quÃ¡ nhanh
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function debounce(fn, delay) {
    var timer = null;
    return function () {
      var context = this;
      var args = arguments;
      clearTimeout(timer);
      timer = setTimeout(function () {
        fn.apply(context, args);
      }, delay);
    };
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 4. ARRAY PARSING â€” Xá»­ lÃ½ multiple values
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function parseArrayParam(value, separator) {
    separator = separator || ",";
    if (!value || value === true) return [];
    return String(value).split(separator);
  }

  function serializeArray(arr, separator) {
    separator = separator || ",";
    return arr.join(separator);
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 5. VALIDATE â€” Kiá»ƒm tra URL length
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function validateUrlLength(baseUrl, queryString) {
    var fullUrl = baseUrl + queryString;
    var maxLength = 2000; // safe limit

    return {
      length: fullUrl.length,
      maxLength: maxLength,
      isValid: fullUrl.length <= maxLength,
      warning:
        fullUrl.length > maxLength
          ? "URL quÃ¡ dÃ i! NÃªn lÆ°u state phá»©c táº¡p vÃ o DB!"
          : null,
    };
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 6. HISTORY â€” pushState vs replaceState
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function pushUrl(path, queryString) {
    var newUrl = path + queryString;
    return {
      action: "pushState",
      url: newUrl,
      note: "ThÃªm entry má»›i vÃ o history! Back sáº½ quay láº¡i!",
    };
  }

  function replaceUrl(path, queryString) {
    var newUrl = path + queryString;
    return {
      action: "replaceState",
      url: newUrl,
      note: "Thay tháº¿ URL hiá»‡n táº¡i! KHÃ”NG thÃªm history entry!",
    };
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 7. DETERMINE â€” NÃªn dÃ¹ng URL state hay useState?
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function shouldUseUrlState(description) {
    var urlIndicators = [
      "shareable",
      "filter",
      "sort",
      "page",
      "search",
      "view mode",
      "theme",
      "tab",
      "date range",
      "language",
    ];
    var memoryIndicators = [
      "modal",
      "tooltip",
      "form input",
      "password",
      "token",
      "mouse position",
      "scroll",
      "temporary",
    ];

    var lower = description.toLowerCase();
    var urlScore = 0;
    var memoryScore = 0;

    for (var i = 0; i < urlIndicators.length; i++) {
      if (lower.indexOf(urlIndicators[i]) !== -1) urlScore++;
    }
    for (var j = 0; j < memoryIndicators.length; j++) {
      if (lower.indexOf(memoryIndicators[j]) !== -1) memoryScore++;
    }

    return {
      description: description,
      urlScore: urlScore,
      memoryScore: memoryScore,
      recommendation:
        urlScore > memoryScore ? "URL STATE! âœ…" : "useState/memory! âœ…",
      rule: "Náº¿u ngÆ°á»i khÃ¡c click URL â†’ NÃŠNN tháº¥y cÃ¹ng state? â†’ URL!",
    };
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // DEMO
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function demo() {
    console.log("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    console.log("â•‘  URL STATE ENGINE â€” DEMO                    â•‘");
    console.log("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");

    // 1. Parse URL
    console.log("\n--- 1. PARSE URL ---");
    var url =
      "https://store.com/products?color=silver&sort=price&page=2&mobile";
    console.log(JSON.stringify(getParams(url), null, 2));

    // 2. Serialize to query string
    console.log("\n--- 2. SERIALIZE ---");
    var state = { color: "silver", sort: "price", page: 2, theme: "light" };
    var defaults = { sort: "date", page: 1, theme: "light" };
    console.log(toQueryString(state, defaults));
    // â†’ ?color=silver&sort=price&page=2 (theme bá»‹ bá» vÃ¬ = default!)

    // 3. Array parsing
    console.log("\n--- 3. ARRAY PARSING ---");
    console.log(parseArrayParam("javascript,typescript,python"));
    console.log(serializeArray(["react", "vue", "angular"]));

    // 4. URL length validation
    console.log("\n--- 4. URL LENGTH ---");
    console.log(
      JSON.stringify(
        validateUrlLength(
          "https://store.com/products",
          "?color=silver&sort=price",
        ),
        null,
        2,
      ),
    );

    // 5. Push vs Replace
    console.log("\n--- 5. PUSH vs REPLACE ---");
    console.log(JSON.stringify(pushUrl("/products", "?page=3")));
    console.log(JSON.stringify(replaceUrl("/products", "?q=react")));

    // 6. Decision helper
    console.log("\n--- 6. URL vs useState? ---");
    console.log(
      JSON.stringify(
        shouldUseUrlState("product filter and sort options"),
        null,
        2,
      ),
    );
    console.log(
      JSON.stringify(
        shouldUseUrlState("modal open/close temporary state"),
        null,
        2,
      ),
    );

    console.log("\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    console.log("â•‘  âœ… Demo Complete!                           â•‘");
    console.log("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
  }

  return {
    getParams: getParams,
    toQueryString: toQueryString,
    debounce: debounce,
    parseArrayParam: parseArrayParam,
    serializeArray: serializeArray,
    validateUrlLength: validateUrlLength,
    pushUrl: pushUrl,
    replaceUrl: replaceUrl,
    shouldUseUrlState: shouldUseUrlState,
    demo: demo,
  };
})();

// Cháº¡y: URLStateEngine.demo();
```

---

## Â§10. CÃ¢u Há»i Luyá»‡n Táº­p!

### â“ CÃ¢u 1: Táº¡i sao "experts" xÃ³a state management code?

**Tráº£ lá»i:**

VÃ¬ URL **ÄÃƒ LÃ€** state management tá»± nhiÃªn! Thay vÃ¬:

```javascript
// âŒ State trong memory â€” máº¥t khi refresh!
const [filters, setFilters] = useState({});
```

DÃ¹ng:

```javascript
// âœ… State trong URL â€” giá»¯ qua refresh, share Ä‘Æ°á»£c!
const [searchParams, setSearchParams] = useSearchParams();
```

â†’ Bá» useState cho filters/pagination/sort â†’ dÃ¹ng URL state!
â†’ KhÃ´ng cáº§n Redux/Zustand cho nhá»¯ng state nÃ y!

### â“ CÃ¢u 2: 4 siÃªu nÄƒng lá»±c cá»§a URL state?

**Tráº£ lá»i:**

| SiÃªu nÄƒng lá»±c       | Giáº£i thÃ­ch                                 |
| ------------------- | ------------------------------------------ |
| **Shareability**    | Gá»­i link = ngÆ°á»i nháº­n tháº¥y ÄÃšNG state!     |
| **Bookmarkable**    | LÆ°u URL = lÆ°u tráº¡ng thÃ¡i táº¡i thá»i Ä‘iá»ƒm Ä‘Ã³! |
| **Browser History** | NÃºt Back/Forward hoáº¡t Ä‘á»™ng Ä‘Ãºng!           |
| **Deep Links**      | Nháº£y tháº³ng tá»›i state cá»¥ thá»ƒ cá»§a app!       |

### â“ CÃ¢u 3: 3 pháº§n URL encode state gÃ¬?

**Tráº£ lá»i:**

| Part                | Encode                   | VÃ­ dá»¥                      |
| ------------------- | ------------------------ | -------------------------- |
| **Path** `/...`     | TÃ i nguyÃªn phÃ¢n cáº¥p      | `/users/123/posts`         |
| **Query** `?...`    | Filters, options, config | `?color=silver&sort=price` |
| **Fragment** `#...` | Client-side navigation   | `#L20-L35`, `#reviews`     |

### â“ CÃ¢u 4: TiÃªu chÃ­ nÃ o Ä‘á»ƒ quyáº¿t Ä‘á»‹nh URL hay useState?

**Tráº£ lá»i:**

> **"Náº¿u ngÆ°á»i khÃ¡c click URL nÃ y, há» CÃ“ NÃŠN tháº¥y cÃ¹ng tráº¡ng thÃ¡i khÃ´ng?"**

- **CÃ“** â†’ ÄÆ¯A VÃ€O URL! (filters, pagination, theme, search, sort)
- **KHÃ”NG** â†’ GIá»® TRONG STATE! (modal, tooltip, form input, password)

### â“ CÃ¢u 5: Táº¡i sao KHÃ”NG Ä‘Æ°a default values vÃ o URL?

**Tráº£ lá»i:**

```
âŒ ?theme=light&lang=en&page=1&sort=date
   â†’ DÃ i dÃ²ng vÃ´ nghÄ©a! Táº¥t cáº£ Ä‘á»u lÃ  default!

âœ… ?theme=dark
   â†’ Chá»‰ giÃ¡ trá»‹ KHÃC default! Ngáº¯n gá»n!
```

â†’ Default values Ä‘áº·t TRONG CODE: `params.get("theme") || "light"`
â†’ URL ngáº¯n, clean, chá»‰ chá»©a thÃ´ng tin KHÃC BIá»†T!

### â“ CÃ¢u 6: pushState vs replaceState?

**Tráº£ lá»i:**

| Method         | Behavior                         | Use Case                                      |
| -------------- | -------------------------------- | --------------------------------------------- |
| `pushState`    | **THÃŠM** entry vÃ o history stack | Pagination, filter changes (user muá»‘n Back!)  |
| `replaceState` | **THAY THáº¾** entry hiá»‡n táº¡i      | Search typing (debounce â€” khÃ´ng rÃ¡c history!) |

### â“ CÃ¢u 7: Táº¡i sao cáº§n debounce cho URL update?

**Tráº£ lá»i:**

KhÃ´ng debounce â†’ má»—i keystroke = 1 `pushState`:

```
"r" â†’ "re" â†’ "rea" â†’ "reac" â†’ "react"
= 5 láº§n pushState! History bá»‹ rÃ¡c!
User press Back 5 láº§n má»›i quay láº¡i trang trÆ°á»›c!
```

Debounce 300ms â†’ chá» user ngá»«ng gÃµ â†’ 1 láº§n `replaceState`!

### â“ CÃ¢u 8: URL state vs Redux/Zustand â€” khi nÃ o dÃ¹ng gÃ¬?

**Tráº£ lá»i:**

| State Type                        | Solution              |
| --------------------------------- | --------------------- |
| Filters, pagination, sort, search | **URL State** âœ…      |
| Theme, view mode, language        | **URL State** âœ…      |
| Auth state, user session          | **Context/Redux** âœ…  |
| Complex form wizard state         | **useState/Redux** âœ… |
| Modal open/close                  | **useState** âœ…       |
| Global shopping cart              | **Redux/Zustand** âœ…  |
| Temporary UI animations           | **useState/CSS** âœ…   |

â†’ URL state KHÃ”NG thay tháº¿ Redux!
â†’ URL state thay tháº¿ useState cho **shareable, bookmarkable** state!

---

> ğŸ¯ **Tá»•ng káº¿t URL State:**
>
> - **URL = state manager tá»± nhiÃªn** â€” shareability, bookmark, history, deep links!
> - **useState = memory** â€” máº¥t khi refresh! URL state = persistent!
> - **3 pháº§n URL**: path (resources), query (filters/options), fragment (client navigation)
> - **4 patterns**: separators, nested data, bracket arrays, booleans
> - **TiÃªu chÃ­**: "NgÆ°á»i khÃ¡c click â†’ nÃªn tháº¥y cÃ¹ng state?" â†’ URL!
> - **Best practices**: bá» default values, debounce search, meaningful URLs
> - **Anti-patterns**: in-memory SPA state, sensitive data, obscure naming, URL quÃ¡ dÃ i
> - **URLStateEngine** tá»± viáº¿t: parse, serialize, debounce, validate, push/replace, decision helper!
> - **8 cÃ¢u há»i** luyá»‡n táº­p vá»›i Ä‘Ã¡p Ã¡n chi tiáº¿t!
