# Next.js Project Structure â€” Deep Dive!

> **Chá»§ Ä‘á»**: Cáº¥u trÃºc dá»± Ã¡n Next.js App Router â€” tá»« A Ä‘áº¿n Z
> **NgÃ´n ngá»¯**: Tiáº¿ng Viá»‡t â€” giáº£i thÃ­ch cá»±c ká»³ chi tiáº¿t!
> **PhÆ°Æ¡ng chÃ¢m**: Tá»± viáº¿t láº¡i báº±ng tay â€” KHÃ”NG dÃ¹ng thÆ° viá»‡n!
> **Nguá»“n**: https://nextjs.org/docs/app/getting-started/project-structure

---

## Má»¥c Lá»¥c

1. [Â§1. Tá»•ng Quan â€” Folder & File Conventions!](#1)
2. [Â§2. Top-Level Folders!](#2)
3. [Â§3. Top-Level Files!](#3)
4. [Â§4. Routing Files â€” Special File Conventions!](#4)
5. [Â§5. Nested Routes â€” CÃ¡ch Folder Táº¡o URL!](#5)
6. [Â§6. Dynamic Routes â€” Tham Sá»‘ Äá»™ng!](#6)
7. [Â§7. Route Groups & Private Folders!](#7)
8. [Â§8. Parallel & Intercepted Routes!](#8)
9. [Â§9. Metadata File Conventions!](#9)
10. [Â§10. Component Hierarchy â€” Thá»© Tá»± Render!](#10)
11. [Â§11. Colocation â€” Äáº·t File BÃªn Cáº¡nh Route!](#11)
12. [Â§12. Organizing Your Project â€” 4 Strategies!](#12)
13. [Â§13. Advanced Examples â€” Route Groups Thá»±c Táº¿!](#13)
14. [Â§14. Tá»± Viáº¿t â€” Project Structure Analyzer!](#14)
15. [Â§15. Tá»± Viáº¿t â€” Route Tree Builder!](#15)
16. [Â§16. Tá»•ng Káº¿t & CÃ¢u Há»i Luyá»‡n Táº­p!](#16)

---

## Â§1. Tá»•ng Quan â€” Folder & File Conventions!

```
  NEXT.JS PROJECT STRUCTURE â€” Tá»”NG QUAN:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Next.js App Router dÃ¹ng FILE-BASED ROUTING:          â”‚
  â”‚  â†’ FOLDER = URL segment                               â”‚
  â”‚  â†’ FILE = UI cho segment Ä‘Ã³                           â”‚
  â”‚                                                        â”‚
  â”‚  2 LOáº I CONVENTIONS:                                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â‘  FOLDER CONVENTIONS:                          â”‚  â”‚
  â”‚  â”‚     â†’ TÃªn folder = URL path                     â”‚  â”‚
  â”‚  â”‚     â†’ app/blog/post â†’ /blog/post               â”‚  â”‚
  â”‚  â”‚     â†’ Äáº·c biá»‡t: (group), [dynamic], _private   â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â‘¡ FILE CONVENTIONS:                            â”‚  â”‚
  â”‚  â”‚     â†’ TÃªn file Ä‘áº·c biá»‡t = chá»©c nÄƒng Ä‘áº·c biá»‡t  â”‚  â”‚
  â”‚  â”‚     â†’ page.tsx = UI trang                       â”‚  â”‚
  â”‚  â”‚     â†’ layout.tsx = shared wrapper               â”‚  â”‚
  â”‚  â”‚     â†’ loading.tsx = loading skeleton             â”‚  â”‚
  â”‚  â”‚     â†’ error.tsx = error boundary                â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  Cáº¤U TRÃšC Tá»”NG THá»‚:                                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  my-nextjs-app/                                  â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ app/          â† App Router (routing)       â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ public/       â† Static assets              â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ src/          â† Optional source folder     â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ next.config.js â† Config                    â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ package.json  â† Dependencies               â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ tsconfig.json â† TypeScript config          â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ .env          â† Environment variables      â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Next.js KHÃ”NG Ã©p báº¡n tá»• chá»©c theo cÃ¡ch nÃ o!   â”‚  â”‚
  â”‚  â”‚  â†’ UNOPINIONATED!                               â”‚  â”‚
  â”‚  â”‚  â†’ NhÆ°ng cung cáº¥p CONVENTIONS Ä‘á»ƒ há»— trá»£!      â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§2. Top-Level Folders!

```
  TOP-LEVEL FOLDERS â€” THÆ¯ Má»¤C Gá»C:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  4 THÆ¯ Má»¤C Gá»C CHÃNH:                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  my-nextjs-app/                                  â”‚  â”‚
  â”‚  â”‚  â”‚                                               â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ app/                                        â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ App Router!                               â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ Chá»©a routing, layouts, pages             â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ ÄÃ‚Y LÃ€ THÆ¯ Má»¤C CHÃNH cho App Router!  â”‚  â”‚
  â”‚  â”‚  â”‚                                               â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ pages/                                      â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ Pages Router (cÅ©)!                       â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ DÃ¹ng cho legacy/migration                â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ KHÃ”NG dÃ¹ng Ä‘á»“ng thá»i vá»›i app/           â”‚  â”‚
  â”‚  â”‚  â”‚     cho cÃ¹ng 1 route!                        â”‚  â”‚
  â”‚  â”‚  â”‚                                               â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ public/                                     â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ Static assets!                            â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ Images, fonts, files...                  â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ Truy cáº­p: /favicon.ico                   â”‚  â”‚
  â”‚  â”‚  â”‚   â†’ KHÃ”NG qua bundler!                       â”‚  â”‚
  â”‚  â”‚  â”‚                                               â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ src/                                        â”‚  â”‚
  â”‚  â”‚      â†’ Optional source folder!                   â”‚  â”‚
  â”‚  â”‚      â†’ TÃ¡ch code khá»i config files             â”‚  â”‚
  â”‚  â”‚      â†’ src/app/ thay vÃ¬ app/                    â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  Sá»° KHÃC BIá»†T app/ vs pages/:                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  app/ (App Router)     pages/ (Pages Router)    â”‚  â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚  â”‚
  â”‚  â”‚  â”‚Server Comps âœ…â”‚    â”‚Client only    â”‚         â”‚  â”‚
  â”‚  â”‚  â”‚Nested Layout âœ…â”‚    â”‚_app.js only  â”‚         â”‚  â”‚
  â”‚  â”‚  â”‚Streaming    âœ…â”‚    â”‚No streaming  â”‚         â”‚  â”‚
  â”‚  â”‚  â”‚Loading UI   âœ…â”‚    â”‚Manual        â”‚         â”‚  â”‚
  â”‚  â”‚  â”‚Error bound  âœ…â”‚    â”‚Manual        â”‚         â”‚  â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ App Router = RECOMMENDED cho projects má»›i!  â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§3. Top-Level Files!

```
  TOP-LEVEL FILES â€” FILE Cáº¤U HÃŒNH Gá»C:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  FILE Cáº¤U HÃŒNH CHÃNH:                                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  next.config.js                                  â”‚  â”‚
  â”‚  â”‚  â†’ Cáº¥u hÃ¬nh Next.js (redirects, rewrites,       â”‚  â”‚
  â”‚  â”‚    images, webpack, experimental features...)   â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  package.json                                    â”‚  â”‚
  â”‚  â”‚  â†’ Dependencies + scripts (dev, build, start)   â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  instrumentation.ts                              â”‚  â”‚
  â”‚  â”‚  â†’ Monitoring + observability (OpenTelemetry)   â”‚  â”‚
  â”‚  â”‚  â†’ Cháº¡y KHI server khá»Ÿi Ä‘á»™ng!                   â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  proxy.ts                                        â”‚  â”‚
  â”‚  â”‚  â†’ Proxy rules cho dev server                   â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  eslint.config.mjs                               â”‚  â”‚
  â”‚  â”‚  â†’ ESLint configuration                         â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  tsconfig.json / jsconfig.json                   â”‚  â”‚
  â”‚  â”‚  â†’ TypeScript / JavaScript configuration        â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  next-env.d.ts                                   â”‚  â”‚
  â”‚  â”‚  â†’ TypeScript declarations cho Next.js          â”‚  â”‚
  â”‚  â”‚  â†’ Tá»° Äá»˜NG generated! Äá»ªNG sá»­a!               â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  .gitignore                                      â”‚  â”‚
  â”‚  â”‚  â†’ Files/folders Git bá» qua                     â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  ENVIRONMENT VARIABLES:                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  .env              â†’ Táº¥t cáº£ environments        â”‚  â”‚
  â”‚  â”‚  .env.local        â†’ Local overrides (secret!)  â”‚  â”‚
  â”‚  â”‚  .env.development  â†’ Chá»‰ cho dev mode           â”‚  â”‚
  â”‚  â”‚  .env.production   â†’ Chá»‰ cho production         â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Äá»˜ Æ¯U TIÃŠN (tá»« cao â†’ tháº¥p):                  â”‚  â”‚
  â”‚  â”‚  .env.local > .env.development > .env            â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  QUAN TRá»ŒNG:                                     â”‚  â”‚
  â”‚  â”‚  â†’ NEXT_PUBLIC_ prefix = client-side visible!   â”‚  â”‚
  â”‚  â”‚  â†’ KhÃ´ng cÃ³ prefix = server-only (báº£o máº­t!)    â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§4. Routing Files â€” Special File Conventions!

```
  ROUTING FILES â€” CÃC FILE Äáº¶C BIá»†T TRONG app/:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Má»–I ROUTE SEGMENT cÃ³ thá»ƒ chá»©a CÃC FILE SAU:         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  FILE            CHá»¨C NÄ‚NG        EXTENSIONS     â”‚  â”‚
  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚
  â”‚  â”‚  layout          Shared UI cho    .js .jsx .tsx  â”‚  â”‚
  â”‚  â”‚                  segment + con                   â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  page            UI unique cho    .js .jsx .tsx  â”‚  â”‚
  â”‚  â”‚                  route nÃ y                       â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  loading         Loading UI       .js .jsx .tsx  â”‚  â”‚
  â”‚  â”‚                  (Suspense)                      â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  not-found       404 UI           .js .jsx .tsx  â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  error           Error boundary   .js .jsx .tsx  â”‚  â”‚
  â”‚  â”‚                  cho segment                     â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  global-error    Error boundary   .js .jsx .tsx  â”‚  â”‚
  â”‚  â”‚                  cho ROOT                        â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  route           API endpoint     .js .ts        â”‚  â”‚
  â”‚  â”‚                  (KHÃ”NG cÃ³ UI!)                  â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  template        Re-rendered      .js .jsx .tsx  â”‚  â”‚
  â”‚  â”‚                  layout variant                  â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  default         Fallback UI      .js .jsx .tsx  â”‚  â”‚
  â”‚  â”‚                  (parallel routes)               â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  QUAN TRá»ŒNG â€” page vs route:                           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  page.tsx  â†’ Render UI (HTML/React component)   â”‚  â”‚
  â”‚  â”‚  route.ts  â†’ API handler (GET, POST, PUT...)    â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  âš ï¸ KHÃ”NG THá»‚ cÃ³ cáº£ page.tsx VÃ€ route.ts       â”‚  â”‚
  â”‚  â”‚     trong CÃ™NG 1 route segment!                 â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  VÃ Dá»¤:                                         â”‚  â”‚
  â”‚  â”‚  app/blog/page.tsx  â†’ /blog (UI)               â”‚  â”‚
  â”‚  â”‚  app/api/blog/route.ts â†’ /api/blog (API)       â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  layout vs template:                                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  layout.tsx:                                     â”‚  â”‚
  â”‚  â”‚  â†’ PERSIST across navigations!                  â”‚  â”‚
  â”‚  â”‚  â†’ State GIá»®U Láº I khi chuyá»ƒn trang!            â”‚  â”‚
  â”‚  â”‚  â†’ Re-render CHá»ˆ children, KHÃ”NG re-render     â”‚  â”‚
  â”‚  â”‚    báº£n thÃ¢n layout!                              â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  template.tsx:                                   â”‚  â”‚
  â”‚  â”‚  â†’ Táº O Má»šI instance má»—i láº§n navigate!         â”‚  â”‚
  â”‚  â”‚  â†’ State RESET má»—i láº§n!                        â”‚  â”‚
  â”‚  â”‚  â†’ DOM RECREATED! Effects cháº¡y láº¡i!            â”‚  â”‚
  â”‚  â”‚  â†’ DÃ¹ng cho: animations, useEffect cáº§n reset  â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§5. Nested Routes â€” CÃ¡ch Folder Táº¡o URL!

```
  NESTED ROUTES â€” FOLDER = URL SEGMENT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  CÆ  CHáº¾ CÆ  Báº¢N:                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Folder Lá»’NG NHAU = URL segments Lá»’NG NHAU!    â”‚  â”‚
  â”‚  â”‚  Chá»‰ khi cÃ³ page.tsx/route.ts â†’ route má»›i      â”‚  â”‚
  â”‚  â”‚  PUBLIC (truy cáº­p Ä‘Æ°á»£c)!                         â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  FOLDER STRUCTURE:        URL PATH:              â”‚  â”‚
  â”‚  â”‚  app/                     /                      â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ page.tsx             â†’ /                   â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ layout.tsx           (root layout)         â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ blog/                                       â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ page.tsx         â†’ /blog               â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ layout.tsx       (blog layout)         â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ authors/                                â”‚  â”‚
  â”‚  â”‚          â””â”€â”€ page.tsx     â†’ /blog/authors       â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  LAYOUT WRAPPING â€” Lá»’NG NHAU:                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  URL: /blog/authors                              â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€ app/layout.tsx (ROOT) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
  â”‚  â”‚  â”‚ <html><body>                               â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”Œâ”€â”€ app/blog/layout.tsx â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  <nav>Blog Navigation</nav>           â”‚  â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€ app/blog/authors/page.tsx â”€â”€â”€â”€â”  â”‚  â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  <h1>Authors List</h1>           â”‚  â”‚  â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  <ul>...</ul>                    â”‚  â”‚  â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ </body></html>                             â”‚  â”‚  â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ Layout á»Ÿ Má»–I Cáº¤P wrap children!             â”‚  â”‚
  â”‚  â”‚  â†’ Recursive nesting!                            â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§6. Dynamic Routes â€” Tham Sá»‘ Äá»™ng!

```
  DYNAMIC ROUTES â€” [segment], [...segment], [[...segment]]:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  3 LOáº I DYNAMIC SEGMENTS:                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â‘  [segment] â€” SINGLE PARAM:                    â”‚  â”‚
  â”‚  â”‚     app/blog/[slug]/page.tsx                     â”‚  â”‚
  â”‚  â”‚     â†’ /blog/my-first-post                       â”‚  â”‚
  â”‚  â”‚     â†’ params = { slug: "my-first-post" }        â”‚  â”‚
  â”‚  â”‚     â†’ Chá»‰ match 1 segment!                     â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â‘¡ [...segment] â€” CATCH-ALL:                    â”‚  â”‚
  â”‚  â”‚     app/shop/[...slug]/page.tsx                  â”‚  â”‚
  â”‚  â”‚     â†’ /shop/clothing                            â”‚  â”‚
  â”‚  â”‚       params = { slug: ["clothing"] }            â”‚  â”‚
  â”‚  â”‚     â†’ /shop/clothing/shirts                     â”‚  â”‚
  â”‚  â”‚       params = { slug: ["clothing","shirts"] }   â”‚  â”‚
  â”‚  â”‚     â†’ Match 1 HOáº¶C NHIá»€U segments!             â”‚  â”‚
  â”‚  â”‚     â†’ âŒ /shop â†’ KHÃ”NG match (cáº§n Ã­t nháº¥t 1)  â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â‘¢ [[...segment]] â€” OPTIONAL CATCH-ALL:         â”‚  â”‚
  â”‚  â”‚     app/docs/[[...slug]]/page.tsx                â”‚  â”‚
  â”‚  â”‚     â†’ /docs                                     â”‚  â”‚
  â”‚  â”‚       params = { slug: undefined }               â”‚  â”‚
  â”‚  â”‚     â†’ /docs/layouts-and-pages                   â”‚  â”‚
  â”‚  â”‚       params = { slug: ["layouts-and-pages"] }   â”‚  â”‚
  â”‚  â”‚     â†’ /docs/api-reference/use-router            â”‚  â”‚
  â”‚  â”‚       params = { slug: ["api-reference",        â”‚  â”‚
  â”‚  â”‚                          "use-router"] }         â”‚  â”‚
  â”‚  â”‚     â†’ Match 0 HOáº¶C NHIá»€U segments!             â”‚  â”‚
  â”‚  â”‚     â†’ âœ… /docs â†’ MATCH (optional!)              â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  SO SÃNH:                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Pattern          /shop  /shop/a  /shop/a/b     â”‚  â”‚
  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€     â”‚  â”‚
  â”‚  â”‚  [slug]           âŒ     âœ…       âŒ             â”‚  â”‚
  â”‚  â”‚  [...slug]        âŒ     âœ…       âœ…             â”‚  â”‚
  â”‚  â”‚  [[...slug]]      âœ…     âœ…       âœ…             â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ [[...slug]] linh hoáº¡t NHáº¤T!                 â”‚  â”‚
  â”‚  â”‚  â†’ [slug] cháº·t cháº½ NHáº¤T!                       â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§7. Route Groups & Private Folders!

```
  ROUTE GROUPS (group) & PRIVATE FOLDERS _folder:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  ROUTE GROUPS â€” (tÃªn):                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Wrap folder trong ():                           â”‚  â”‚
  â”‚  â”‚  â†’ Folder Bá»Š Bá» QUA trong URL!                 â”‚  â”‚
  â”‚  â”‚  â†’ Chá»‰ dÃ¹ng Ä‘á»ƒ Tá»” CHá»¨C code!                   â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  app/                                            â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ (marketing)/                                â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ page.tsx        â†’ /                    â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ about/page.tsx  â†’ /about               â”‚  â”‚
  â”‚  â”‚  â”‚   â””â”€â”€ layout.tsx      (marketing layout)     â”‚  â”‚
  â”‚  â”‚  â”‚                                               â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ (shop)/                                     â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ cart/page.tsx   â†’ /cart                â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ products/page.tsx â†’ /products          â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ layout.tsx      (shop layout)          â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  âš ï¸ (marketing) vÃ  (shop) KHÃ”NG xuáº¥t hiá»‡n      â”‚  â”‚
  â”‚  â”‚     trong URL!                                   â”‚  â”‚
  â”‚  â”‚  âœ… NhÆ°ng CÃ“ THá»‚ cÃ³ layout RIÃŠNG cho má»—i      â”‚  â”‚
  â”‚  â”‚     group!                                       â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ PRIVATE FOLDERS â€” _tÃªn:                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Prefix folder vá»›i _:                            â”‚  â”‚
  â”‚  â”‚  â†’ HOÃ€N TOÃ€N bá»‹ loáº¡i khá»i routing!             â”‚  â”‚
  â”‚  â”‚  â†’ DÃ¹ng cho internal code!                      â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  app/                                            â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ blog/                                       â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ page.tsx             â†’ /blog           â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ _components/         â† PRIVATE!        â”‚  â”‚
  â”‚  â”‚      â”‚   â”œâ”€â”€ Post.tsx         (KHÃ”NG routable)  â”‚  â”‚
  â”‚  â”‚      â”‚   â””â”€â”€ Comment.tsx      (KHÃ”NG routable)  â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ _lib/                â† PRIVATE!        â”‚  â”‚
  â”‚  â”‚          â””â”€â”€ data.ts          (KHÃ”NG routable)  â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Lá»¢I ÃCH:                                       â”‚  â”‚
  â”‚  â”‚  â†’ TÃ¡ch UI logic khá»i routing logic            â”‚  â”‚
  â”‚  â”‚  â†’ Tá»• chá»©c internal files nháº¥t quÃ¡n            â”‚  â”‚
  â”‚  â”‚  â†’ Sort/group files trong code editor          â”‚  â”‚
  â”‚  â”‚  â†’ TrÃ¡nh naming conflicts vá»›i Next.js files    â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  ğŸ’¡ Folder báº¯t Ä‘áº§u _ trong URL tháº­t?           â”‚  â”‚
  â”‚  â”‚  â†’ DÃ¹ng %5F (URL-encoded): %5FfolderName       â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§8. Parallel & Intercepted Routes!

```
  PARALLEL ROUTES @slot & INTERCEPTED ROUTES (.):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  PARALLEL ROUTES â€” @folder:                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  @slot = Named slot rendered bá»Ÿi PARENT layout! â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  app/                                            â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ layout.tsx     â† Nháº­n @analytics, @team   â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ @analytics/                                 â”‚  â”‚
  â”‚  â”‚  â”‚   â””â”€â”€ page.tsx   â† Render trong slot        â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ @team/                                      â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ page.tsx   â† Render trong slot        â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  // app/layout.tsx                               â”‚  â”‚
  â”‚  â”‚  export default function Layout({                â”‚  â”‚
  â”‚  â”‚    children,     // app/page.tsx                 â”‚  â”‚
  â”‚  â”‚    analytics,    // app/@analytics/page.tsx      â”‚  â”‚
  â”‚  â”‚    team         // app/@team/page.tsx            â”‚  â”‚
  â”‚  â”‚  }) {                                            â”‚  â”‚
  â”‚  â”‚    return (                                      â”‚  â”‚
  â”‚  â”‚      <>                                          â”‚  â”‚
  â”‚  â”‚        {children}                                â”‚  â”‚
  â”‚  â”‚        {analytics}                               â”‚  â”‚
  â”‚  â”‚        {team}                                    â”‚  â”‚
  â”‚  â”‚      </>                                         â”‚  â”‚
  â”‚  â”‚    )                                             â”‚  â”‚
  â”‚  â”‚  }                                               â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ MULTIPLE PAGES render Äá»’NG THá»œI!            â”‚  â”‚
  â”‚  â”‚  â†’ Slot-based layouts!                           â”‚  â”‚
  â”‚  â”‚  â†’ @folder KHÃ”NG áº£nh hÆ°á»Ÿng URL!                â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ INTERCEPTED ROUTES â€” (.), (..), (..)(..),  (...): â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Render route KHÃC bÃªn trong layout HIá»†N Táº I   â”‚  â”‚
  â”‚  â”‚  mÃ  KHÃ”NG thay Ä‘á»•i URL!                        â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Pattern          MÃ´ táº£                          â”‚  â”‚
  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚
  â”‚  â”‚  (.)folder        CÃ¹ng cáº¥p (same level)         â”‚  â”‚
  â”‚  â”‚  (..)folder       LÃªn 1 cáº¥p (one level up)      â”‚  â”‚
  â”‚  â”‚  (..)(..)folder   LÃªn 2 cáº¥p (two levels up)     â”‚  â”‚
  â”‚  â”‚  (...)folder      Tá»« ROOT (from root)           â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  USE CASE PHá»” BIáº¾N â€” Modal routing:             â”‚  â”‚
  â”‚  â”‚  â†’ Click áº£nh trong list â†’ má»Ÿ modal (overlay)   â”‚  â”‚
  â”‚  â”‚  â†’ URL Ä‘á»•i thÃ nh /photo/123                    â”‚  â”‚
  â”‚  â”‚  â†’ NhÆ°ng page KHÃ”NG full navigate!             â”‚  â”‚
  â”‚  â”‚  â†’ Share link /photo/123 â†’ render full page    â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§9. Metadata File Conventions!

```
  METADATA FILES â€” SEO, ICONS, SOCIAL SHARING:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  APP ICONS:                                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  FILE              FORMAT       MÃ” Táº¢           â”‚  â”‚
  â”‚  â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€   â”‚  â”‚
  â”‚  â”‚  favicon           .ico          Browser tab     â”‚  â”‚
  â”‚  â”‚  icon              .ico .jpg     App icon        â”‚  â”‚
  â”‚  â”‚                    .png .svg     (nhiá»u size)    â”‚  â”‚
  â”‚  â”‚  icon              .js .ts .tsx  Generate báº±ng   â”‚  â”‚
  â”‚  â”‚                                 code!            â”‚  â”‚
  â”‚  â”‚  apple-icon        .jpg .jpeg    iOS icon        â”‚  â”‚
  â”‚  â”‚                    .png                          â”‚  â”‚
  â”‚  â”‚  apple-icon        .js .ts .tsx  Generate báº±ng   â”‚  â”‚
  â”‚  â”‚                                 code!            â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ OPEN GRAPH & TWITTER IMAGES:                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  opengraph-image   .jpg .png     áº¢nh khi share  â”‚  â”‚
  â”‚  â”‚                    .gif          trÃªn Facebook   â”‚  â”‚
  â”‚  â”‚  opengraph-image   .js .ts .tsx  Generate báº±ng   â”‚  â”‚
  â”‚  â”‚                                 code!            â”‚  â”‚
  â”‚  â”‚  twitter-image     .jpg .png     áº¢nh khi share  â”‚  â”‚
  â”‚  â”‚                    .gif          trÃªn Twitter    â”‚  â”‚
  â”‚  â”‚  twitter-image     .js .ts .tsx  Generate báº±ng   â”‚  â”‚
  â”‚  â”‚                                 code!            â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ CÃ³ thá»ƒ dÃ¹ng IMAGE FILE hoáº·c CODE!           â”‚  â”‚
  â”‚  â”‚  â†’ Code = dynamic! Táº¡o image on-the-fly!       â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ SEO FILES:                                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  sitemap.xml     â†’ Báº£n Ä‘á»“ site cho search      â”‚  â”‚
  â”‚  â”‚                    engines                       â”‚  â”‚
  â”‚  â”‚  sitemap.js/ts   â†’ Generate báº±ng code!          â”‚  â”‚
  â”‚  â”‚                    (dynamic sitemap)             â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  robots.txt      â†’ Rules cho crawlers           â”‚  â”‚
  â”‚  â”‚                    (allow/disallow)              â”‚  â”‚
  â”‚  â”‚  robots.js/ts    â†’ Generate báº±ng code!          â”‚  â”‚
  â”‚  â”‚                    (dynamic rules)              â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ Static (.xml, .txt) HOáº¶C dynamic (.js, .ts) â”‚  â”‚
  â”‚  â”‚  â†’ Next.js há»— trá»£ Cáº¢ HAI!                      â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§10. Component Hierarchy â€” Thá»© Tá»± Render!

```
  COMPONENT HIERARCHY â€” THá»¨ Tá»° RENDER CÃC SPECIAL FILES:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Khi RENDER 1 route segment, Next.js render theo      â”‚
  â”‚  THá»¨ Tá»° SAU (tá»« ngoÃ i vÃ o trong):                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â”Œâ”€â”€ layout.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚  â”‚
  â”‚  â”‚  â”‚                                            â”‚   â”‚  â”‚
  â”‚  â”‚  â”‚  â”Œâ”€â”€ template.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚   â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚                                     â”‚   â”‚   â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€ error.js (ErrorBoundary) â”€â”€â”  â”‚   â”‚   â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚                               â”‚  â”‚   â”‚   â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€ loading.js â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚   (Suspense boundary)   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                         â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€ not-found.js â”€â”€â”   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  (ErrorBoundary) â”‚   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚                  â”‚   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”Œâ”€â”€ page.js â”€â” â”‚   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  (or       â”‚ â”‚   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  nested    â”‚ â”‚   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  layout)   â”‚ â”‚   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚   â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚  â”‚  â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  TÆ¯Æ NG ÄÆ¯Æ NG JSX:                                â”‚  â”‚
  â”‚  â”‚  <Layout>                                        â”‚  â”‚
  â”‚  â”‚    <Template>                                    â”‚  â”‚
  â”‚  â”‚      <ErrorBoundary fallback={<Error/>}>         â”‚  â”‚
  â”‚  â”‚        <Suspense fallback={<Loading/>}>          â”‚  â”‚
  â”‚  â”‚          <ErrorBoundary fallback={<NotFound/>}>  â”‚  â”‚
  â”‚  â”‚            <Page/>                               â”‚  â”‚
  â”‚  â”‚          </ErrorBoundary>                        â”‚  â”‚
  â”‚  â”‚        </Suspense>                               â”‚  â”‚
  â”‚  â”‚      </ErrorBoundary>                            â”‚  â”‚
  â”‚  â”‚    </Template>                                   â”‚  â”‚
  â”‚  â”‚  </Layout>                                       â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  RECURSIVE cho NESTED ROUTES:                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  URL: /blog/authors                              â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  <RootLayout>           â† app/layout.tsx        â”‚  â”‚
  â”‚  â”‚    <RootTemplate>       â† app/template.tsx      â”‚  â”‚
  â”‚  â”‚      <RootError>        â† app/error.tsx         â”‚  â”‚
  â”‚  â”‚        <RootLoading>    â† app/loading.tsx       â”‚  â”‚
  â”‚  â”‚          <BlogLayout>   â† app/blog/layout.tsx   â”‚  â”‚
  â”‚  â”‚            <BlogError>  â† app/blog/error.tsx    â”‚  â”‚
  â”‚  â”‚              <Authors/> â† blog/authors/page.tsx â”‚  â”‚
  â”‚  â”‚            </BlogError>                         â”‚  â”‚
  â”‚  â”‚          </BlogLayout>                          â”‚  â”‚
  â”‚  â”‚        </RootLoading>                           â”‚  â”‚
  â”‚  â”‚      </RootError>                               â”‚  â”‚
  â”‚  â”‚    </RootTemplate>                              â”‚  â”‚
  â”‚  â”‚  </RootLayout>                                  â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ Component cá»§a PARENT wraps CHILD!            â”‚  â”‚
  â”‚  â”‚  â†’ Recursive â†’ xÃ¢y dá»±ng TOÃ€N Bá»˜ tree!         â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§11. Colocation â€” Äáº·t File BÃªn Cáº¡nh Route!

```
  COLOCATION â€” FILE Äáº¶T Cáº NH ROUTE AN TOÃ€N!
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  NGUYÃŠN Táº®C Máº¤U CHá»T:                                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Folder trong app/ â†’ Äá»ŠNH NGHÄ¨A route!         â”‚  â”‚
  â”‚  â”‚  NHÆ¯NG route chá»‰ PUBLIC khi cÃ³ page.tsx         â”‚  â”‚
  â”‚  â”‚  hoáº·c route.ts!                                  â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ Báº N CÃ“ THá»‚ Ä‘áº·t file KHÃC vÃ o folder       â”‚  â”‚
  â”‚  â”‚    mÃ  KHÃ”NG táº¡o route!                           â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  app/                                            â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ blog/                                       â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ page.tsx        â†’ /blog (PUBLIC!)      â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ PostCard.tsx    â†’ KHÃ”NG routable! âœ…    â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ types.ts       â†’ KHÃ”NG routable! âœ…    â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ utils.ts       â†’ KHÃ”NG routable! âœ…    â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ CHá»ˆ page.tsx + route.ts táº¡o public route!   â”‚  â”‚
  â”‚  â”‚  â†’ File khÃ¡c = SAFE Ä‘á»ƒ colocate!                â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  MINH Há»ŒA â€” CHá»ˆ Ná»˜I DUNG page.tsx/route.ts          â”‚
  â”‚  ÄÆ¯á»¢C Gá»¬I Äáº¾N CLIENT:                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  app/dashboard/                                  â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ page.tsx         â† Gá»¬I Ä‘áº¿n client! âœ…     â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ DashChart.tsx    â† KHÃ”NG gá»­i! âŒ (trá»« khi â”‚  â”‚
  â”‚  â”‚  â”‚                      import bá»Ÿi page.tsx)    â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ analytics.ts    â† KHÃ”NG gá»­i!              â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ constants.ts    â† KHÃ”NG gá»­i!              â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ Chá»‰ CONTENT return bá»Ÿi page.tsx má»›i         â”‚  â”‚
  â”‚  â”‚    gá»­i Ä‘áº¿n client!                              â”‚  â”‚
  â”‚  â”‚  â†’ Báº¡n KHÃ”NG Báº®T BUá»˜C pháº£i colocate!          â”‚  â”‚
  â”‚  â”‚  â†’ CÃ³ thá»ƒ giá»¯ files NGOÃ€I app/ náº¿u thÃ­ch!    â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§12. Organizing Your Project â€” 4 Strategies!

```
  4 CHIáº¾N LÆ¯á»¢C Tá»” CHá»¨C PROJECT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  FILES NGOÃ€I app/ (app chá»‰ cho routing):           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  my-project/                                     â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ components/     â† Shared components        â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ Button.tsx                              â”‚  â”‚
  â”‚  â”‚  â”‚   â””â”€â”€ Card.tsx                                â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ lib/            â† Utilities, helpers       â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ api.ts                                  â”‚  â”‚
  â”‚  â”‚  â”‚   â””â”€â”€ utils.ts                                â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ app/            â† CHá»ˆ routing!             â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ layout.tsx                              â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ page.tsx                                â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ blog/                                   â”‚  â”‚
  â”‚  â”‚          â””â”€â”€ page.tsx                             â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ app/ Sáº CH Sáº¼! Chá»‰ routing files!           â”‚  â”‚
  â”‚  â”‚  â†’ Code logic á»Ÿ NGOÃ€I app/!                    â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ FILES BÃŠN TRONG app/ (top-level folders):          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  my-project/                                     â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ app/                                        â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ components/  â† Shared trong app/       â”‚  â”‚
  â”‚  â”‚      â”‚   â”œâ”€â”€ Button.tsx                          â”‚  â”‚
  â”‚  â”‚      â”‚   â””â”€â”€ Card.tsx                            â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ lib/         â† Utilities trong app/    â”‚  â”‚
  â”‚  â”‚      â”‚   â””â”€â”€ utils.ts                            â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ layout.tsx                              â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ page.tsx                                â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ blog/                                   â”‚  â”‚
  â”‚  â”‚          â””â”€â”€ page.tsx                             â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ Code logic BÃŠN TRONG app/                   â”‚  â”‚
  â”‚  â”‚  â†’ Colocated! Má»i thá»© gáº§n nhau!               â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ SPLIT THEO FEATURE/ROUTE:                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  my-project/                                     â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ app/                                        â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ components/  â† GLOBAL shared           â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ lib/         â† GLOBAL utilities        â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ blog/                                   â”‚  â”‚
  â”‚  â”‚      â”‚   â”œâ”€â”€ page.tsx                            â”‚  â”‚
  â”‚  â”‚      â”‚   â”œâ”€â”€ PostCard.tsx  â† Blog-specific      â”‚  â”‚
  â”‚  â”‚      â”‚   â””â”€â”€ utils.ts     â† Blog-specific      â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ dashboard/                              â”‚  â”‚
  â”‚  â”‚          â”œâ”€â”€ page.tsx                             â”‚  â”‚
  â”‚  â”‚          â”œâ”€â”€ Chart.tsx    â† Dashboard-specific  â”‚  â”‚
  â”‚  â”‚          â””â”€â”€ helpers.ts  â† Dashboard-specific   â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ Global code á»Ÿ root app/                      â”‚  â”‚
  â”‚  â”‚  â†’ Specific code á»Ÿ Cáº NH route!                 â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ SRC FOLDER:                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  my-project/                                     â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ src/            â† Application code         â”‚  â”‚
  â”‚  â”‚  â”‚   â””â”€â”€ app/        â† Routing                  â”‚  â”‚
  â”‚  â”‚  â”‚       â”œâ”€â”€ layout.tsx                          â”‚  â”‚
  â”‚  â”‚  â”‚       â””â”€â”€ page.tsx                            â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ next.config.js  â† Config (NGOÃ€I src/)     â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ package.json    â† Config (NGOÃ€I src/)     â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ tsconfig.json   â† Config (NGOÃ€I src/)     â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ TÃCH application code khá»i config files!    â”‚  â”‚
  â”‚  â”‚  â†’ Config á»Ÿ root, code á»Ÿ src/!                 â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ KHÃ”NG CÃ“ "cÃ¡ch Ä‘Ãºng duy nháº¥t"!                   â”‚
  â”‚  â†’ Chá»n strategy PHÃ™ Há»¢P cho team!                   â”‚
  â”‚  â†’ NHáº¤T QUÃN (consistent) xuyÃªn suá»‘t project!        â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§13. Advanced Examples â€” Route Groups Thá»±c Táº¿!

```
  ADVANCED ROUTE GROUP EXAMPLES:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  ORGANIZE ROUTES KHÃ”NG áº¢NH HÆ¯á»NG URL:              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  TRÆ¯á»šC (khÃ´ng cÃ³ route groups):                  â”‚  â”‚
  â”‚  â”‚  app/                                            â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ about/page.tsx      â†’ /about               â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ blog/page.tsx       â†’ /blog                â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ cart/page.tsx       â†’ /cart                â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ products/page.tsx   â†’ /products            â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ layout.tsx          (1 layout DUY NHáº¤T!)   â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  SAU (cÃ³ route groups):                          â”‚  â”‚
  â”‚  â”‚  app/                                            â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ (marketing)/                                â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ about/page.tsx  â†’ /about (SAME URL!)   â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ blog/page.tsx   â†’ /blog  (SAME URL!)   â”‚  â”‚
  â”‚  â”‚  â”‚   â””â”€â”€ layout.tsx      â† Marketing layout!    â”‚  â”‚
  â”‚  â”‚  â”‚                                               â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ (shop)/                                     â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ cart/page.tsx   â†’ /cart  (SAME URL!)   â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ products/page.tsx â†’ /products (SAME!)  â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ layout.tsx      â† Shop layout!         â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ URL KHÃ”NG Äá»”I!                              â”‚  â”‚
  â”‚  â”‚  â†’ NhÆ°ng má»—i group cÃ³ LAYOUT RIÃŠNG!            â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ OPTING SPECIFIC SEGMENTS INTO A LAYOUT:            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Muá»‘n: account vÃ  cart SHARE layout,             â”‚  â”‚
  â”‚  â”‚         checkout KHÃ”NG share!                    â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  app/                                            â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ (shop)/              â† Route group         â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ account/page.tsx â†’ /account            â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ cart/page.tsx    â†’ /cart               â”‚  â”‚
  â”‚  â”‚  â”‚   â””â”€â”€ layout.tsx       â† Shared layout!     â”‚  â”‚
  â”‚  â”‚  â”‚                                               â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ checkout/page.tsx    â†’ /checkout            â”‚  â”‚
  â”‚  â”‚                            (KHÃ”NG dÃ¹ng layout!) â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ account + cart â†’ dÃ¹ng (shop)/layout.tsx!    â”‚  â”‚
  â”‚  â”‚  â†’ checkout â†’ KHÃ”NG dÃ¹ng layout Ä‘Ã³!             â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ LOADING SKELETON CHO SPECIFIC ROUTE:               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  Muá»‘n: loading skeleton CHá»ˆ cho overview,       â”‚  â”‚
  â”‚  â”‚         KHÃ”NG cho toÃ n bá»™ dashboard!            â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  app/dashboard/                                  â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ (overview)/          â† Route group         â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ page.tsx         â†’ /dashboard          â”‚  â”‚
  â”‚  â”‚  â”‚   â””â”€â”€ loading.tsx      â† CHá»ˆ cho overview!  â”‚  â”‚
  â”‚  â”‚  â”‚                                               â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ settings/page.tsx    â†’ /dashboard/settings â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ analytics/page.tsx   â†’ /dashboard/analyticsâ”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â†’ loading.tsx CHá»ˆ apply cho /dashboard!        â”‚  â”‚
  â”‚  â”‚  â†’ /dashboard/settings KHÃ”NG cÃ³ loading!        â”‚  â”‚
  â”‚  â”‚  â†’ URL KHÃ”NG bá»‹ áº£nh hÆ°á»Ÿng!                     â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ MULTIPLE ROOT LAYOUTS:                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  app/                                            â”‚  â”‚
  â”‚  â”‚  â”œâ”€â”€ (marketing)/                                â”‚  â”‚
  â”‚  â”‚  â”‚   â”œâ”€â”€ layout.tsx  â† ROOT layout cho          â”‚  â”‚
  â”‚  â”‚  â”‚   â”‚                  marketing!               â”‚  â”‚
  â”‚  â”‚  â”‚   â”‚                  <html><body>...</body>   â”‚  â”‚
  â”‚  â”‚  â”‚   â””â”€â”€ page.tsx                                â”‚  â”‚
  â”‚  â”‚  â”‚                                               â”‚  â”‚
  â”‚  â”‚  â””â”€â”€ (app)/                                      â”‚  â”‚
  â”‚  â”‚      â”œâ”€â”€ layout.tsx  â† ROOT layout cho app!     â”‚  â”‚
  â”‚  â”‚      â”‚                  <html><body>...</body>   â”‚  â”‚
  â”‚  â”‚      â””â”€â”€ dashboard/page.tsx                      â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  âš ï¸ QUAN TRá»ŒNG:                                 â”‚  â”‚
  â”‚  â”‚  â†’ XÃ³a app/layout.tsx gá»‘c!                     â”‚  â”‚
  â”‚  â”‚  â†’ Má»—i group Cáº¦N <html> vÃ  <body>!            â”‚  â”‚
  â”‚  â”‚  â†’ 2 pháº§n app HOÃ€N TOÃ€N khÃ¡c nhau!            â”‚  â”‚
  â”‚  â”‚  â†’ DÃ¹ng cho: marketing site vs dashboard app   â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§14. Tá»± Viáº¿t â€” Project Structure Analyzer!

> **Má»¥c tiÃªu**: Viáº¿t tay 1 tool phÃ¢n tÃ­ch cáº¥u trÃºc project Next.js, kiá»ƒm tra conventions, phÃ¡t hiá»‡n lá»—i, vÃ  Ä‘Ã¡nh giÃ¡ cháº¥t lÆ°á»£ng tá»• chá»©c code!

```javascript
// ============================================================
// Â§14. PROJECT STRUCTURE ANALYZER â€” Tá»° VIáº¾T Báº°NG TAY!
// KhÃ´ng dÃ¹ng thÆ° viá»‡n! PhÃ¢n tÃ­ch project structure Next.js!
// ============================================================

const ProjectStructureAnalyzer = (function () {
  "use strict";

  // â”€â”€ SPECIAL FILES mÃ  Next.js RECOGNIZE â”€â”€
  const ROUTING_FILES = [
    "layout",
    "page",
    "loading",
    "not-found",
    "error",
    "global-error",
    "route",
    "template",
    "default",
  ];

  const VALID_EXTENSIONS = {
    ui: [".js", ".jsx", ".tsx"], // UI components
    api: [".js", ".ts"], // API routes
    all: [".js", ".jsx", ".tsx", ".ts"], // táº¥t cáº£
  };

  const TOP_LEVEL_FILES = [
    "next.config.js",
    "next.config.mjs",
    "next.config.ts",
    "package.json",
    "tsconfig.json",
    "jsconfig.json",
    "next-env.d.ts",
    ".gitignore",
    ".env",
    ".env.local",
    ".env.development",
    ".env.production",
    "eslint.config.mjs",
    "instrumentation.ts",
    "proxy.ts",
  ];

  const METADATA_FILES = [
    "favicon.ico",
    "icon",
    "apple-icon",
    "opengraph-image",
    "twitter-image",
    "sitemap.xml",
    "sitemap",
    "robots.txt",
    "robots",
  ];

  // â”€â”€ PHÃ‚N TÃCH FOLDER NAME â”€â”€
  function analyzeFolderName(name) {
    var result = {
      name: name,
      type: "regular", // regular | dynamic | catch-all |
      // optional-catch-all | group |
      // private | parallel | intercept
      urlSegment: name, // pháº§n xuáº¥t hiá»‡n trong URL
      affectsUrl: true, // cÃ³ áº£nh hÆ°á»Ÿng URL khÃ´ng?
      paramName: null, // tÃªn param (náº¿u dynamic)
      description: "",
    };

    // Route Group: (name)
    if (/^\(([^)]+)\)$/.test(name)) {
      result.type = "group";
      result.urlSegment = "";
      result.affectsUrl = false;
      result.description = "Route group â€” tá»• chá»©c code, KHÃ”NG áº£nh hÆ°á»Ÿng URL!";
      return result;
    }

    // Private Folder: _name
    if (/^_/.test(name)) {
      result.type = "private";
      result.urlSegment = "";
      result.affectsUrl = false;
      result.description = "Private folder â€” Bá»Š LOáº I KHá»I routing hoÃ n toÃ n!";
      return result;
    }

    // Parallel Route: @name
    if (/^@/.test(name)) {
      result.type = "parallel";
      result.urlSegment = "";
      result.affectsUrl = false;
      result.paramName = name.substring(1);
      result.description =
        "Parallel route slot â€” render Ä‘á»“ng thá»i bá»Ÿi parent layout!";
      return result;
    }

    // Intercepted Route: (.)name, (..)name, (..)(..)name, (...)name
    if (
      /^\(\.\)/.test(name) ||
      /^\(\.\.\)/.test(name) ||
      /^\(\.\.\.\)/.test(name)
    ) {
      result.type = "intercept";
      result.affectsUrl = false;
      var level = name.match(/^(\(\.+\))+/)[0];
      result.description = "Intercepted route â€” level: " + level;
      return result;
    }

    // Optional Catch-All: [[...name]]
    if (/^\[\[\.\.\.([^\]]+)\]\]$/.test(name)) {
      result.type = "optional-catch-all";
      result.paramName = name.match(/^\[\[\.\.\.([^\]]+)\]\]$/)[1];
      result.urlSegment = ":" + result.paramName + "*?";
      result.description = "Optional catch-all â€” match 0 hoáº·c nhiá»u segments!";
      return result;
    }

    // Catch-All: [...name]
    if (/^\[\.\.\.([^\]]+)\]$/.test(name)) {
      result.type = "catch-all";
      result.paramName = name.match(/^\[\.\.\.([^\]]+)\]$/)[1];
      result.urlSegment = ":" + result.paramName + "+";
      result.description = "Catch-all â€” match 1 hoáº·c nhiá»u segments!";
      return result;
    }

    // Dynamic: [name]
    if (/^\[([^\]]+)\]$/.test(name)) {
      result.type = "dynamic";
      result.paramName = name.match(/^\[([^\]]+)\]$/)[1];
      result.urlSegment = ":" + result.paramName;
      result.description = "Dynamic segment â€” match Ä‘Ãºng 1 segment!";
      return result;
    }

    result.description = "Regular folder â€” trá»Ÿ thÃ nh URL segment: /" + name;
    return result;
  }

  // â”€â”€ PHÃ‚N TÃCH FILE NAME â”€â”€
  function analyzeFileName(filename) {
    var parts = filename.split(".");
    var baseName = parts[0];
    var ext = parts.length > 1 ? "." + parts.slice(1).join(".") : "";

    var result = {
      filename: filename,
      baseName: baseName,
      extension: ext,
      isSpecialFile: false,
      fileType: "regular", // routing | metadata | config | regular
      description: "",
    };

    // Routing file?
    if (ROUTING_FILES.indexOf(baseName) !== -1) {
      result.isSpecialFile = true;
      result.fileType = "routing";

      switch (baseName) {
        case "page":
          result.description = "PAGE â€” UI cho route nÃ y (táº¡o public route!)";
          break;
        case "layout":
          result.description =
            "LAYOUT â€” Shared UI wrapper, PERSIST across navigations!";
          break;
        case "template":
          result.description =
            "TEMPLATE â€” Giá»‘ng layout nhÆ°ng RE-CREATE má»—i láº§n navigate!";
          break;
        case "loading":
          result.description =
            "LOADING â€” Suspense boundary, hiá»‡n skeleton khi loading!";
          break;
        case "error":
          result.description = "ERROR â€” Error boundary cho route segment nÃ y!";
          break;
        case "global-error":
          result.description = "GLOBAL ERROR â€” Error boundary cho TOÃ€N Bá»˜ app!";
          break;
        case "not-found":
          result.description = "NOT FOUND â€” 404 UI cho route segment nÃ y!";
          break;
        case "route":
          result.description =
            "ROUTE â€” API endpoint (GET, POST, PUT, DELETE...)!";
          break;
        case "default":
          result.description = "DEFAULT â€” Fallback UI cho parallel routes!";
          break;
      }
      return result;
    }

    // Metadata file?
    for (var i = 0; i < METADATA_FILES.length; i++) {
      if (baseName === METADATA_FILES[i] || filename === METADATA_FILES[i]) {
        result.isSpecialFile = true;
        result.fileType = "metadata";
        result.description =
          "METADATA â€” " + baseName + " cho SEO/social sharing!";
        return result;
      }
    }

    // Top-level config?
    if (TOP_LEVEL_FILES.indexOf(filename) !== -1) {
      result.isSpecialFile = true;
      result.fileType = "config";
      result.description = "CONFIG â€” File cáº¥u hÃ¬nh Next.js!";
      return result;
    }

    result.description = "Regular file â€” KHÃ”NG pháº£i special convention.";
    return result;
  }

  // â”€â”€ KIá»‚M TRA CONFLICTS â”€â”€
  function checkConflicts(files) {
    var issues = [];

    // Check: page + route trong cÃ¹ng segment
    var hasPage = false;
    var hasRoute = false;
    for (var i = 0; i < files.length; i++) {
      var base = files[i].split(".")[0];
      if (base === "page") hasPage = true;
      if (base === "route") hasRoute = true;
    }

    if (hasPage && hasRoute) {
      issues.push({
        severity: "ERROR",
        message:
          "âŒ CONFLICT: page vÃ  route KHÃ”NG THá»‚ cÃ¹ng tá»“n táº¡i trong 1 segment!",
        fix: "Di chuyá»ƒn route.ts sang folder app/api/ riÃªng!",
      });
    }

    // Check: layout + template (há»£p lá»‡ nhÆ°ng cáº§n lÆ°u Ã½)
    var hasLayout = false;
    var hasTemplate = false;
    for (var j = 0; j < files.length; j++) {
      var base2 = files[j].split(".")[0];
      if (base2 === "layout") hasLayout = true;
      if (base2 === "template") hasTemplate = true;
    }

    if (hasLayout && hasTemplate) {
      issues.push({
        severity: "WARNING",
        message:
          "âš ï¸ CÃ³ cáº£ layout VÃ€ template â€” template sáº½ WRAP BÃŠN TRONG layout!",
        fix: "Äáº£m báº£o báº¡n THá»°C Sá»° cáº§n cáº£ hai!",
      });
    }

    return issues;
  }

  // â”€â”€ PHÃ‚N TÃCH COMPONENT HIERARCHY â”€â”€
  function getComponentHierarchy(files) {
    var hierarchy = [];
    var order = ["layout", "template", "error", "loading", "not-found", "page"];

    for (var i = 0; i < order.length; i++) {
      for (var j = 0; j < files.length; j++) {
        if (files[j].split(".")[0] === order[i]) {
          hierarchy.push({
            file: files[j],
            role: order[i],
            nestLevel: i,
            jsxEquivalent: getJsxEquivalent(order[i]),
          });
          break;
        }
      }
    }

    return hierarchy;
  }

  function getJsxEquivalent(role) {
    switch (role) {
      case "layout":
        return "<Layout>{children}</Layout>";
      case "template":
        return "<Template>{children}</Template>";
      case "error":
        return "<ErrorBoundary fallback={<Error/>}>";
      case "loading":
        return "<Suspense fallback={<Loading/>}>";
      case "not-found":
        return "<ErrorBoundary fallback={<NotFound/>}>";
      case "page":
        return "<Page/>";
      default:
        return "<" + role + "/>";
    }
  }

  // â”€â”€ XÃ‚Y Dá»°NG URL PATH Tá»ª FOLDER STRUCTURE â”€â”€
  function buildUrlPath(folderPath) {
    var segments = folderPath.split("/").filter(function (s) {
      return s.length > 0;
    });
    var urlParts = [];

    for (var i = 0; i < segments.length; i++) {
      var analysis = analyzeFolderName(segments[i]);
      if (analysis.affectsUrl && analysis.urlSegment) {
        urlParts.push(analysis.urlSegment);
      }
    }

    return "/" + urlParts.join("/");
  }

  // â”€â”€ ÄÃNH GIÃ CHáº¤T LÆ¯á»¢NG Tá»” CHá»¨C â”€â”€
  function evaluateOrganization(structure) {
    var score = 100;
    var feedback = [];

    // Kiá»ƒm tra: cÃ³ private folders cho internal code?
    if (!structure.hasPrivateFolders && structure.hasColocatedFiles) {
      score -= 10;
      feedback.push("ğŸ’¡ NÃªn dÃ¹ng _folders cho internal components/utils!");
    }

    // Kiá»ƒm tra: cÃ³ route groups cho tá»• chá»©c?
    if (structure.routeCount > 5 && !structure.hasRouteGroups) {
      score -= 15;
      feedback.push(
        "ğŸ’¡ Project lá»›n â€” nÃªn dÃ¹ng route groups (group) Ä‘á»ƒ tá»• chá»©c!",
      );
    }

    // Kiá»ƒm tra: cÃ³ root layout?
    if (!structure.hasRootLayout) {
      score -= 30;
      feedback.push("âŒ THIáº¾U root layout.tsx trong app/!");
    }

    // Kiá»ƒm tra: cÃ³ error boundaries?
    if (!structure.hasErrorBoundary) {
      score -= 10;
      feedback.push("âš ï¸ KhÃ´ng cÃ³ error.tsx â€” app sáº½ crash toÃ n bá»™ khi lá»—i!");
    }

    // Kiá»ƒm tra: cÃ³ loading states?
    if (!structure.hasLoadingState) {
      score -= 5;
      feedback.push("ğŸ’¡ NÃªn cÃ³ loading.tsx cho UX tá»‘t hÆ¡n!");
    }

    // Kiá»ƒm tra conflicts
    if (structure.conflicts && structure.conflicts.length > 0) {
      for (var i = 0; i < structure.conflicts.length; i++) {
        if (structure.conflicts[i].severity === "ERROR") {
          score -= 25;
        } else {
          score -= 5;
        }
      }
    }

    var grade;
    if (score >= 90) grade = "A â€” Excellent!";
    else if (score >= 75) grade = "B â€” Good!";
    else if (score >= 60) grade = "C â€” Needs Improvement!";
    else grade = "D â€” Cáº§n sá»­a NGAY!";

    return {
      score: Math.max(0, score),
      grade: grade,
      feedback: feedback,
    };
  }

  // â”€â”€ PUBLIC API â”€â”€
  return {
    analyzeFolderName: analyzeFolderName,
    analyzeFileName: analyzeFileName,
    checkConflicts: checkConflicts,
    getComponentHierarchy: getComponentHierarchy,
    buildUrlPath: buildUrlPath,
    evaluateOrganization: evaluateOrganization,
  };
})();

// === VÃ Dá»¤ Sá»¬ Dá»¤NG ===

// 1) PhÃ¢n tÃ­ch folder names:
console.log("=== PHÃ‚N TÃCH FOLDER NAMES ===");
var folders = [
  "blog",
  "[slug]",
  "[...path]",
  "[[...slug]]",
  "(marketing)",
  "_components",
  "@analytics",
  "(.)photo",
  "(..)settings",
];

for (var i = 0; i < folders.length; i++) {
  var result = ProjectStructureAnalyzer.analyzeFolderName(folders[i]);
  console.log(folders[i] + ":");
  console.log("  Type:", result.type);
  console.log("  URL:", result.urlSegment || "(khÃ´ng áº£nh hÆ°á»Ÿng URL)");
  console.log("  Desc:", result.description);
  console.log("");
}

// 2) PhÃ¢n tÃ­ch file names:
console.log("=== PHÃ‚N TÃCH FILE NAMES ===");
var files = [
  "page.tsx",
  "layout.tsx",
  "loading.tsx",
  "error.tsx",
  "route.ts",
  "template.tsx",
  "PostCard.tsx",
  "utils.ts",
];

for (var j = 0; j < files.length; j++) {
  var fileResult = ProjectStructureAnalyzer.analyzeFileName(files[j]);
  console.log(files[j] + ":");
  console.log("  Special:", fileResult.isSpecialFile);
  console.log("  Type:", fileResult.fileType);
  console.log("  Desc:", fileResult.description);
  console.log("");
}

// 3) Check conflicts:
console.log("=== CHECK CONFLICTS ===");
var segmentFiles1 = ["page.tsx", "route.ts", "layout.tsx"];
var conflicts = ProjectStructureAnalyzer.checkConflicts(segmentFiles1);
conflicts.forEach(function (c) {
  console.log(c.severity + ":", c.message);
  console.log("  Fix:", c.fix);
});

// 4) Build URL path:
console.log("\n=== BUILD URL PATH ===");
var paths = [
  "app/blog/[slug]",
  "app/(marketing)/about",
  "app/(shop)/cart",
  "app/blog/_components",
  "app/docs/[[...slug]]",
];
paths.forEach(function (p) {
  console.log(p, "â†’", ProjectStructureAnalyzer.buildUrlPath(p));
});

// 5) Component hierarchy:
console.log("\n=== COMPONENT HIERARCHY ===");
var segFiles = [
  "layout.tsx",
  "template.tsx",
  "error.tsx",
  "loading.tsx",
  "page.tsx",
];
var hierarchy = ProjectStructureAnalyzer.getComponentHierarchy(segFiles);
hierarchy.forEach(function (h) {
  var indent = "";
  for (var k = 0; k < h.nestLevel; k++) indent += "  ";
  console.log(indent + h.file + " â†’ " + h.jsxEquivalent);
});
```

**Output:**

```
=== PHÃ‚N TÃCH FOLDER NAMES ===
blog:
  Type: regular
  URL: blog
  Desc: Regular folder â€” trá»Ÿ thÃ nh URL segment: /blog

[slug]:
  Type: dynamic
  URL: :slug
  Desc: Dynamic segment â€” match Ä‘Ãºng 1 segment!

[...path]:
  Type: catch-all
  URL: :path+
  Desc: Catch-all â€” match 1 hoáº·c nhiá»u segments!

[[...slug]]:
  Type: optional-catch-all
  URL: :slug*?
  Desc: Optional catch-all â€” match 0 hoáº·c nhiá»u segments!

(marketing):
  Type: group
  URL: (khÃ´ng áº£nh hÆ°á»Ÿng URL)
  Desc: Route group â€” tá»• chá»©c code, KHÃ”NG áº£nh hÆ°á»Ÿng URL!

_components:
  Type: private
  URL: (khÃ´ng áº£nh hÆ°á»Ÿng URL)
  Desc: Private folder â€” Bá»Š LOáº I KHá»I routing hoÃ n toÃ n!

@analytics:
  Type: parallel
  URL: (khÃ´ng áº£nh hÆ°á»Ÿng URL)
  Desc: Parallel route slot â€” render Ä‘á»“ng thá»i bá»Ÿi parent layout!

=== PHÃ‚N TÃCH FILE NAMES ===
page.tsx:
  Special: true
  Type: routing
  Desc: PAGE â€” UI cho route nÃ y (táº¡o public route!)

layout.tsx:
  Special: true
  Type: routing
  Desc: LAYOUT â€” Shared UI wrapper, PERSIST across navigations!

PostCard.tsx:
  Special: false
  Type: regular
  Desc: Regular file â€” KHÃ”NG pháº£i special convention.

=== CHECK CONFLICTS ===
ERROR: âŒ CONFLICT: page vÃ  route KHÃ”NG THá»‚ cÃ¹ng tá»“n táº¡i
                     trong 1 segment!
  Fix: Di chuyá»ƒn route.ts sang folder app/api/ riÃªng!

=== BUILD URL PATH ===
app/blog/[slug]           â†’ /blog/:slug
app/(marketing)/about     â†’ /about
app/(shop)/cart            â†’ /cart
app/blog/_components       â†’ /blog
app/docs/[[...slug]]       â†’ /docs/:slug*?

=== COMPONENT HIERARCHY ===
layout.tsx â†’ <Layout>{children}</Layout>
  template.tsx â†’ <Template>{children}</Template>
    error.tsx â†’ <ErrorBoundary fallback={<Error/>}>
      loading.tsx â†’ <Suspense fallback={<Loading/>}>
        page.tsx â†’ <Page/>
```

---

## Â§15. Tá»± Viáº¿t â€” Route Tree Builder!

> **Má»¥c tiÃªu**: Viáº¿t tay 1 tool xÃ¢y dá»±ng route tree tá»« cáº¥u trÃºc folder, hiá»ƒn thá»‹ visual tree vÃ  phÃ¢n tÃ­ch!

```javascript
// ============================================================
// Â§15. ROUTE TREE BUILDER â€” Tá»° VIáº¾T Báº°NG TAY!
// XÃ¢y dá»±ng route tree tá»« folder structure!
// ============================================================

var RouteTreeBuilder = (function () {
  "use strict";

  // â”€â”€ Táº O NODE â”€â”€
  function createNode(name, path) {
    var folderInfo = ProjectStructureAnalyzer.analyzeFolderName(name);
    return {
      name: name,
      path: path,
      type: folderInfo.type,
      urlSegment: folderInfo.urlSegment,
      affectsUrl: folderInfo.affectsUrl,
      children: [],
      files: [],
      hasPage: false,
      hasLayout: false,
      hasLoading: false,
      hasError: false,
      hasTemplate: false,
      hasRoute: false,
      isPublicRoute: false,
      fullUrl: "",
    };
  }

  // â”€â”€ THÃŠM FILE VÃ€O NODE â”€â”€
  function addFile(node, filename) {
    var fileInfo = ProjectStructureAnalyzer.analyzeFileName(filename);
    node.files.push(fileInfo);

    var base = filename.split(".")[0];
    if (base === "page") node.hasPage = true;
    if (base === "layout") node.hasLayout = true;
    if (base === "loading") node.hasLoading = true;
    if (base === "error") node.hasError = true;
    if (base === "template") node.hasTemplate = true;
    if (base === "route") node.hasRoute = true;

    node.isPublicRoute = node.hasPage || node.hasRoute;
  }

  // â”€â”€ TÃNH URL PATH â”€â”€
  function computeUrls(node, parentUrl) {
    var currentUrl = parentUrl;
    if (node.affectsUrl && node.urlSegment) {
      currentUrl =
        parentUrl === "/"
          ? "/" + node.urlSegment
          : parentUrl + "/" + node.urlSegment;
    }
    node.fullUrl = currentUrl === "" ? "/" : currentUrl;

    for (var i = 0; i < node.children.length; i++) {
      computeUrls(node.children[i], node.fullUrl);
    }
  }

  // â”€â”€ IN TREE â”€
  function printTree(node, prefix, isLast, depth) {
    if (typeof prefix === "undefined") prefix = "";
    if (typeof isLast === "undefined") isLast = true;
    if (typeof depth === "undefined") depth = 0;

    var connector = depth === 0 ? "" : isLast ? "â””â”€â”€ " : "â”œâ”€â”€ ";
    var icon = getIcon(node);
    var urlInfo = node.isPublicRoute ? " â†’ " + node.fullUrl : "";
    var typeTag =
      node.type !== "regular" ? " [" + node.type.toUpperCase() + "]" : "";

    var line = prefix + connector + icon + " " + node.name + typeTag + urlInfo;
    console.log(line);

    // In files
    var newPrefix = prefix + (depth === 0 ? "" : isLast ? "    " : "â”‚   ");
    for (var i = 0; i < node.files.length; i++) {
      var fileIcon = node.files[i].isSpecialFile ? "âš¡" : "ğŸ“„";
      var fConnector =
        i === node.files.length - 1 && node.children.length === 0
          ? "â””â”€â”€ "
          : "â”œâ”€â”€ ";
      console.log(
        newPrefix +
          fConnector +
          fileIcon +
          " " +
          node.files[i].filename +
          (node.files[i].isSpecialFile ? " â˜…" : ""),
      );
    }

    // In children
    for (var j = 0; j < node.children.length; j++) {
      var childIsLast = j === node.children.length - 1;
      printTree(node.children[j], newPrefix, childIsLast, depth + 1);
    }
  }

  function getIcon(node) {
    switch (node.type) {
      case "group":
        return "ğŸ“‚";
      case "private":
        return "ğŸ”’";
      case "dynamic":
        return "ğŸ”€";
      case "catch-all":
        return "ğŸŒŠ";
      case "optional-catch-all":
        return "ğŸŒ€";
      case "parallel":
        return "âš¡";
      case "intercept":
        return "ğŸ”„";
      default:
        return "ğŸ“";
    }
  }

  // â”€â”€ THá»NG KÃŠ â”€â”€
  function getStats(node) {
    var stats = {
      totalFolders: 0,
      totalFiles: 0,
      publicRoutes: 0,
      dynamicRoutes: 0,
      routeGroups: 0,
      privateFolders: 0,
      parallelSlots: 0,
      interceptedRoutes: 0,
      layoutCount: 0,
      errorBoundaries: 0,
      loadingStates: 0,
    };

    function walk(n) {
      stats.totalFolders++;
      stats.totalFiles += n.files.length;

      if (n.isPublicRoute) stats.publicRoutes++;
      if (
        n.type === "dynamic" ||
        n.type === "catch-all" ||
        n.type === "optional-catch-all"
      )
        stats.dynamicRoutes++;
      if (n.type === "group") stats.routeGroups++;
      if (n.type === "private") stats.privateFolders++;
      if (n.type === "parallel") stats.parallelSlots++;
      if (n.type === "intercept") stats.interceptedRoutes++;
      if (n.hasLayout) stats.layoutCount++;
      if (n.hasError) stats.errorBoundaries++;
      if (n.hasLoading) stats.loadingStates++;

      for (var i = 0; i < n.children.length; i++) {
        walk(n.children[i]);
      }
    }

    walk(node);
    return stats;
  }

  // â”€â”€ GENERATE REPORT â”€â”€
  function generateReport(root) {
    console.log("â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—");
    console.log("â•‘   NEXT.JS PROJECT STRUCTURE REPORT     â•‘");
    console.log("â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•");
    console.log("");

    // Visual tree
    console.log("ğŸ“Š ROUTE TREE:");
    console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
    printTree(root);
    console.log("");

    // Stats
    var stats = getStats(root);
    console.log("ğŸ“ˆ THá»NG KÃŠ:");
    console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
    console.log("  Tá»•ng folders:        " + stats.totalFolders);
    console.log("  Tá»•ng files:          " + stats.totalFiles);
    console.log("  Public routes:       " + stats.publicRoutes);
    console.log("  Dynamic routes:      " + stats.dynamicRoutes);
    console.log("  Route groups:        " + stats.routeGroups);
    console.log("  Private folders:     " + stats.privateFolders);
    console.log("  Parallel slots:      " + stats.parallelSlots);
    console.log("  Intercepted routes:  " + stats.interceptedRoutes);
    console.log("  Layouts:             " + stats.layoutCount);
    console.log("  Error boundaries:    " + stats.errorBoundaries);
    console.log("  Loading states:      " + stats.loadingStates);
    console.log("");

    // Evaluation
    var evaluation = ProjectStructureAnalyzer.evaluateOrganization({
      hasPrivateFolders: stats.privateFolders > 0,
      hasColocatedFiles: stats.totalFiles > stats.publicRoutes * 2,
      routeCount: stats.publicRoutes,
      hasRouteGroups: stats.routeGroups > 0,
      hasRootLayout: root.hasLayout,
      hasErrorBoundary: stats.errorBoundaries > 0,
      hasLoadingState: stats.loadingStates > 0,
      conflicts: ProjectStructureAnalyzer.checkConflicts(
        root.files.map(function (f) {
          return f.filename;
        }),
      ),
    });

    console.log("ğŸ† ÄÃNH GIÃ:");
    console.log("â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€");
    console.log("  Score: " + evaluation.score + "/100");
    console.log("  Grade: " + evaluation.grade);
    if (evaluation.feedback.length > 0) {
      console.log("  Feedback:");
      evaluation.feedback.forEach(function (f) {
        console.log("    " + f);
      });
    }
  }

  return {
    createNode: createNode,
    addFile: addFile,
    computeUrls: computeUrls,
    printTree: printTree,
    getStats: getStats,
    generateReport: generateReport,
  };
})();

// === VÃ Dá»¤ â€” XÃ‚Y Dá»°NG Má»˜T PROJECT THá»°C Táº¾ ===

// Táº¡o root
var root = RouteTreeBuilder.createNode("app", "app");
RouteTreeBuilder.addFile(root, "layout.tsx");
RouteTreeBuilder.addFile(root, "page.tsx");

// Route group: (marketing)
var marketing = RouteTreeBuilder.createNode("(marketing)", "app/(marketing)");
RouteTreeBuilder.addFile(marketing, "layout.tsx");

var about = RouteTreeBuilder.createNode("about", "app/(marketing)/about");
RouteTreeBuilder.addFile(about, "page.tsx");
marketing.children.push(about);

var blog = RouteTreeBuilder.createNode("blog", "app/(marketing)/blog");
RouteTreeBuilder.addFile(blog, "page.tsx");
RouteTreeBuilder.addFile(blog, "loading.tsx");

// Private folder trong blog
var blogComps = RouteTreeBuilder.createNode(
  "_components",
  "app/(marketing)/blog/_components",
);
RouteTreeBuilder.addFile(blogComps, "PostCard.tsx");
RouteTreeBuilder.addFile(blogComps, "PostList.tsx");
blog.children.push(blogComps);

// Dynamic route: [slug]
var blogSlug = RouteTreeBuilder.createNode(
  "[slug]",
  "app/(marketing)/blog/[slug]",
);
RouteTreeBuilder.addFile(blogSlug, "page.tsx");
RouteTreeBuilder.addFile(blogSlug, "error.tsx");
blog.children.push(blogSlug);

marketing.children.push(blog);
root.children.push(marketing);

// Route group: (shop)
var shop = RouteTreeBuilder.createNode("(shop)", "app/(shop)");
RouteTreeBuilder.addFile(shop, "layout.tsx");

var cart = RouteTreeBuilder.createNode("cart", "app/(shop)/cart");
RouteTreeBuilder.addFile(cart, "page.tsx");
shop.children.push(cart);

var products = RouteTreeBuilder.createNode("products", "app/(shop)/products");
RouteTreeBuilder.addFile(products, "page.tsx");
RouteTreeBuilder.addFile(products, "loading.tsx");

var productSlug = RouteTreeBuilder.createNode(
  "[id]",
  "app/(shop)/products/[id]",
);
RouteTreeBuilder.addFile(productSlug, "page.tsx");
products.children.push(productSlug);

shop.children.push(products);
root.children.push(shop);

// API routes
var api = RouteTreeBuilder.createNode("api", "app/api");
var apiProducts = RouteTreeBuilder.createNode("products", "app/api/products");
RouteTreeBuilder.addFile(apiProducts, "route.ts");
api.children.push(apiProducts);
root.children.push(api);

// Compute URLs and generate report!
RouteTreeBuilder.computeUrls(root, "");
RouteTreeBuilder.generateReport(root);
```

**Output:**

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘   NEXT.JS PROJECT STRUCTURE REPORT     â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š ROUTE TREE:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ğŸ“ app â†’ /
â”œâ”€â”€ âš¡ layout.tsx â˜…
â”œâ”€â”€ âš¡ page.tsx â˜…
â”œâ”€â”€ ğŸ“‚ (marketing) [GROUP]
â”‚   â”œâ”€â”€ âš¡ layout.tsx â˜…
â”‚   â”œâ”€â”€ ğŸ“ about â†’ /about
â”‚   â”‚   â””â”€â”€ âš¡ page.tsx â˜…
â”‚   â””â”€â”€ ğŸ“ blog â†’ /blog
â”‚       â”œâ”€â”€ âš¡ page.tsx â˜…
â”‚       â”œâ”€â”€ âš¡ loading.tsx â˜…
â”‚       â”œâ”€â”€ ğŸ”’ _components [PRIVATE]
â”‚       â”‚   â”œâ”€â”€ ğŸ“„ PostCard.tsx
â”‚       â”‚   â””â”€â”€ ğŸ“„ PostList.tsx
â”‚       â””â”€â”€ ğŸ”€ [slug] [DYNAMIC] â†’ /blog/:slug
â”‚           â”œâ”€â”€ âš¡ page.tsx â˜…
â”‚           â””â”€â”€ âš¡ error.tsx â˜…
â”œâ”€â”€ ğŸ“‚ (shop) [GROUP]
â”‚   â”œâ”€â”€ âš¡ layout.tsx â˜…
â”‚   â”œâ”€â”€ ğŸ“ cart â†’ /cart
â”‚   â”‚   â””â”€â”€ âš¡ page.tsx â˜…
â”‚   â””â”€â”€ ğŸ“ products â†’ /products
â”‚       â”œâ”€â”€ âš¡ page.tsx â˜…
â”‚       â”œâ”€â”€ âš¡ loading.tsx â˜…
â”‚       â””â”€â”€ ğŸ”€ [id] [DYNAMIC] â†’ /products/:id
â”‚           â””â”€â”€ âš¡ page.tsx â˜…
â””â”€â”€ ğŸ“ api
    â””â”€â”€ ğŸ“ products â†’ /api/products
        â””â”€â”€ âš¡ route.ts â˜…

ğŸ“ˆ THá»NG KÃŠ:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Tá»•ng folders:        12
  Tá»•ng files:          16
  Public routes:       8
  Dynamic routes:      2
  Route groups:        2
  Private folders:     1
  Parallel slots:      0
  Intercepted routes:  0
  Layouts:             3
  Error boundaries:    1
  Loading states:      2

ğŸ† ÄÃNH GIÃ:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Score: 100/100
  Grade: A â€” Excellent!
```

---

## Â§16. Tá»•ng Káº¿t & CÃ¢u Há»i Luyá»‡n Táº­p!

```
  Tá»”NG Káº¾T â€” NEXT.JS PROJECT STRUCTURE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  FILE-BASED ROUTING:                                â”‚
  â”‚     â†’ Folder = URL segment                            â”‚
  â”‚     â†’ page.tsx = public route                         â”‚
  â”‚     â†’ route.ts = API endpoint                         â”‚
  â”‚     â†’ KHÃ”NG CÃ“ cáº£ hai trong 1 segment!               â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ SPECIAL FILES â€” THá»¨ Tá»° RENDER:                    â”‚
  â”‚     layout â†’ template â†’ error â†’ loading â†’             â”‚
  â”‚     not-found â†’ page                                   â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ FOLDER CONVENTIONS:                                â”‚
  â”‚     [slug]      = dynamic (1 segment)                  â”‚
  â”‚     [...slug]   = catch-all (1+ segments)              â”‚
  â”‚     [[...slug]] = optional catch-all (0+ segments)     â”‚
  â”‚     (group)     = route group (khÃ´ng áº£nh hÆ°á»Ÿng URL)   â”‚
  â”‚     _folder     = private (loáº¡i khá»i routing)         â”‚
  â”‚     @slot       = parallel route                       â”‚
  â”‚     (.)folder   = intercepted route                    â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ COLOCATION:                                        â”‚
  â”‚     â†’ File KHÃC page/route = SAFE Ä‘á»ƒ Ä‘áº·t trong app/  â”‚
  â”‚     â†’ Chá»‰ content return bá»Ÿi page má»›i gá»­i client!   â”‚
  â”‚                                                        â”‚
  â”‚  â‘¤ Tá»” CHá»¨C:                                          â”‚
  â”‚     â†’ 4 strategies: outside app, inside app,           â”‚
  â”‚       split by feature, src folder                     â”‚
  â”‚     â†’ KHÃ”NG CÃ“ cÃ¡ch Ä‘Ãºng duy nháº¥t!                   â”‚
  â”‚     â†’ NHáº¤T QUÃN = quan trá»ng NHáº¤T!                    â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### CÃ¢u Há»i Luyá»‡n Táº­p:

**CÃ¢u 1**: Cho cáº¥u trÃºc folder sau, URL nÃ o sáº½ Ä‘Æ°á»£c táº¡o?

```
app/
â”œâ”€â”€ (marketing)/
â”‚   â”œâ”€â”€ about/page.tsx
â”‚   â””â”€â”€ blog/[slug]/page.tsx
â””â”€â”€ (shop)/
    â””â”€â”€ cart/page.tsx
```

<details>
<summary>ÄÃ¡p Ã¡n</summary>

- `app/(marketing)/about/page.tsx` â†’ `/about`
- `app/(marketing)/blog/[slug]/page.tsx` â†’ `/blog/:slug` (vÃ­ dá»¥: `/blog/hello-world`)
- `app/(shop)/cart/page.tsx` â†’ `/cart`

**Route groups `(marketing)` vÃ  `(shop)` KHÃ”NG xuáº¥t hiá»‡n trong URL!** ChÃºng chá»‰ dÃ¹ng Ä‘á»ƒ tá»• chá»©c code. Má»—i group cÃ³ thá»ƒ cÃ³ layout riÃªng mÃ  khÃ´ng áº£nh hÆ°á»Ÿng URL structure.

</details>

---

**CÃ¢u 2**: Sá»± khÃ¡c biá»‡t giá»¯a `[slug]`, `[...slug]`, vÃ  `[[...slug]]`? Cho vÃ­ dá»¥ URL match cho má»—i loáº¡i.

<details>
<summary>ÄÃ¡p Ã¡n</summary>

| Pattern       | MÃ´ táº£                            | `/shop`                | `/shop/a`          | `/shop/a/b`            |
| ------------- | -------------------------------- | ---------------------- | ------------------ | ---------------------- |
| `[slug]`      | Single param â€” Ä‘Ãºng 1 segment    | âŒ                     | âœ… `{slug: "a"}`   | âŒ                     |
| `[...slug]`   | Catch-all â€” 1+ segments          | âŒ                     | âœ… `{slug: ["a"]}` | âœ… `{slug: ["a","b"]}` |
| `[[...slug]]` | Optional catch-all â€” 0+ segments | âœ… `{slug: undefined}` | âœ… `{slug: ["a"]}` | âœ… `{slug: ["a","b"]}` |

**Key insight**: `[[...slug]]` linh hoáº¡t nháº¥t vÃ¬ match cáº£ khi KHÃ”NG cÃ³ segment (slug = undefined). `[slug]` cháº·t cháº½ nháº¥t â€” chá»‰ match Ä‘Ãºng 1 segment.

</details>

---

**CÃ¢u 3**: Táº¡i sao KHÃ”NG THá»‚ cÃ³ cáº£ `page.tsx` vÃ  `route.ts` trong cÃ¹ng 1 route segment?

<details>
<summary>ÄÃ¡p Ã¡n</summary>

VÃ¬ `page.tsx` vÃ  `route.ts` Ä‘áº¡i diá»‡n cho 2 loáº¡i response KHÃC NHAU:

- **page.tsx** â†’ Render HTML/React UI â†’ tráº£ vá» Response vá»›i `Content-Type: text/html`
- **route.ts** â†’ API handler â†’ tráº£ vá» Response vá»›i JSON/text/etc.

Náº¿u cáº£ hai tá»“n táº¡i, Next.js KHÃ”NG BIáº¾T nÃªn tráº£ vá» UI hay API khi user truy cáº­p URL Ä‘Ã³. ÄÃ¢y lÃ  **ambiguity** â€” 1 URL khÃ´ng thá»ƒ vá»«a lÃ  page vá»«a lÃ  API endpoint.

**Giáº£i phÃ¡p**: Äáº·t API routes trong folder riÃªng, thÆ°á»ng lÃ  `app/api/...`.

</details>

---

**CÃ¢u 4**: Giáº£i thÃ­ch Component Hierarchy khi render route `/blog/my-post`. Cho biáº¿t thá»© tá»± nesting náº¿u cÃ³ cÃ¡c file sau:

```
app/layout.tsx
app/error.tsx
app/blog/layout.tsx
app/blog/loading.tsx
app/blog/[slug]/page.tsx
app/blog/[slug]/error.tsx
```

<details>
<summary>ÄÃ¡p Ã¡n</summary>

Component hierarchy sáº½ render RECURSIVE, tá»« ngoÃ i vÃ o trong:

```jsx
<RootLayout>
  {" "}
  {/* app/layout.tsx */}
  <ErrorBoundary fallback={<RootError />}>
    {" "}
    {/* app/error.tsx */}
    <BlogLayout>
      {" "}
      {/* app/blog/layout.tsx */}
      <Suspense fallback={<BlogLoading />}>
        {" "}
        {/* app/blog/loading.tsx */}
        <ErrorBoundary fallback={<SlugError />}>
          {" "}
          {/* app/blog/[slug]/error.tsx */}
          <SlugPage /> {/* app/blog/[slug]/page.tsx */}
        </ErrorBoundary>
      </Suspense>
    </BlogLayout>
  </ErrorBoundary>
</RootLayout>
```

**Äiá»ƒm quan trá»ng**:

1. Root layout LUÃ”N á»Ÿ ngoÃ i cÃ¹ng
2. Error boundary á»Ÿ app/ báº¯t lá»—i cho TOÃ€N Bá»˜ bÃªn dÆ°á»›i
3. Blog layout wrap blog content
4. Loading á»Ÿ blog/ hiá»‡n skeleton cho blog pages
5. Error á»Ÿ [slug]/ CHá»ˆ báº¯t lá»—i cho page [slug], KHÃ”NG áº£nh hÆ°á»Ÿng blog layout

</details>

---

**CÃ¢u 5**: `layout.tsx` vÃ  `template.tsx` khÃ¡c nhau nhÆ° tháº¿ nÃ o? Khi nÃ o dÃ¹ng `template`?

<details>
<summary>ÄÃ¡p Ã¡n</summary>

|               | `layout.tsx`                                     | `template.tsx`                    |
| ------------- | ------------------------------------------------ | --------------------------------- |
| **Re-render** | KHÃ”NG re-render khi navigate giá»¯a sibling routes | Táº O Má»šI instance má»—i láº§n navigate |
| **State**     | State GIá»®U Láº I                                   | State RESET má»—i láº§n               |
| **DOM**       | DOM giá»¯u nguyÃªn                                  | DOM RECREATED                     |
| **Effects**   | useEffect KHÃ”NG cháº¡y láº¡i                         | useEffect CHáº Y Láº I má»—i láº§n        |

**Khi nÃ o dÃ¹ng template?**

1. **Enter/exit animations**: Cáº§n animation má»—i láº§n navigate
2. **Logging page views**: useEffect ghi log má»—i láº§n vÃ o trang
3. **Per-page forms**: Form cáº§n reset má»—i láº§n
4. **Feature flags**: Cáº§n re-check feature flag má»—i láº§n navigate

**Thá»±c táº¿**: 95% trÆ°á»ng há»£p dÃ¹ng `layout.tsx`. `template.tsx` chá»‰ dÃ¹ng khi Cáº¦N re-create.

</details>

---

**CÃ¢u 6**: Private folder `_components` vÃ  colocation (Ä‘áº·t file cáº¡nh page.tsx) khÃ¡c gÃ¬ nhau? Táº¡i sao cáº§n private folder khi colocation Ä‘Ã£ an toÃ n?

<details>
<summary>ÄÃ¡p Ã¡n</summary>

|                  | Colocation                           | Private Folder `_components`    |
| ---------------- | ------------------------------------ | ------------------------------- |
| **Routing**      | File KHÃ”NG routable (trá»« page/route) | Folder HOÃ€N TOÃ€N bá»‹ loáº¡i        |
| **Convention**   | Máº·c Ä‘á»‹nh safe                        | Explicit marking                |
| **Organization** | Files náº±m cáº¡nh page                  | Files náº±m trong subfolder riÃªng |

**Táº¡i sao cáº§n private folder?**

1. **TrÃ¡nh naming conflicts**: Náº¿u Next.js thÃªm convention má»›i (vÃ­ dá»¥ `middleware.ts`), file báº¡n Ä‘áº·t trÆ°á»›c Ä‘Ã³ cÃ³ thá»ƒ báº¥t ngá» trá»Ÿ thÃ nh special file!
2. **Tá»• chá»©c tá»‘t hÆ¡n**: `_components/`, `_lib/`, `_utils/` rÃµ rÃ ng hÆ¡n Ä‘áº·t táº¥t cáº£ cÃ¹ng level
3. **Editor sorting**: Files private luÃ´n á»Ÿ trÃªn (\_ trÆ°á»›c chá»¯ cÃ¡i)
4. **Team convention**: RÃµ rÃ ng cho team biáº¿t "Ä‘Ã¢y KHÃ”NG pháº£i routing code"

**Best practice**: DÃ¹ng private folders cho cÃ¡c nhÃ³m file lá»›n, colocation cho 1-2 file nhá».

</details>

---

**CÃ¢u 7**: Thiáº¿t káº¿ cáº¥u trÃºc folder cho á»©ng dá»¥ng e-commerce cÃ³:

- Marketing pages (landing, about, blog)
- Shop pages (products, cart, checkout)
- Admin dashboard (riÃªng layout, riÃªng auth)
- API routes cho products vÃ  orders

<details>
<summary>ÄÃ¡p Ã¡n</summary>

```
app/
â”œâ”€â”€ (marketing)/                    â† Route group
â”‚   â”œâ”€â”€ layout.tsx                  â† Marketing layout
â”‚   â”œâ”€â”€ page.tsx                    â†’ / (landing)
â”‚   â”œâ”€â”€ about/page.tsx              â†’ /about
â”‚   â””â”€â”€ blog/
â”‚       â”œâ”€â”€ page.tsx                â†’ /blog
â”‚       â”œâ”€â”€ [slug]/page.tsx         â†’ /blog/:slug
â”‚       â”œâ”€â”€ _components/
â”‚       â”‚   â””â”€â”€ PostCard.tsx
â”‚       â””â”€â”€ _lib/
â”‚           â””â”€â”€ posts.ts
â”‚
â”œâ”€â”€ (shop)/                         â† Route group
â”‚   â”œâ”€â”€ layout.tsx                  â† Shop layout (nav, cart icon)
â”‚   â”œâ”€â”€ products/
â”‚   â”‚   â”œâ”€â”€ page.tsx                â†’ /products
â”‚   â”‚   â”œâ”€â”€ loading.tsx
â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚       â”œâ”€â”€ page.tsx            â†’ /products/:id
â”‚   â”‚       â””â”€â”€ error.tsx
â”‚   â””â”€â”€ (checkout-flow)/            â† Nested group
â”‚       â”œâ”€â”€ cart/page.tsx           â†’ /cart
â”‚       â””â”€â”€ checkout/page.tsx       â†’ /checkout
â”‚
â”œâ”€â”€ (admin)/                        â† Route group
â”‚   â”œâ”€â”€ layout.tsx                  â† Admin layout (riÃªng <html>)
â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ page.tsx                â†’ /dashboard
â”‚   â”‚   â”œâ”€â”€ loading.tsx
â”‚   â”‚   â””â”€â”€ _widgets/
â”‚   â”‚       â”œâ”€â”€ SalesChart.tsx
â”‚   â”‚       â””â”€â”€ OrderTable.tsx
â”‚   â””â”€â”€ orders/
â”‚       â”œâ”€â”€ page.tsx                â†’ /orders
â”‚       â””â”€â”€ [id]/page.tsx           â†’ /orders/:id
â”‚
â””â”€â”€ api/
    â”œâ”€â”€ products/route.ts           â†’ /api/products
    â””â”€â”€ orders/
        â”œâ”€â”€ route.ts                â†’ /api/orders
        â””â”€â”€ [id]/route.ts           â†’ /api/orders/:id
```

**Key decisions**:

- 3 route groups tÃ¡ch biá»‡t marketing, shop, admin
- Má»—i group cÃ³ layout riÃªng
- Private folders cho internal components
- API routes tÃ¡ch riÃªng trong app/api/
- (admin) cÃ³ thá»ƒ cÃ³ root layout riÃªng (xÃ³a app/layout.tsx)

</details>

---

**CÃ¢u 8**: Giáº£i thÃ­ch Intercepted Routes. Cho vÃ­ dá»¥ thá»±c táº¿ vá»›i Instagram-style photo modal.

<details>
<summary>ÄÃ¡p Ã¡n</summary>

**Intercepted Routes** cho phÃ©p render má»™t route KHÃC bÃªn trong layout HIá»†N Táº I mÃ  KHÃ”NG thá»±c hiá»‡n full page navigation.

**VÃ­ dá»¥ Instagram photo modal**:

```
app/
â”œâ”€â”€ layout.tsx
â”œâ”€â”€ page.tsx                       â†’ / (feed)
â”œâ”€â”€ @modal/                        â† Parallel route slot
â”‚   â”œâ”€â”€ default.tsx                â† Fallback (trá»‘ng)
â”‚   â””â”€â”€ (.)photo/[id]/page.tsx    â† Intercept /photo/:id
â”‚                                    trong modal!
â””â”€â”€ photo/
    â””â”€â”€ [id]/
        â””â”€â”€ page.tsx               â† Full page /photo/:id
```

**Luá»“ng hoáº¡t Ä‘á»™ng**:

1. User á»Ÿ feed (`/`) â†’ click vÃ o áº£nh
2. URL Ä‘á»•i: `/photo/123`
3. **NhÆ°ng** vÃ¬ cÃ³ `(.)photo/[id]` â†’ route bá»‹ INTERCEPT!
4. `@modal/(.)photo/[id]/page.tsx` render AS MODAL trÃªn feed!
5. Feed VáºªN hiá»ƒn thá»‹ bÃªn dÆ°á»›i!

**Khi user SHARE link** `/photo/123`:

1. User má»›i truy cáº­p `/photo/123` trá»±c tiáº¿p
2. KhÃ´ng cÃ³ soft navigation â†’ `(.)` KHÃ”NG trigger
3. `app/photo/[id]/page.tsx` render FULL PAGE!

**Pattern `(.)` nghÄ©a lÃ **:

- `(.)photo` = intercept route `photo` á»Ÿ CÃ™NG Cáº¤P
- `(..)photo` = intercept route `photo` á»Ÿ Cáº¤P TRÃŠN
- `(...)photo` = intercept route `photo` tá»« ROOT

ÄÃ¢y lÃ  pattern ráº¥t phá»• biáº¿n cho modals, drawers, vÃ  quick-view panels!

</details>

---

> **ChÃºc báº¡n há»c tá»‘t! ğŸš€**
> Next.js project structure lÃ  FILE-BASED â€” FOLDER táº¡o URL, FILE táº¡o UI!
> Hiá»ƒu conventions â†’ tá»• chá»©c code Sáº CH Sáº¼, SCALABLE, vÃ  Dá»„ MAINTAIN!
