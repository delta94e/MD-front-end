# TCP vs UDP: So SÃ¡nh Chi Tiáº¿t

> TÃ i liá»‡u há»c táº­p vá» sá»± khÃ¡c biá»‡t giá»¯a TCP vÃ  UDP - hai giao thá»©c táº§ng Transport quan trá»ng nháº¥t trong TCP/IP.

---

## Má»¥c Lá»¥c

1. [TCP/IP Network Model](#1-tcpip-network-model)
2. [UDP - User Datagram Protocol](#2-udp---user-datagram-protocol)
3. [TCP - Transmission Control Protocol](#3-tcp---transmission-control-protocol)
4. [So SÃ¡nh TCP vs UDP](#4-so-sÃ¡nh-tcp-vs-udp)
5. [CÃ¡c Giao Thá»©c Cháº¡y TrÃªn TCP/UDP](#5-cÃ¡c-giao-thá»©c-cháº¡y-trÃªn-tcpudp)
6. [CÃ¢u Há»i Phá»ng Váº¥n](#6-cÃ¢u-há»i-phá»ng-váº¥n)

---

## 1. TCP/IP Network Model

> **Protocol lÃ  gÃ¬?** Bá»™ quy táº¯c Ä‘á»ƒ cÃ¡c thiáº¿t bá»‹ giao tiáº¿p vá»›i nhau - vÃ­ dá»¥: ai nÃ³i trÆ°á»›c, dÃ¹ng ngÃ´n ngá»¯ gÃ¬, káº¿t thÃºc tháº¿ nÃ o.

### MÃ´ HÃ¬nh 4 Táº§ng

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4. APPLICATION LAYER (Táº§ng á»¨ng Dá»¥ng)                       â”‚
â”‚     HTTP, FTP, SMTP, DNS, SSH, Telnet...                    â”‚
â”‚     â†’ Cung cáº¥p dá»‹ch vá»¥ cho á»©ng dá»¥ng ngÆ°á»i dÃ¹ng              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  3. TRANSPORT LAYER (Táº§ng Váº­n Chuyá»ƒn)                       â”‚
â”‚     TCP, UDP                                                â”‚
â”‚     â†’ ÄÃ³ng gÃ³i, ghÃ©p láº¡i messages, Ä‘áº£m báº£o truyá»n táº£i       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  2. NETWORK LAYER (Táº§ng Máº¡ng)                               â”‚
â”‚     IP, ICMP, ARP                                           â”‚
â”‚     â†’ Äá»‹nh tuyáº¿n, gá»­i packets Ä‘áº¿n Ä‘Ã­ch                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  1. LINK LAYER (Táº§ng LiÃªn Káº¿t)                              â”‚
â”‚     Ethernet, WiFi                                          â”‚
â”‚     â†’ ÄÃ³ng gÃ³i IP packets, gá»­i/nháº­n frames                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### QuÃ¡ TrÃ¬nh ÄÃ³ng GÃ³i Dá»¯ Liá»‡u

```
Sender                                              Receiver

[Application Data]                                  [Application Data]
       â†“ +App Header                                       â†‘
[Transport: TCP/UDP Header + Data]                  [Transport Layer]
       â†“ +IP Header                                        â†‘
[Network: IP Header + Segment]                      [Network Layer]
       â†“ +Frame Header + Trailer                           â†‘
[Link: Frame Header + Packet + Trailer]  â”€â”€â”€â”€â”€â”€â”€â”€â–º  [Link Layer]
```

---

## 2. UDP - User Datagram Protocol

> **Äá»‹nh nghÄ©a**: UDP lÃ  giao thá»©c **khÃ´ng káº¿t ná»‘i** (connectionless), hoáº¡t Ä‘á»™ng á»Ÿ táº§ng Transport (Layer 4 trong OSI model), náº±m trÃªn IP. UDP chá»‰ Ä‘Æ¡n giáº£n chuyá»ƒn data packets mÃ  **khÃ´ng cung cáº¥p**: phÃ¢n máº£nh gÃ³i tin, ghÃ©p láº¡i gÃ³i tin, hoáº·c sáº¯p xáº¿p thá»© tá»± gÃ³i tin.

### NhÆ°á»£c Äiá»ƒm ChÃ­nh cá»§a UDP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  âš ï¸ KHI Gá»¬I MESSAGE, KHÃ”NG BIáº¾T:                                â”‚
â”‚                                                                 â”‚
â”‚  â€¢ Message cÃ³ Ä‘áº¿n Ä‘Ã­ch khÃ´ng?                                   â”‚
â”‚  â€¢ Message cÃ³ Ä‘áº¿n Ä‘Ãºng thá»© tá»± khÃ´ng?                            â”‚
â”‚  â€¢ Message cÃ³ bá»‹ há»ng khÃ´ng?                                    â”‚
â”‚                                                                 â”‚
â”‚  â†’ "Fire and forget" - Gá»­i Ä‘i vÃ  quÃªn!                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 5 Äáº·c Äiá»ƒm ChÃ­nh Cá»§a UDP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£  CONNECTIONLESS (KhÃ´ng Káº¿t Ná»‘i)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â€¢ KhÃ´ng cáº§n 3-way handshake trÆ°á»›c khi gá»­i                  â”‚
â”‚  â€¢ Muá»‘n gá»­i lÃ  gá»­i ngay!                                    â”‚
â”‚  â€¢ UDP chá»‰ lÃ  "ngÆ°á»i váº­n chuyá»ƒn" - khÃ´ng chia nhá»/ghÃ©p láº¡i  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Chi tiáº¿t luá»“ng xá»­ lÃ½:**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¤ SENDER SIDE (BÃªn Gá»­i):                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Application Layer                                              â”‚
â”‚       â”‚                                                         â”‚
â”‚       â–¼ [Data tá»« app]                                           â”‚
â”‚  Transport Layer (UDP)                                          â”‚
â”‚       â”‚ + ThÃªm UDP Header (8 bytes)                             â”‚
â”‚       â”‚ + ÄÃ¡nh dáº¥u Ä‘Ã¢y lÃ  UDP protocol                          â”‚
â”‚       â–¼                                                         â”‚
â”‚  Network Layer (IP)                                             â”‚
â”‚       â”‚ + ThÃªm IP Header                                        â”‚
â”‚       â–¼                                                         â”‚
â”‚  [Gá»­i Ä‘i] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º    â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ UDP KHÃ”NG chia nhá» data, KHÃ”NG ghÃ©p nhiá»u messages          â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ“¥ RECEIVER SIDE (BÃªn Nháº­n):                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  Network Layer                                                  â”‚
â”‚       â”‚                                                         â”‚
â”‚       â–¼ [Nháº­n packet tá»« máº¡ng]                                   â”‚
â”‚  Transport Layer (UDP)                                          â”‚
â”‚       â”‚ - Gá»¡ IP Header                                          â”‚
â”‚       â”‚ - KHÃ”NG ghÃ©p ná»‘i cÃ¡c packets!                           â”‚
â”‚       â–¼                                                         â”‚
â”‚  Application Layer                                              â”‚
â”‚       â”‚                                                         â”‚
â”‚       â–¼ [Data nguyÃªn báº£n cho app]                               â”‚
â”‚                                                                 â”‚
â”‚  âš ï¸ Má»—i packet gá»­i lÃªn app RIÃŠNG BIá»†T, khÃ´ng gá»™p láº¡i            â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

```

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£  UNICAST, MULTICAST, BROADCAST                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  UDP há»— trá»£:                                                â”‚
â”‚  â€¢ 1-to-1 (Unicast)    - Gá»­i cho 1 ngÆ°á»i                    â”‚
â”‚  â€¢ 1-to-Many (Multicast) - Gá»­i cho nhÃ³m                     â”‚
â”‚  â€¢ 1-to-All (Broadcast) - Gá»­i cho táº¥t cáº£                    â”‚
â”‚  â€¢ Many-to-Many - Nhiá»u bÃªn cÃ¹ng gá»­i/nháº­n                   â”‚
â”‚                                                             â”‚
â”‚  âš¡ TCP chá»‰ há»— trá»£ Unicast (1-to-1)!                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£  MESSAGE-ORIENTED (HÆ°á»›ng Message)                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  UDP giá»¯ nguyÃªn ranh giá»›i cá»§a message:                      â”‚
â”‚                                                             â”‚
â”‚  App gá»­i:   [Msg1] [Msg2] [Msg3]                            â”‚
â”‚  UDP gá»­i:   [Msg1] [Msg2] [Msg3]  (giá»¯ nguyÃªn)              â”‚
â”‚                                                             â”‚
â”‚  âš ï¸ App pháº£i tá»± chá»n kÃ­ch thÆ°á»›c packet phÃ¹ há»£p              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4ï¸âƒ£  UNRELIABLE (KhÃ´ng Tin Cáº­y)                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  âŒ KhÃ´ng káº¿t ná»‘i â†’ khÃ´ng biáº¿t Ä‘á»‘i phÆ°Æ¡ng cÃ³ sáºµn sÃ ng khÃ´ng â”‚
â”‚  âŒ KhÃ´ng backup data â†’ máº¥t lÃ  máº¥t                          â”‚
â”‚  âŒ KhÃ´ng ACK â†’ khÃ´ng biáº¿t Ä‘Ã£ nháº­n thÃ nh cÃ´ng chÆ°a          â”‚
â”‚  âŒ KhÃ´ng congestion control â†’ luÃ´n gá»­i cÃ¹ng tá»‘c Ä‘á»™         â”‚
â”‚                                                             â”‚
â”‚  ğŸ”´ NhÆ°á»£c Ä‘iá»ƒm: Máº¥t gÃ³i khi máº¡ng yáº¿u                        â”‚
â”‚  ğŸŸ¢ Æ¯u Ä‘iá»ƒm: Real-time tá»‘t (video call, game)               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5ï¸âƒ£  LOW OVERHEAD - CHá»ˆ 8 BYTES HEADER                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  UDP Header (8 bytes):                                      â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
â”‚  â”‚ Source Port â”‚ Dest Port   â”‚  (16-bit + 16-bit = 4 bytes) â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚  â”‚ Length (toÃ n bá»™ packet)   â”‚  (16-bit = 2 bytes)          â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤                              â”‚
â”‚  â”‚ Checksum (phÃ¡t hiá»‡n lá»—i)  â”‚  (16-bit = 2 bytes)          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                              â”‚
â”‚                                                             â”‚
â”‚  So sÃ¡nh: TCP header = 20-60 bytes                          â”‚
â”‚           UDP header = 8 bytes â†’ Hiá»‡u quáº£ hÆ¡n!              â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UDP Flow Diagram

```
Sender                                              Receiver
   â”‚                                                   â”‚
   â”‚  [Data] (khÃ´ng cáº§n handshake!)                    â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                                                   â”‚
   â”‚  [Data]                                           â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                                                   â”‚
   â”‚  [Data] â”€â”€â”€â”€â”€â”€â”€X (máº¥t gÃ³i - SENDER KHÃ”NG BIáº¾T!)   â”‚
   â”‚                                                   â”‚
   â”‚  [Data]                                           â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                                                   â”‚
   â”‚  âŒ KhÃ´ng cÃ³ ACK â†’ Sender khÃ´ng biáº¿t máº¥t gÃ³i      â”‚
   â”‚  âŒ KhÃ´ng retry â†’ Packet máº¥t lÃ  máº¥t luÃ´n          â”‚
   â”‚  âŒ KhÃ´ng congestion control â†’ Máº¡ng yáº¿u váº«n gá»­i   â”‚
```

### Táº¡i Sao UDP Váº«n ÄÆ°á»£c DÃ¹ng?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ UDP PHÃ™ Há»¢P KHI:                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  1. Cáº¦N REAL-TIME, Äá»˜ TRá»„ THáº¤P                                  â”‚
â”‚     â€¢ Video conference: Máº¥t 1 frame â†’ chá»‰ lag nháº¹               â”‚
â”‚     â€¢ VoIP: Máº¥t vÃ i packet â†’ giá»ng hÆ¡i "xÆ°á»›c"                   â”‚
â”‚     â€¢ Náº¿u dÃ¹ng TCP â†’ chá» retry â†’ delay lá»›n, khÃ´ng cháº¥p nháº­n     â”‚
â”‚                                                                 â”‚
â”‚  2. KHÃ”NG Cáº¦N Äáº¢M Báº¢O 100%                                      â”‚
â”‚     â€¢ DNS query: Gá»­i láº¡i query má»›i náº¿u khÃ´ng cÃ³ response        â”‚
â”‚     â€¢ Game: Vá»‹ trÃ­ player cÅ© khÃ´ng quan trá»ng, chá»‰ cáº§n vá»‹ trÃ­   â”‚
â”‚       hiá»‡n táº¡i                                                  â”‚
â”‚                                                                 â”‚
â”‚  3. Cáº¦N MULTICAST/BROADCAST                                     â”‚
â”‚     â€¢ IPTV: 1 server gá»­i cho nhiá»u client cÃ¹ng lÃºc              â”‚
â”‚     â€¢ TCP chá»‰ há»— trá»£ 1-1!                                       â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 3. TCP - Transmission Control Protocol

> **Äá»‹nh nghÄ©a**: TCP (Transmission Control Protocol) lÃ  giao thá»©c **hÆ°á»›ng káº¿t ná»‘i** (connection-oriented), **tin cáº­y** (reliable), truyá»n dá»¯ liá»‡u dáº¡ng **byte stream** (nhÆ° nÆ°á»›c cháº£y qua á»‘ng - liÃªn tá»¥c, khÃ´ng ngáº¯t quÃ£ng).

### Táº¡i Sao Cáº§n TCP?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ğŸ¯ KHI Báº N Cáº¦N:                                                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“„ Xem trang web â†’ Pháº£i load Äáº¦Y Äá»¦, ÄÃšNG THá»¨ Tá»°             â”‚
â”‚  ğŸ“§ Äá»c email â†’ Email pháº£i NGUYÃŠN Váº¸N                          â”‚
â”‚  ğŸ“ Download file â†’ File pháº£i HOÃ€N CHá»ˆNH, khÃ´ng thiáº¿u byte     â”‚
â”‚                                                                 â”‚
â”‚  âŒ Máº¥t data hoáº·c sai thá»© tá»± = KHÃ”NG CHáº¤P NHáº¬N ÄÆ¯á»¢C            â”‚
â”‚  âœ… TCP giáº£i quyáº¿t váº¥n Ä‘á» nÃ y!                                  â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 6 Äáº·c Äiá»ƒm ChÃ­nh Cá»§a TCP

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  1ï¸âƒ£  CONNECTION-ORIENTED (HÆ°á»›ng Káº¿t Ná»‘i)                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  3-Way Handshake TRÆ¯á»šC KHI gá»­i data:                        â”‚
â”‚                                                             â”‚
â”‚  Client â”€â”€â”€â”€ SYN â”€â”€â”€â”€â–º Server                               â”‚
â”‚  Client â—„â”€ SYN+ACK â”€â”€â”€ Server                               â”‚
â”‚  Client â”€â”€â”€â”€ ACK â”€â”€â”€â”€â–º Server                               â”‚
â”‚                                                             â”‚
â”‚  â†’ Thiáº¿t láº­p káº¿t ná»‘i = Ná»n táº£ng cho truyá»n tin cáº­y          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  2ï¸âƒ£  UNICAST ONLY (Chá»‰ 1-to-1)                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  TCP connection chá»‰ cÃ³ thá»ƒ giá»¯a 2 endpoints:                â”‚
â”‚                                                             â”‚
â”‚  âœ… Client â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â†’ Server  (Point-to-point)            â”‚
â”‚                                                             â”‚
â”‚  âŒ KhÃ´ng há»— trá»£ Multicast                                  â”‚
â”‚  âŒ KhÃ´ng há»— trá»£ Broadcast                                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  3ï¸âƒ£  BYTE STREAM (Luá»“ng Byte)                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  TCP truyá»n nhÆ° dÃ²ng nÆ°á»›c cháº£y, KHÃ”NG giá»¯ ranh giá»›i:        â”‚
â”‚                                                             â”‚
â”‚  App gá»­i:   [Msg1] [Msg2] [Msg3]                            â”‚
â”‚  TCP gá»­i:   [Msg1Msg2M] [sg3] (cÃ³ thá»ƒ gá»™p/tÃ¡ch)             â”‚
â”‚                                                             â”‚
â”‚  â†’ App pháº£i tá»± xÃ¡c Ä‘á»‹nh ranh giá»›i message                   â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  4ï¸âƒ£  RELIABLE TRANSMISSION (Truyá»n Tin Cáº­y)                 â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  TCP Ä‘áº£m báº£o:                                               â”‚
â”‚  âœ… ÄÃºng thá»© tá»± (Sequence Numbers)                          â”‚
â”‚  âœ… KhÃ´ng máº¥t gÃ³i (ACK + Retransmit)                        â”‚
â”‚  âœ… KhÃ´ng trÃ¹ng láº·p (Duplicate detection)                   â”‚
â”‚  âœ… KhÃ´ng lá»—i bit (Checksum)                                â”‚
â”‚                                                             â”‚
â”‚  Sender â”€â”€[Data]â”€â”€â–º Receiver                                â”‚
â”‚  Sender â—„â”€â”€[ACK]â”€â”€â”€ Receiver                                â”‚
â”‚  (Náº¿u khÃ´ng cÃ³ ACK trong RTT â†’ gá»­i láº¡i)                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  5ï¸âƒ£  CONGESTION CONTROL (Kiá»ƒm SoÃ¡t Táº¯c Ngháº½n)              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Khi máº¡ng táº¯c ngháº½n, TCP tá»± Ä‘á»™ng:                           â”‚
â”‚  â€¢ Giáº£m tá»‘c Ä‘á»™ gá»­i                                          â”‚
â”‚  â€¢ Giáº£m lÆ°á»£ng data Ä‘Æ°a vÃ o máº¡ng                             â”‚
â”‚                                                             â”‚
â”‚  Algorithms: Slow Start, Congestion Avoidance, Fast Retransmitâ”‚
â”‚                                                             â”‚
â”‚  UDP: KhÃ´ng cÃ³! LuÃ´n gá»­i cÃ¹ng tá»‘c Ä‘á»™ â†’ cÃ³ thá»ƒ máº¥t gÃ³i       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  6ï¸âƒ£  FULL-DUPLEX (Hai Chiá»u Äá»“ng Thá»i)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  Cáº£ hai bÃªn cÃ³ thá»ƒ gá»­i/nháº­n cÃ¹ng lÃºc:                       â”‚
â”‚                                                             â”‚
â”‚  Client â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â–º Server                         â”‚
â”‚  Client â—„â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Server                         â”‚
â”‚                                                             â”‚
â”‚  Má»—i bÃªn cÃ³ buffer Ä‘á»ƒ lÆ°u data táº¡m                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TCP Three-Way Handshake (Chi Tiáº¿t)

```
Client                                          Server
   â”‚                                               â”‚
   â”‚           Tráº¡ng thÃ¡i: CLOSED                  â”‚ Tráº¡ng thÃ¡i: LISTEN
   â”‚                                               â”‚ (Server Ä‘ang láº¯ng nghe)
   â”‚                                               â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€ 1. SYN (seq=x) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
   â”‚  "TÃ´i muá»‘n káº¿t ná»‘i, seq cá»§a tÃ´i báº¯t Ä‘áº§u tá»« x" â”‚
   â”‚           Tráº¡ng thÃ¡i: SYN_SENT                â”‚
   â”‚                                               â”‚
   â”‚ â—„â”€â”€â”€â”€â”€â”€ 2. SYN+ACK (seq=y, ack=x+1) â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚  "OK, seq cá»§a tÃ´i lÃ  y, tÃ´i nháº­n Ä‘Æ°á»£c seq x"  â”‚ Tráº¡ng thÃ¡i: SYN_RECEIVED
   â”‚                                               â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€ 3. ACK (ack=y+1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚  "TÃ´i nháº­n Ä‘Æ°á»£c seq y cá»§a báº¡n"                â”‚
   â”‚           Tráº¡ng thÃ¡i: ESTABLISHED             â”‚ Tráº¡ng thÃ¡i: ESTABLISHED
   â”‚                                               â”‚
   â”‚ â•â•â•â•â•â•â•â•â•â• Káº¿t ná»‘i thiáº¿t láº­p xong! â•â•â•â•â•â•â•â•â•â•â•â”‚
```

**Táº¡i sao cáº§n 3 bÆ°á»›c, khÃ´ng pháº£i 2?**

> Äá»ƒ **trÃ¡nh káº¿t ná»‘i sai lá»‡ch**: Náº¿u chá»‰ cÃ³ 2 bÆ°á»›c, server cÃ³ thá»ƒ nháº­n Ä‘Æ°á»£c SYN cÅ© (tá»« connection trÆ°á»›c Ä‘Ã£ timeout) vÃ  táº¡o káº¿t ná»‘i sai. BÆ°á»›c 3 xÃ¡c nháº­n client váº«n cÃ²n muá»‘n káº¿t ná»‘i.

### TCP Four-Way Handshake - ÄÃ³ng Káº¿t Ná»‘i (Chi Tiáº¿t)

```
Client (Active Close)                           Server (Passive Close)
   â”‚                                               â”‚
   â”‚           Tráº¡ng thÃ¡i: ESTABLISHED             â”‚ Tráº¡ng thÃ¡i: ESTABLISHED
   â”‚                                               â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€ 1. FIN (seq=u) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º â”‚
   â”‚  "TÃ´i khÃ´ng cÃ²n data Ä‘á»ƒ gá»­i, muá»‘n Ä‘Ã³ng"       â”‚
   â”‚           Tráº¡ng thÃ¡i: FIN-WAIT-1              â”‚
   â”‚                                               â”‚
   â”‚ â—„â”€â”€â”€â”€â”€â”€ 2. ACK (ack=u+1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚
   â”‚  "OK, tÃ´i biáº¿t báº¡n muá»‘n Ä‘Ã³ng"                 â”‚ Tráº¡ng thÃ¡i: CLOSE-WAIT
   â”‚           Tráº¡ng thÃ¡i: FIN-WAIT-2              â”‚
   â”‚                                               â”‚
   â”‚  [Server cÃ³ thá»ƒ tiáº¿p tá»¥c gá»­i data cÃ²n láº¡i]    â”‚
   â”‚                                               â”‚
   â”‚ â—„â”€â”€â”€â”€â”€â”€ 3. FIN (seq=w) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€  â”‚
   â”‚  "TÃ´i cÅ©ng khÃ´ng cÃ²n data, Ä‘Ã³ng káº¿t ná»‘i"      â”‚ Tráº¡ng thÃ¡i: LAST-ACK
   â”‚                                               â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€ 4. ACK (ack=w+1) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚  "OK, xÃ¡c nháº­n"                               â”‚ Tráº¡ng thÃ¡i: CLOSED
   â”‚           Tráº¡ng thÃ¡i: TIME-WAIT               â”‚
   â”‚                                               â”‚
   â”‚  [Chá» 2*MSL = ~4 phÃºt]                        â”‚
   â”‚           Tráº¡ng thÃ¡i: CLOSED                  â”‚
```

**Táº¡i sao cáº§n 4 bÆ°á»›c, khÃ´ng pháº£i 3?**

> TCP lÃ  **full-duplex** (hai chiá»u Ä‘á»™c láº­p). Khi client gá»­i FIN, nÃ³ chá»‰ Ä‘Ã³ng chiá»u tá»« clientâ†’server. Server váº«n cÃ³ thá»ƒ gá»­i data tiáº¿p! Chá»‰ khi server cÅ©ng gá»­i FIN thÃ¬ má»›i Ä‘Ã³ng hoÃ n toÃ n.

**TIME-WAIT lÃ  gÃ¬? Táº¡i sao chá» 2\*MSL?**

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  MSL = Maximum Segment Lifetime (thá»i gian sá»‘ng tá»‘i Ä‘a cá»§a      â”‚
â”‚        packet trong máº¡ng, thÆ°á»ng = 2 phÃºt)                      â”‚
â”‚                                                                 â”‚
â”‚  2*MSL = 4 phÃºt Ä‘á»ƒ:                                             â”‚
â”‚  1. Äáº£m báº£o ACK cuá»‘i cÃ¹ng Ä‘áº¿n Ä‘Æ°á»£c server                       â”‚
â”‚     (náº¿u máº¥t â†’ cÃ²n thá»i gian gá»­i láº¡i)                           â”‚
â”‚  2. Äáº£m báº£o packets cÅ© trong máº¡ng háº¿t háº¡n trÆ°á»›c khi             â”‚
â”‚     tÃ¡i sá»­ dá»¥ng port (trÃ¡nh nháº§m láº«n vá»›i connection má»›i)        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### TCP Header (20-60 bytes)

```
 0                   1                   2                   3
 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1 2 3 4 5 6 7 8 9 0 1
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       Source Port         â”‚         Destination Port          â”‚ 4 bytes
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                     Sequence Number                           â”‚ 4 bytes
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                  Acknowledgment Number                        â”‚ 4 bytes
â”œâ”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚Offset â”‚Reservedâ”‚  Flags    â”‚            Window Size            â”‚ 4 bytes
â”œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚        Checksum           â”‚         Urgent Pointer            â”‚ 4 bytes
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                    Options (náº¿u cÃ³)                           â”‚ 0-40 bytes
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**Giáº£i thÃ­ch cÃ¡c field quan trá»ng:**

| Field                     | Giáº£i ThÃ­ch                                          |
| ------------------------- | --------------------------------------------------- |
| **Sequence Number**       | Vá»‹ trÃ­ byte Ä‘áº§u tiÃªn trong segment                  |
| **Acknowledgment Number** | Byte tiáº¿p theo mÃ  receiver mong Ä‘á»£i                 |
| **Window Size**           | Bao nhiÃªu bytes receiver cÃ³ thá»ƒ nháº­n (flow control) |
| **Flags**                 | SYN, ACK, FIN, RST, PSH, URG                        |
| **Checksum**              | PhÃ¡t hiá»‡n lá»—i bit trong header vÃ  data              |

### Reliable Transmission - CÆ¡ Cháº¿ Äáº£m Báº£o Tin Cáº­y

```
Sender                                          Receiver
   â”‚                                               â”‚
   â”‚  [Segment 1, seq=0]                           â”‚
   â”‚  LÆ°u vÃ o buffer + báº­t timer                   â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                                               â”‚ Kiá»ƒm tra:
   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ACK (ack=100) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚ âœ… CRC OK
   â”‚  Nháº­n ACK â†’ xÃ³a buffer, dá»«ng timer            â”‚ âœ… Gá»­i lÃªn app
   â”‚                                               â”‚
   â”‚  [Segment 2, seq=100]                         â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€X (máº¥t gÃ³i!)                    â”‚
   â”‚                                               â”‚
   â”‚  [Timer háº¿t háº¡n, khÃ´ng cÃ³ ACK]                â”‚
   â”‚  â†’ RETRANSMIT!                                â”‚
   â”‚                                               â”‚
   â”‚  [Segment 2, seq=100] (gá»­i láº¡i)               â”‚
   â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–ºâ”‚
   â”‚                                               â”‚
   â”‚ â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ACK (ack=200) â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
   â”‚                                               â”‚

RTT = Round-Trip Time (thá»i gian gá»­i + nháº­n ACK)
Náº¿u khÃ´ng cÃ³ ACK trong RTT â†’ timeout â†’ retransmit
```

---

## 4. So SÃ¡nh TCP vs UDP

### Báº£ng So SÃ¡nh Chi Tiáº¿t

| Äáº·c Äiá»ƒm               | UDP                              | TCP                                      |
| ---------------------- | -------------------------------- | ---------------------------------------- |
| **Káº¿t ná»‘i**            | âŒ Connectionless                | âœ… Connection-oriented (3-way handshake) |
| **Tin cáº­y**            | âŒ Unreliable                    | âœ… Reliable (ACK, retransmit)            |
| **Thá»© tá»±**             | âŒ KhÃ´ng Ä‘áº£m báº£o                 | âœ… Äáº£m báº£o (Sequence Numbers)            |
| **Kiá»ƒu truyá»n**        | 1-1, 1-N, N-N, N-1               | Chá»‰ 1-1 (Unicast)                        |
| **Dáº¡ng dá»¯ liá»‡u**       | Message-oriented (giá»¯ ranh giá»›i) | Byte stream (khÃ´ng giá»¯ ranh giá»›i)        |
| **Header size**        | 8 bytes                          | 20-60 bytes                              |
| **Congestion control** | âŒ KhÃ´ng cÃ³                      | âœ… CÃ³                                    |
| **Flow control**       | âŒ KhÃ´ng cÃ³                      | âœ… CÃ³ (Window size)                      |
| **Tá»‘c Ä‘á»™**             | âš¡ Nhanh hÆ¡n                     | ğŸ¢ Cháº­m hÆ¡n (do overhead)                |
| **Real-time**          | âœ… Tá»‘t                           | âŒ KhÃ´ng phÃ¹ há»£p                         |

### So SÃ¡nh Trá»±c Quan

```
                    UDP                          TCP
                    â•â•â•                          â•â•â•

Káº¿t ná»‘i:       Gá»­i ngay!                   Handshake â†’ Gá»­i â†’ Close
               â”€â”€â”€â”€â”€â”€â”€â”€â”€â–º                  â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”¬â”€â”€â”¬â”€â”€
                                             SYN ACK DATA    FIN ACK

Header:        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”                  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
               â”‚ 8 bytesâ”‚                  â”‚      20-60 bytes       â”‚
               â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

Máº¥t gÃ³i:       Packet â”€â”€Xâ†’ Máº¥t luÃ´n!       Packet â”€â”€Xâ†’ ACK timeout â†’ Retry

Tá»‘c Ä‘á»™:        â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Nhanh          â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Cháº­m hÆ¡n

Real-time:     â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ Tá»‘t            â–ˆâ–ˆâ–ˆâ–ˆ KhÃ´ng tá»‘t
```

### Khi NÃ o DÃ¹ng UDP vs TCP?

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CHá»ŒN UDP KHI:                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  âš¡ Cáº§n real-time, Ä‘á»™ trá»… tháº¥p                                  â”‚
â”‚  ğŸ“¹ Video call, voice call, live streaming                      â”‚
â”‚  ğŸ® Online gaming                                               â”‚
â”‚  ğŸ“¡ DNS queries (nhá», Ä‘Æ¡n giáº£n)                                 â”‚
â”‚  ğŸ“º IPTV, video streaming                                       â”‚
â”‚  ğŸŒ IoT vá»›i messages nhá», thÆ°á»ng xuyÃªn                          â”‚
â”‚                                                                 â”‚
â”‚  Cháº¥p nháº­n: Máº¥t vÃ i packet khÃ´ng quan trá»ng                     â”‚
â”‚             (video lag 1 frame OK, máº¥t 1 email KHÃ”NG OK)        â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              CHá»ŒN TCP KHI:                                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                                 â”‚
â”‚  ğŸ“ File transfer (FTP) - khÃ´ng Ä‘Æ°á»£c máº¥t byte nÃ o              â”‚
â”‚  ğŸ“§ Email (SMTP, POP3, IMAP) - email pháº£i Ä‘áº§y Ä‘á»§               â”‚
â”‚  ğŸŒ Web browsing (HTTP/HTTPS) - trang web pháº£i load Ä‘Ãºng       â”‚
â”‚  ğŸ” SSH, Telnet - commands pháº£i Ä‘áº¿n Ä‘Ãºng thá»© tá»±                â”‚
â”‚  ğŸ’³ Banking, e-commerce - transaction pháº£i chÃ­nh xÃ¡c           â”‚
â”‚                                                                 â”‚
â”‚  Æ¯u tiÃªn: Äá»™ chÃ­nh xÃ¡c > Tá»‘c Ä‘á»™                                 â”‚
â”‚                                                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 5. CÃ¡c Giao Thá»©c Cháº¡y TrÃªn TCP/UDP

### Chá»‰ Cháº¡y TrÃªn TCP

| Protocol | TÃªn Äáº§y Äá»§                       | Má»¥c ÄÃ­ch                    |
| -------- | -------------------------------- | --------------------------- |
| HTTP     | HyperText Transfer Protocol      | Web browsing                |
| HTTPS    | HTTP Secure                      | Web browsing (mÃ£ hÃ³a)       |
| FTP      | File Transfer Protocol           | Truyá»n file                 |
| SMTP     | Simple Mail Transfer Protocol    | Gá»­i email                   |
| POP3     | Post Office Protocol v3          | Nháº­n email                  |
| IMAP     | Internet Message Access Protocol | Äá»c email                   |
| SSH      | Secure Shell                     | Remote login (mÃ£ hÃ³a)       |
| Telnet   | Teletype Network                 | Remote login (khÃ´ng mÃ£ hÃ³a) |

### Chá»‰ Cháº¡y TrÃªn UDP

| Protocol | TÃªn Äáº§y Äá»§                     | Má»¥c ÄÃ­ch                       |
| -------- | ------------------------------ | ------------------------------ |
| BOOTP    | Bootstrap Protocol             | Khá»Ÿi Ä‘á»™ng thiáº¿t bá»‹ khÃ´ng á»• Ä‘Ä©a |
| NTP      | Network Time Protocol          | Äá»“ng bá»™ thá»i gian              |
| TFTP     | Trivial File Transfer Protocol | Truyá»n file Ä‘Æ¡n giáº£n           |
| RTP      | Real-time Transport Protocol   | Video/Audio streaming          |

### Cháº¡y TrÃªn Cáº£ TCP vÃ  UDP

| Protocol | TCP Port | UDP Port | Má»¥c ÄÃ­ch           |
| -------- | -------- | -------- | ------------------ |
| DNS      | 53       | 53       | PhÃ¢n giáº£i tÃªn miá»n |
| DHCP     | 67, 68   | 67, 68   | Cáº¥p IP Ä‘á»™ng        |
| SNMP     | 161, 162 | 161, 162 | Quáº£n lÃ½ máº¡ng       |

```
ğŸ“Œ DNS thÆ°á»ng dÃ¹ng UDP (nhanh, query nhá»)
   NhÆ°ng dÃ¹ng TCP khi response > 512 bytes (zone transfer)
```

---

## 6. CÃ¢u Há»i Phá»ng Váº¥n

### Quick Reference

```
TCP:                              UDP:
â€¢ Connection-oriented             â€¢ Connectionless
â€¢ Reliable (ACK, retransmit)      â€¢ Unreliable (best effort)
â€¢ Byte stream                     â€¢ Message-oriented
â€¢ Unicast only                    â€¢ Unicast, Multicast, Broadcast
â€¢ 20-60 bytes header              â€¢ 8 bytes header
â€¢ Congestion control              â€¢ No congestion control
â€¢ Slow, accurate                  â€¢ Fast, real-time
```

### CÃ¢u Há»i ThÆ°á»ng Gáº·p

**1. Sá»± khÃ¡c biá»‡t chÃ­nh giá»¯a TCP vÃ  UDP?**

> - **Káº¿t ná»‘i**: TCP cáº§n 3-way handshake, UDP khÃ´ng cáº§n
> - **Tin cáº­y**: TCP Ä‘áº£m báº£o (ACK + retry), UDP khÃ´ng
> - **Thá»© tá»±**: TCP Ä‘áº£m báº£o sequence, UDP khÃ´ng
> - **Overhead**: TCP 20-60 bytes, UDP chá»‰ 8 bytes
> - **Tá»‘c Ä‘á»™**: UDP nhanh hÆ¡n do Ã­t overhead

**2. Táº¡i sao UDP nhanh hÆ¡n TCP?**

> - KhÃ´ng cáº§n handshake (tiáº¿t kiá»‡m 1 RTT)
> - Header nhá» hÆ¡n (8 vs 20-60 bytes)
> - KhÃ´ng chá» ACK, khÃ´ng retry
> - KhÃ´ng cÃ³ congestion control

**3. Khi nÃ o dÃ¹ng UDP thay vÃ¬ TCP?**

> - Khi cáº§n **real-time**: video call, gaming, live streaming
> - Khi **máº¥t vÃ i packet khÃ´ng quan trá»ng**: VoIP cÃ³ thá»ƒ bá»‹ lag nháº¹
> - Khi cáº§n **multicast/broadcast**: TCP chá»‰ há»— trá»£ unicast
> - Khi **packet nhá», Ä‘Æ¡n giáº£n**: DNS queries

**4. HTTP cháº¡y trÃªn TCP hay UDP? Táº¡i sao?**

> HTTP cháº¡y trÃªn **TCP** vÃ¬:
>
> - Web page pháº£i load **Ä‘áº§y Ä‘á»§, Ä‘Ãºng thá»© tá»±**
> - Máº¥t 1 byte â†’ trang web bá»‹ há»ng
> - Äá»™ tin cáº­y quan trá»ng hÆ¡n tá»‘c Ä‘á»™

**5. DNS dÃ¹ng TCP hay UDP?**

> **Cáº£ hai!**
>
> - UDP cho queries thÃ´ng thÆ°á»ng (nhanh, < 512 bytes)
> - TCP cho responses lá»›n hoáº·c zone transfers

**6. Video streaming dÃ¹ng gÃ¬?**

> - **UDP** (hoáº·c RTP over UDP) cho live streaming
> - Máº¥t vÃ i frame â†’ chá»‰ lag nháº¹
> - Náº¿u dÃ¹ng TCP â†’ buffer, delay lá»›n
>
> NhÆ°ng **Netflix/YouTube dÃ¹ng TCP (HTTP)** vÃ¬:
>
> - CÃ³ thá»ƒ buffer trÆ°á»›c
> - Cáº§n DRM protection
> - HTTP dá»… qua firewall

---

## Checklist Há»c Táº­p

- [ ] Hiá»ƒu TCP/IP 4-layer model
- [ ] Liá»‡t kÃª Ä‘Æ°á»£c 5 Ä‘áº·c Ä‘iá»ƒm cá»§a UDP
- [ ] Liá»‡t kÃª Ä‘Æ°á»£c 6 Ä‘áº·c Ä‘iá»ƒm cá»§a TCP
- [ ] So sÃ¡nh Ä‘Æ°á»£c header size: TCP vs UDP
- [ ] Biáº¿t khi nÃ o chá»n TCP, khi nÃ o chá»n UDP
- [ ] Biáº¿t cÃ¡c protocols cháº¡y trÃªn TCP (HTTP, FTP, SMTP...)
- [ ] Biáº¿t cÃ¡c protocols cháº¡y trÃªn UDP (DNS, NTP, RTP...)
- [ ] Giáº£i thÃ­ch Ä‘Æ°á»£c táº¡i sao DNS dÃ¹ng cáº£ TCP vÃ  UDP

---

## TÃ³m Táº¯t Má»™t DÃ²ng

```
TCP = ÄÃ¡ng tin cáº­y, Ä‘Ãºng thá»© tá»±, cháº­m (nhÆ° gá»­i thÆ° báº£o Ä‘áº£m)
UDP = Nhanh, khÃ´ng Ä‘áº£m báº£o, real-time (nhÆ° hÃ©t qua cá»­a sá»•)
```

---

_Cáº­p nháº­t láº§n cuá»‘i: ThÃ¡ng 2, 2026_
