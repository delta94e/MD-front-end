# Notion-Like System â€” Front-End System Design Deep Dive

> **TÃ i liá»‡u há»c táº­p chuyÃªn sÃ¢u â€” HoÃ n toÃ n báº±ng Tiáº¿ng Viá»‡t**
> DÃ nh cho Senior Front-End Engineer (React/Next.js) â€” Ã”n táº­p phá»ng váº¥n System Design

---

## Â§1. System Design Plan â€” Quy TrÃ¬nh Thiáº¿t Káº¿ CÃ³ Há»‡ Thá»‘ng

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Báº®T Äáº¦U THIáº¾T Káº¾ NOTION = Báº®T Äáº¦U CÃ“ Káº¾ HOáº CH!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  NOTION LÃ€ GÃŒ?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Notion = Web Application cho phÃ©p xÃ¢y dá»±ng           â”‚
  â”‚  CUSTOM WORKSPACES sá»­ dá»¥ng Custom Markdown Syntax!    â”‚
  â”‚                                                        â”‚
  â”‚  CÃC Äáº¶C ÄIá»‚M CHÃNH:                                â”‚
  â”‚  â†’ Má»—i trang (page) = 1 markdown page                â”‚
  â”‚  â†’ Há»— trá»£ NHIá»€U loáº¡i component (heading, table...)   â”‚
  â”‚  â†’ Database = nhÃ³m pages + hiá»ƒn thá»‹ dáº¡ng views       â”‚
  â”‚    (Timeline, Calendar, Table...)                      â”‚
  â”‚  â†’ Custom Markdown Syntax Parser cá»±c máº¡nh             â”‚
  â”‚  â†’ Desktop-first, Offline-first application           â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Káº¾ HOáº CH THIáº¾T Káº¾ (12 BÆ¯á»šC):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  Thu tháº­p Requirements                              â”‚
  â”‚     â”œâ”€â”€ General Requirements (chá»©c nÄƒng chÃ­nh)        â”‚
  â”‚     â””â”€â”€ Advanced Requirements (nÃ¢ng cao)              â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ Mock-up â€” Giao diá»‡n UI tá»•ng quan                  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ High-level Components Hierarchy                    â”‚
  â”‚     â†’ Cáº¥u trÃºc component & luá»“ng dá»¯ liá»‡u           â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ Types of Components                                â”‚
  â”‚     â†’ Visual, Structural, Database connectable        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¤ Lexer & Parser Architecture                       â”‚
  â”‚     â†’ Custom Markdown Parser extendable               â”‚
  â”‚                                                        â”‚
  â”‚  â‘¥ Database Design                                    â”‚
  â”‚     â†’ Page grouping + Plugin system cho views         â”‚
  â”‚                                                        â”‚
  â”‚  â‘¦ State & Entity Design                              â”‚
  â”‚     â†’ Normalized state, entity models                 â”‚
  â”‚                                                        â”‚
  â”‚  â‘§ API Design                                         â”‚
  â”‚     â†’ REST vs GraphQL, Server-Side Events             â”‚
  â”‚                                                        â”‚
  â”‚  â‘¨ Performance Optimization                           â”‚
  â”‚     â†’ Network, Bundle, Rendering, Images              â”‚
  â”‚                                                        â”‚
  â”‚  â‘© Accessibility                                      â”‚
  â”‚     â†’ ARIA, Keyboard, Semantic HTML                    â”‚
  â”‚                                                        â”‚
  â”‚  â‘ª React/Next.js Implementation                      â”‚
  â”‚     â†’ Code thá»±c táº¿                                   â”‚
  â”‚                                                        â”‚
  â”‚  â‘« Phá»ng Váº¥n Q&A                                    â”‚
  â”‚     â†’ CÃ¢u há»i thÆ°á»ng gáº·p                           â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  ğŸ’¡ TRONG PHá»NG Váº¤N:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â­ LUÃ”N báº¯t Ä‘áº§u vá»›i káº¿ hoáº¡ch!                      â”‚
  â”‚  â†’ "TrÆ°á»›c tiÃªn, tÃ´i muá»‘n collect requirements,       â”‚
  â”‚     sau Ä‘Ã³ mock-up UI, rá»“i má»›i dive vÃ o tá»«ng        â”‚
  â”‚     pháº§n chi tiáº¿t."                                   â”‚
  â”‚                                                        â”‚
  â”‚  â­ Notion lÃ  OFFLINE-FIRST + DESKTOP-FIRST!          â”‚
  â”‚  â†’ Performance mobile ÃT quan trá»ng hÆ¡n             â”‚
  â”‚  â†’ Offline support lÃ  MUST-HAVE                       â”‚
  â”‚  â†’ Network optimization váº«n cáº§n (sync data)         â”‚
  â”‚                                                        â”‚
  â”‚  â­ Äá»ªNG nháº£y vÃ o code ngay!                          â”‚
  â”‚  â†’ Plan â†’ Requirements â†’ Architecture â†’ Code        â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§2. General Requirements â€” YÃªu Cáº§u Tá»•ng Quan

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  4 YÃŠU Cáº¦U CÆ  Báº¢N MÃ€ Há»† THá»NG PHáº¢I CÃ“!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  â‘  CUSTOM EDITOR Vá»šI LIVE ELEMENT TRANSFORMATION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  User gÃµ markdown â†’ Tá»° Äá»˜NG chuyá»ƒn thÃ nh component!  â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤:                                                â”‚
  â”‚  User gÃµ: "# Hello"                                   â”‚
  â”‚  â†’ Há»‡ thá»‘ng NGAY Láº¬P Tá»¨C chuyá»ƒn thÃ nh <h1>Hello</h1>â”‚
  â”‚                                                        â”‚
  â”‚  User gÃµ: "## World"                                  â”‚
  â”‚  â†’ Há»‡ thá»‘ng chuyá»ƒn thÃ nh <h2>World</h2>              â”‚
  â”‚                                                        â”‚
  â”‚  User gÃµ: "[]" (double brackets)                      â”‚
  â”‚  â†’ Há»‡ thá»‘ng chuyá»ƒn thÃ nh â˜ Checkbox                  â”‚
  â”‚                                                        â”‚
  â”‚  ÄÃ‚Y LÃ€ CORE FEATURE!                                â”‚
  â”‚  â†’ Tráº£i nghiá»‡m "what you type is what you see"       â”‚
  â”‚  â†’ Cáº§n Lexer + Parser + Render pipeline                â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘¡ EXTENDABLE COMPONENTS LIBRARY:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Components Library pháº£i Dá»„ Má» Rá»˜NG!                  â”‚
  â”‚                                                        â”‚
  â”‚  HÃ´m nay: h1, h2, h3, p, table                        â”‚
  â”‚  NgÃ y mai: +accordion, +divider, +calendar            â”‚
  â”‚  Tuáº§n sau: +kanban, +timeline, +code-block            â”‚
  â”‚                                                        â”‚
  â”‚  â†’ ThÃªm component Má»šI = ThÃªm 1 Rule + 1 Renderer    â”‚
  â”‚  â†’ KHÃ”NG cáº§n sá»­a core system!                        â”‚
  â”‚  â†’ Plugin-based architecture!                          â”‚
  â”‚                                                        â”‚
  â”‚  Cáº¤U TRÃšC:                                             â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚  â”‚ Component Library                    â”‚              â”‚
  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚              â”‚
  â”‚  â”‚ â”‚   H1    â”‚ â”‚  Table  â”‚ â”‚ Accordionâ”‚â”‚              â”‚
  â”‚  â”‚ â”‚  Rule   â”‚ â”‚  Rule   â”‚ â”‚  Rule    â”‚â”‚              â”‚
  â”‚  â”‚ â”‚ Render  â”‚ â”‚ Render  â”‚ â”‚ Render   â”‚â”‚              â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚              â”‚
  â”‚  â”‚         â†“         â†“         â†“       â”‚              â”‚
  â”‚  â”‚     Chung 1 Interface: Rule + Token â”‚              â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘¢ PAGE HIERARCHY (TRANG Lá»’NG TRANG):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Notion workspace = CÃ‚Y trang!                        â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ“ Root Page                                          â”‚
  â”‚  â”œâ”€â”€ ğŸ“„ Page 1                                        â”‚
  â”‚  â”‚   â”œâ”€â”€ ğŸ“„ Page 1.1                                  â”‚
  â”‚  â”‚   â””â”€â”€ ğŸ“„ Page 1.2                                  â”‚
  â”‚  â”œâ”€â”€ ğŸ“„ Page 2                                        â”‚
  â”‚  â”‚   â”œâ”€â”€ ğŸ“„ Page 2.1                                  â”‚
  â”‚  â”‚   â”‚   â””â”€â”€ ğŸ“„ Page 2.1.1                            â”‚
  â”‚  â”‚   â””â”€â”€ ğŸ“„ Page 2.2                                  â”‚
  â”‚  â””â”€â”€ ğŸ“„ Page 3                                        â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Má»—i page cÃ³ thá»ƒ chá»©a NHIá»€U pages con!            â”‚
  â”‚  â†’ Táº¡o thÃ nh sidebar menu (workspace hierarchy)      â”‚
  â”‚  â†’ Cáº§n recursive rendering cho menu                   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘£ ACCESSIBLE + PERFORMANT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  ACCESSIBILITY:                                         â”‚
  â”‚  â†’ Content pháº£i accessible cho screen readers         â”‚
  â”‚  â†’ Keyboard navigation cho editor                     â”‚
  â”‚  â†’ Semantic HTML tags                                  â”‚
  â”‚                                                        â”‚
  â”‚  PERFORMANCE:                                           â”‚
  â”‚  â†’ Notion = DESKTOP-FIRST!                             â”‚
  â”‚  â†’ Ãt lo vá» mobile performance                       â”‚
  â”‚  â†’ NHÆ¯NG váº«n optimize CPU + Network!                 â”‚
  â”‚  â†’ Offline-first â†’ cáº§n Service Worker                â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§3. Advanced Requirements â€” YÃªu Cáº§u NÃ¢ng Cao

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  NÃ‚NG CAO = LÃ€M CHO Há»† THá»NG THáº¬T Sá»° Máº NH Máº¼!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  â‘  DATABASE SUPPORT (NOTION DATABASE):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Notion Database â‰  SQL Database!                      â”‚
  â”‚                                                        â”‚
  â”‚  Notion Database = CÃCH NHÃ“M PAGES + HIá»‚N THá»Š        â”‚
  â”‚  dÆ°á»›i dáº¡ng VIEWS khÃ¡c nhau!                           â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚  â”‚ Database: "Project Tasks"            â”‚              â”‚
  â”‚  â”‚                                      â”‚              â”‚
  â”‚  â”‚  ğŸ“„ Task 1: Design Homepage          â”‚              â”‚
  â”‚  â”‚  ğŸ“„ Task 2: Build API                â”‚              â”‚
  â”‚  â”‚  ğŸ“„ Task 3: Write Tests              â”‚              â”‚
  â”‚  â”‚  ğŸ“„ Task 4: Deploy                   â”‚              â”‚
  â”‚  â”‚                                      â”‚              â”‚
  â”‚  â”‚  VIEWS:                              â”‚              â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚              â”‚
  â”‚  â”‚  â”‚ Table  â”‚ â”‚Calendarâ”‚ â”‚ Timeline â”‚â”‚              â”‚
  â”‚  â”‚  â”‚  View  â”‚ â”‚  View  â”‚ â”‚   View   â”‚â”‚              â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚              â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                        â”‚
  â”‚  â†’ CÃ¹ng 1 nhÃ³m pages, NHIá»€U cÃ¡ch hiá»ƒn thá»‹!          â”‚
  â”‚  â†’ Má»—i view cáº§n METADATA riÃªng cho page              â”‚
  â”‚  â†’ Timeline cáº§n: start_date, end_date                 â”‚
  â”‚  â†’ Calendar cáº§n: date                                  â”‚
  â”‚  â†’ Table cáº§n: columns data                             â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘¡ OFFLINE SUPPORT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Notion = OFFLINE-FIRST!                               â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚  OFFLINE  â”‚â”€â”€â”€â–¶â”‚  LOCAL    â”‚â”€â”€â”€â–¶â”‚  SYNC     â”‚      â”‚
  â”‚  â”‚  Editing  â”‚    â”‚  Storage  â”‚    â”‚  to Serverâ”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚  â†’ DÃ¹ng Service Worker cache assets!                  â”‚
  â”‚  â†’ Edit KHÃ”NG Cáº¦N internet!                          â”‚
  â”‚  â†’ CÃ³ internet â†’ sync changes lÃªn server             â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘¢ EFFICIENT NETWORK COMMUNICATION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Page cÃ³ thá»ƒ Ráº¤T Lá»šN (nhiá»u content)!               â”‚
  â”‚                                                        â”‚
  â”‚  âŒ SAI: Gá»­i TOÃ€N Bá»˜ page má»—i láº§n update!          â”‚
  â”‚  â†’ Page 10KB, user thÃªm 1 kÃ½ tá»± â†’ gá»­i 10KB? NO!    â”‚
  â”‚                                                        â”‚
  â”‚  âœ… ÄÃšNG: Gá»­i DELTA (pháº§n thay Ä‘á»•i)!               â”‚
  â”‚  â†’ User thÃªm 1 kÃ½ tá»± â†’ gá»­i delta ~50 bytes!        â”‚
  â”‚  â†’ Giá»‘ng cÆ¡ cháº¿ Git diff!                            â”‚
  â”‚  â†’ Cáº§n thÆ° viá»‡n tÃ­nh Delta giá»¯a old vs new content  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘£ CROSS-PLATFORM + MULTI-VIEWPORT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â†’ Web app = Cross-platform máº·c Ä‘á»‹nh! âœ…             â”‚
  â”‚  â†’ Multi-viewport = Responsive design                  â”‚
  â”‚    â†’ Desktop: Full sidebar + content area             â”‚
  â”‚    â†’ Tablet: Collapsible sidebar                      â”‚
  â”‚    â†’ Mobile: Sidebar dáº¡ng drawer                     â”‚
  â”‚  â†’ Chá»§ yáº¿u xá»­ lÃ½ á»Ÿ component design level          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§4. Mock-up â€” Giao Diá»‡n UI Tá»•ng Quan

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  MOCK-UP = HÃŒNH DUNG TRÆ¯á»šC KHI CODE!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  Cáº¤U TRÃšC UI NOTION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚                    NOTION APP                     â”‚  â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”‚
  â”‚  â”‚  â”‚ SIDEBAR  â”‚  â”‚       CONTENT AREA            â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚          â”‚  â”‚                               â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ ğŸ“ Root  â”‚  â”‚  ğŸ”¤ Heading 1                â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ â”œ ğŸ“„ P1  â”‚  â”‚                               â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ â”‚ â”œ P1.1 â”‚  â”‚  Paragraph text here...       â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ â”‚ â”” P1.2 â”‚  â”‚                               â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ â”œ ğŸ“„ P2  â”‚  â”‚  ğŸ”¤ Heading 2                â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ â”” ğŸ“„ P3  â”‚  â”‚                               â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚          â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”          â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ â”€â”€â”€â”€â”€â”€â”€â”€ â”‚  â”‚  â”‚ Col â”‚ Col â”‚ Col â”‚ â† Table  â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ Settings â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¤          â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚ Trash    â”‚  â”‚  â”‚ ... â”‚ ... â”‚ ... â”‚          â”‚  â”‚  â”‚
  â”‚  â”‚  â”‚          â”‚  â”‚  â””â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”˜          â”‚  â”‚  â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                               â”‚  â”‚  â”‚
  â”‚  â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  2 PHáº¦N CHÃNH:                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
  â”‚  â”‚ â‘  SIDEBAR (Workspace Hierarchy):          â”‚        â”‚
  â”‚  â”‚    â†’ Hiá»ƒn thá»‹ cÃ¢y pages                   â”‚        â”‚
  â”‚  â”‚    â†’ Click page â†’ render content bÃªn pháº£i â”‚        â”‚
  â”‚  â”‚    â†’ Recursive rendering (page lá»“ng page) â”‚        â”‚
  â”‚  â”‚                                            â”‚        â”‚
  â”‚  â”‚ â‘¡ CONTENT AREA (Page Editor):             â”‚        â”‚
  â”‚  â”‚    â†’ contentEditable HTML nodes            â”‚        â”‚
  â”‚  â”‚    â†’ GÃµ markdown â†’ live transformation     â”‚        â”‚
  â”‚  â”‚    â†’ Multiple component types              â”‚        â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  ğŸ’¡ TRONG PHá»NG Váº¤N:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Váº½ mock-up NHANH Ä‘á»ƒ interviewer hiá»ƒu báº¡n Ä‘ang      â”‚
  â”‚  build cÃ¡i gÃ¬! KhÃ´ng cáº§n Ä‘áº¹p, cáº§n RÃ• RÃ€NG!         â”‚
  â”‚                                                        â”‚
  â”‚  Key points khi váº½:                                   â”‚
  â”‚  â†’ 2 vÃ¹ng chÃ­nh: sidebar + content                   â”‚
  â”‚  â†’ Sidebar = tree hierarchy                            â”‚
  â”‚  â†’ Content = editable area                             â”‚
  â”‚  â†’ Chá»‰ cáº§n 30 giÃ¢y!                                 â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§5. High-Level Components Hierarchy â€” Kiáº¿n TrÃºc Tá»•ng Quan

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  KIáº¾N TRÃšC = XÃ‚Y NHÃ€ PHáº¢I CÃ“ Báº¢N Váº¼!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  LUá»’NG Dá»® LIá»†U Tá»”NG QUAN:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚              APPLICATION ROOT                    â”‚   â”‚
  â”‚  â”‚              (root_page_id)                      â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚             â”‚                â”‚                          â”‚
  â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
  â”‚    â”‚  APPLICATION  â”‚  â”‚  APPLICATION ROUTER       â”‚     â”‚
  â”‚    â”‚  MENU         â”‚  â”‚  (SPA â€” Single Page App)  â”‚     â”‚
  â”‚    â”‚  (Sidebar)    â”‚  â”‚                           â”‚     â”‚
  â”‚    â”‚               â”‚  â”‚  Nháº­n page_id tá»« menu    â”‚     â”‚
  â”‚    â”‚  Hiá»ƒn thá»‹    â”‚  â”‚  â†’ Render page tÆ°Æ¡ng á»©ng â”‚     â”‚
  â”‚    â”‚  workspace    â”‚  â”‚                           â”‚     â”‚
  â”‚    â”‚  hierarchy    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
  â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                     â”‚
  â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
  â”‚                          â”‚   PAGE ROUTE    â”‚            â”‚
  â”‚                          â”‚   (page_id)     â”‚            â”‚
  â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
  â”‚                                   â”‚                     â”‚
  â”‚                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚
  â”‚                          â”‚  PAGE CONTENT   â”‚            â”‚
  â”‚                          â”‚  (raw string)   â”‚            â”‚
  â”‚                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚
  â”‚                                   â”‚                     â”‚
  â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚                 â”‚   LEXER â†’ PARSER â†’ RENDER      â”‚      â”‚
  â”‚                 â”‚   (raw string â†’ HTML elements) â”‚      â”‚
  â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Táº I SAO SINGLE PAGE APPLICATION (SPA)?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Khi user click page á»Ÿ sidebar:                       â”‚
  â”‚  â†’ Content area NGAY Láº¬P Tá»¨C render page má»›i       â”‚
  â”‚  â†’ KHÃ”NG full page reload!                            â”‚
  â”‚  â†’ Chá»‰ thay Ä‘á»•i content area!                       â”‚
  â”‚                                                        â”‚
  â”‚  â†’ SPA pattern = PERFECT cho use case nÃ y!           â”‚
  â”‚  â†’ Application Router nháº­n page_id                   â”‚
  â”‚  â†’ Render PageRoute tÆ°Æ¡ng á»©ng                       â”‚
  â”‚                                                        â”‚
  â”‚  Click sidebar     Application       Page Content      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
  â”‚  â”‚ Page 1.2 â”‚â”€â”€â”€â”€â–¶â”‚ Router   â”‚â”€â”€â”€â”€â–¶â”‚ Content  â”‚     â”‚
  â”‚  â”‚ (click!) â”‚     â”‚ id=1.2   â”‚      â”‚ of P1.2  â”‚     â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§6. Data Flow â€” Luá»“ng Dá»¯ Liá»‡u Chi Tiáº¿t

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  DATA FLOW = Dá»® LIá»†U CHáº¢Y NHÆ¯ MÃU TRONG CÆ  THá»‚!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  CONTENT EDITABLE + MUTATION OBSERVER:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Váº¤N Äá»€: Notion dÃ¹ng contentEditable, KHÃ”NG dÃ¹ng     â”‚
  â”‚  <input> hay <textarea>! Táº¡i sao?                     â”‚
  â”‚                                                        â”‚
  â”‚  âŒ <input>/<textarea>:                                â”‚
  â”‚  â†’ Chá»‰ chá»©a plain text                               â”‚
  â”‚  â†’ KHÃ”NG render Ä‘Æ°á»£c HTML components bÃªn trong       â”‚
  â”‚  â†’ Giá»›i háº¡n styling                                  â”‚
  â”‚                                                        â”‚
  â”‚  âœ… contentEditable:                                   â”‚
  â”‚  â†’ Biáº¿n Báº¤T Ká»² HTML element thÃ nh editable!          â”‚
  â”‚  â†’ CÃ³ thá»ƒ chá»©a h1, table, div... bÃªn trong!        â”‚
  â”‚  â†’ Rich content editing!                               â”‚
  â”‚                                                        â”‚
  â”‚  <div contentEditable="true">                          â”‚
  â”‚    <h1>Title</h1>                                      â”‚
  â”‚    <p>Paragraph...</p>                                 â”‚
  â”‚    <table>...</table>                                  â”‚
  â”‚    â† User gÃµ trá»±c tiáº¿p VÃ€O ÄÃ‚Y!                    â”‚
  â”‚  </div>                                                â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  NHÆ¯NG! contentEditable KHÃ”NG cÃ³ onChange event!       â”‚
  â”‚  â†’ Pháº£i dÃ¹ng MUTATION OBSERVER!                       â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  MUTATION OBSERVER LÃ€ GÃŒ?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  MutationObserver = Web API theo dÃµi Má»ŒI thay Ä‘á»•i   â”‚
  â”‚  trong DOM tree!                                       â”‚
  â”‚                                                        â”‚
  â”‚  // Táº¡o observer:                                     â”‚
  â”‚  const observer = new MutationObserver((mutations) => {â”‚
  â”‚    mutations.forEach((mutation) => {                   â”‚
  â”‚      // DOM Ä‘Ã£ thay Ä‘á»•i!                             â”‚
  â”‚      // â†’ Láº¥y ná»™i dung má»›i                          â”‚
  â”‚      // â†’ Gá»­i action update state!                   â”‚
  â”‚    });                                                 â”‚
  â”‚  });                                                   â”‚
  â”‚                                                        â”‚
  â”‚  // Observe element:                                   â”‚
  â”‚  observer.observe(editableDiv, {                       â”‚
  â”‚    childList: true,        // Track thÃªm/xÃ³a nodes   â”‚
  â”‚    characterData: true,    // Track text changes       â”‚
  â”‚    subtree: true,          // Track con chÃ¡u          â”‚
  â”‚    characterDataOldValue: true  // LÆ°u giÃ¡ trá»‹ cÅ©  â”‚
  â”‚  });                                                   â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ MutationObserver = CÃ¡ch DUY NHáº¤T theo dÃµi        â”‚
  â”‚     contentEditable changes má»™t cÃ¡ch Ä‘Ã¡ng tin cáº­y!   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  STATIC AREA vs SELECTED AREA:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Page content CHIA LÃ€M 2 VÃ™NG:                        â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚  â”‚ PAGE CONTENT                         â”‚              â”‚
  â”‚  â”‚                                      â”‚              â”‚
  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
  â”‚  â”‚ â”‚ STATIC AREA â† ÄÃƒ PARSE XONG!   â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ â†’ KHÃ”NG track changes           â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ â†’ CÃ“ THá»‚ CACHE!                â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ â†’ Render 1 láº§n, dÃ¹ng láº¡i!     â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚                                  â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ <h1>Title</h1>                   â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ <p>Old paragraph...</p>          â”‚ â”‚              â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
  â”‚  â”‚                                      â”‚              â”‚
  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
  â”‚  â”‚ â”‚ SELECTED AREA â† ÄANG CHá»ˆNH Sá»¬A!â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ â†’ MutationObserver THEO DÃ•I!    â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ â†’ Pháº£i re-parse má»—i thay Ä‘á»•i  â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚                                  â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ <p contentEditable>|typing...</p>â”‚ â”‚              â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
  â”‚  â”‚                                      â”‚              â”‚
  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
  â”‚  â”‚ â”‚ STATIC AREA (pháº§n sau)          â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ â†’ CACHE!                        â”‚ â”‚              â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                        â”‚
  â”‚  Táº I SAO CHIA 2?                                       â”‚
  â”‚  â†’ Static area Ä‘Ã£ parse â†’ CACHE tokens + HTML!       â”‚
  â”‚  â†’ Chá»‰ re-parse SELECTED area khi user gÃµ!          â”‚
  â”‚  â†’ TIáº¾T KIá»†M rendering cost!                         â”‚
  â”‚  â†’ Page 1000 dÃ²ng, user sá»­a 1 dÃ²ng                 â”‚
  â”‚    â†’ Chá»‰ re-parse 1 dÃ²ng, KHÃ”NG pháº£i 1000!          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  EVENT-BASED ARCHITECTURE (REDUX-like):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  CÃCH Dá»® LIá»†U CHáº¢Y KHI USER GÃ•:                     â”‚
  â”‚                                                        â”‚
  â”‚  â‘  User gÃµ "# Hello" trong selected area              â”‚
  â”‚          â†“                                              â”‚
  â”‚  â‘¡ MutationObserver detect thay Ä‘á»•i DOM              â”‚
  â”‚          â†“                                              â”‚
  â”‚  â‘¢ Táº¡o Action: { type: "UPDATE_CONTENT",              â”‚
  â”‚                    pageId: "123",                       â”‚
  â”‚                    content: "# Hello" }                â”‚
  â”‚          â†“                                              â”‚
  â”‚  â‘£ Dispatcher nháº­n action                             â”‚
  â”‚          â†“                                              â”‚
  â”‚  â‘¤ Action Handler (Reducer) xá»­ lÃ½ action             â”‚
  â”‚     â†’ Táº¡o state Má»šI vá»›i content Ä‘Ã£ update           â”‚
  â”‚          â†“                                              â”‚
  â”‚  â‘¥ Global State Ä‘Æ°á»£c update                           â”‚
  â”‚          â†“                                              â”‚
  â”‚  â‘¦ Page Content nháº­n state má»›i                       â”‚
  â”‚          â†“                                              â”‚
  â”‚  â‘§ Lexer â†’ Parser â†’ Render cháº¡y láº¡i               â”‚
  â”‚     â†’ "# Hello" â†’ Token(H1, "Hello") â†’ <h1>Hello</h1>â”‚
  â”‚          â†“                                              â”‚
  â”‚  â‘¨ UI updated! User tháº¥y heading!                    â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  DIAGRAM:                                               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ Mutation  â”‚    â”‚            â”‚    â”‚   Action     â”‚    â”‚
  â”‚  â”‚ Observer  â”‚â”€â”€â”€â–¶â”‚ Dispatcher â”‚â”€â”€â”€â–¶â”‚   Handler    â”‚    â”‚
  â”‚  â”‚ (detect   â”‚    â”‚ (global)   â”‚    â”‚  (reducer)   â”‚    â”‚
  â”‚  â”‚  changes) â”‚    â”‚            â”‚    â”‚              â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                           â”‚            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ Lexer â†’  â”‚    â”‚   Page     â”‚    â”‚   Global     â”‚    â”‚
  â”‚  â”‚ Parser â†’ â”‚â—€â”€â”€â”€â”‚  Content   â”‚â—€â”€â”€â”€â”‚   State      â”‚    â”‚
  â”‚  â”‚ Render   â”‚    â”‚ (re-render)â”‚    â”‚  (updated)   â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§7. Types of Components â€” 3 Loáº¡i Component

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  3 LOáº I COMPONENT = 3 CÃCH Tá»” CHá»¨C Ná»˜I DUNG!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  PHÃ‚N LOáº I:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚              DESIGN SYSTEM                       â”‚  â”‚
  â”‚  â”‚                                                  â”‚  â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚  â”‚
  â”‚  â”‚  â”‚â‘  VISUAL    â”‚  â”‚â‘¡ STRUCTURAL â”‚  â”‚â‘¢ DATABASE â”‚â”‚  â”‚
  â”‚  â”‚  â”‚            â”‚  â”‚  CONTAINER  â”‚  â”‚CONNECTABLEâ”‚â”‚  â”‚
  â”‚  â”‚  â”‚ H1, H2, H3â”‚  â”‚             â”‚  â”‚           â”‚â”‚  â”‚
  â”‚  â”‚  â”‚ P, Code   â”‚  â”‚ Accordion   â”‚  â”‚ Table Viewâ”‚â”‚  â”‚
  â”‚  â”‚  â”‚ Image     â”‚  â”‚ Toggle      â”‚  â”‚ Calendar  â”‚â”‚  â”‚
  â”‚  â”‚  â”‚ Checkbox  â”‚  â”‚ Columns     â”‚  â”‚ Timeline  â”‚â”‚  â”‚
  â”‚  â”‚  â”‚ Divider   â”‚  â”‚ Callout Box â”‚  â”‚ Kanban    â”‚â”‚  â”‚
  â”‚  â”‚  â”‚           â”‚  â”‚             â”‚  â”‚           â”‚â”‚  â”‚
  â”‚  â”‚  â”‚ â†’ Nháº­n   â”‚  â”‚ â†’ Nháº­n     â”‚  â”‚ â†’ Nháº­n   â”‚â”‚  â”‚
  â”‚  â”‚  â”‚   data    â”‚  â”‚   data +    â”‚  â”‚   PAGES   â”‚â”‚  â”‚
  â”‚  â”‚  â”‚ â†’ Render â”‚  â”‚   CHILDREN  â”‚  â”‚   as data â”‚â”‚  â”‚
  â”‚  â”‚  â”‚   HTML    â”‚  â”‚ â†’ Render   â”‚  â”‚ â†’ Custom  â”‚â”‚  â”‚
  â”‚  â”‚  â”‚           â”‚  â”‚   wrapper + â”‚  â”‚   view of â”‚â”‚  â”‚
  â”‚  â”‚  â”‚ KHÃ”NG cÃ³ â”‚  â”‚   children  â”‚  â”‚   pages!  â”‚â”‚  â”‚
  â”‚  â”‚  â”‚ children! â”‚  â”‚             â”‚  â”‚           â”‚â”‚  â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘  VISUAL COMPONENTS (Text Elements):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â†’ Simple functional components!                       â”‚
  â”‚  â†’ Nháº­n data â†’ Render HTML â†’ Done!                   â”‚
  â”‚  â†’ KHÃ”NG cÃ³ children!                                 â”‚
  â”‚  â†’ KHÃ”NG cÃ³ structural properties!                    â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤:                                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚  â”‚ H1: "Hello" â†’ <h1>Hello</h1>        â”‚              â”‚
  â”‚  â”‚ P:  "Text"  â†’ <p>Text</p>           â”‚              â”‚
  â”‚  â”‚ HR: ---     â†’ <hr />                â”‚              â”‚
  â”‚  â”‚ CB: []      â†’ <input type="checkbox">â”‚              â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘¡ STRUCTURAL CONTAINERS:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â†’ CHáº¤P NHáº¬N children components!                     â”‚
  â”‚  â†’ LÃ  wrapper CHá»¨A cÃ¡c component khÃ¡c!               â”‚
  â”‚  â†’ GiÃºp tá»• chá»©c layout + structure!                  â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤ â€” Accordion:                                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚  â”‚ ##[type=accordion]                   â”‚              â”‚
  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
  â”‚  â”‚ â”‚ â–¸ Section Title                  â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚   â”‚ <h2>Child heading</h2>     â”‚ â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚   â”‚ <p>Child paragraph</p>     â”‚ â”‚ â”‚â† Children! â”‚
  â”‚  â”‚ â”‚   â”‚ <table>Child table</table> â”‚ â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚              â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘¢ DATABASE CONNECTABLE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â†’ Advanced structural components!                     â”‚
  â”‚  â†’ CHáº¤P NHáº¬N PAGES lÃ m children!                     â”‚
  â”‚  â†’ Hiá»ƒn thá»‹ pages dÆ°á»›i dáº¡ng custom view!             â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤ â€” Table View:                                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚  â”‚ Database: "Tasks"                    â”‚              â”‚
  â”‚  â”‚ View: Table                          â”‚              â”‚
  â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚              â”‚
  â”‚  â”‚ â”‚ Title   â”‚ Status   â”‚ Due Date   â”‚ â”‚              â”‚
  â”‚  â”‚ â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚              â”‚
  â”‚  â”‚ â”‚ Page 1  â”‚ Done     â”‚ Jan 5      â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ Page 2  â”‚ InProgressâ”‚ Jan 10    â”‚ â”‚              â”‚
  â”‚  â”‚ â”‚ Page 3  â”‚ Todo     â”‚ Jan 15     â”‚ â”‚              â”‚
  â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚              â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                        â”‚
  â”‚  Má»—i ROW lÃ  1 PAGE!                                   â”‚
  â”‚  â†’ Click row â†’ má»Ÿ page Ä‘Ã³!                          â”‚
  â”‚  â†’ Chuyá»ƒn view â†’ cÃ¹ng data, khÃ¡c hiá»ƒn thá»‹!         â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  COMMON INTERFACE â€” Táº¤T Cáº¢ CÃ™NG 1 PATTERN:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  DÃ™ lÃ  Visual, Structural hay Database:                â”‚
  â”‚  â†’ Äá»€U cÃ³ cÃ¹ng interface cÆ¡ báº£n!                    â”‚
  â”‚  â†’ Dá»… dÃ ng thÃªm component Má»šI!                      â”‚
  â”‚                                                        â”‚
  â”‚  Muá»‘n thÃªm component?                                 â”‚
  â”‚  â‘  XÃ¡c Ä‘á»‹nh TYPE (visual/structural/database)         â”‚
  â”‚  â‘¡ Implement cÃ¹ng INTERFACE                           â”‚
  â”‚  â‘¢ ThÃªm Rule vÃ o Lexer                               â”‚
  â”‚  â‘£ ThÃªm Renderer vÃ o Render Set                       â”‚
  â”‚  â‘¤ DONE! KhÃ´ng cáº§n sá»­a core!                        â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§8. Lexer Architecture â€” Bá»™ PhÃ¢n TÃ­ch Tá»« Vá»±ng

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  LEXER = BIáº¾N RAW TEXT THÃ€NH TOKENS CÃ“ Cáº¤U TRÃšC!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  LEXER LÃ€ GÃŒ?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Lexer (Lexical Analyzer) = Bá»™ phÃ¢n tÃ­ch tá»« vá»±ng     â”‚
  â”‚                                                        â”‚
  â”‚  INPUT:  Raw string content                            â”‚
  â”‚  OUTPUT: Array of ComponentToken[]                     â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤:                                                â”‚
  â”‚  Input: "# Hello\nSome text\n## World"                â”‚
  â”‚                                                        â”‚
  â”‚  Output:                                               â”‚
  â”‚  [                                                     â”‚
  â”‚    { type: "h1", attributes: { text: "Hello" } },     â”‚
  â”‚    { type: "p",  attributes: { text: "Some text" } }, â”‚
  â”‚    { type: "h2", attributes: { text: "World" } }      â”‚
  â”‚  ]                                                     â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Lexer KHÃ”NG render HTML!                           â”‚
  â”‚  â†’ Lexer chá»‰ "HIá»‚U" text â†’ táº¡o object!             â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  LEXER INTERFACE (TypeScript):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  interface Lexer {                                     â”‚
  â”‚    process(                                            â”‚
  â”‚      rules: Rule[],     // Táº­p luáº­t Ä‘Ã£ Ä‘Äƒng kÃ½     â”‚
  â”‚      content: string    // Raw text content            â”‚
  â”‚    ): ComponentToken[];  // Máº£ng tokens!              â”‚
  â”‚  }                                                     â”‚
  â”‚                                                        â”‚
  â”‚  CÃCH HOáº T Äá»˜NG:                                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  content = "# Hello\n## World"            â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  Chia thÃ nh tá»«ng LINE:                   â”‚          â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚          â”‚
  â”‚  â”‚  â”‚ Line 1: "# Hello"      â”‚              â”‚          â”‚
  â”‚  â”‚  â”‚ Line 2: "## World"     â”‚              â”‚          â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  Vá»›i Má»–I LINE, cháº¡y QUA Táº¤T Cáº¢ rules: â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  Line 1: "# Hello"                        â”‚          â”‚
  â”‚  â”‚    â†’ h1Rule.isValid("# Hello") = true âœ… â”‚          â”‚
  â”‚  â”‚    â†’ h1Rule.getToken("# Hello")           â”‚          â”‚
  â”‚  â”‚    â†’ { type: "h1", attrs: {text:"Hello"}} â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  Line 2: "## World"                       â”‚          â”‚
  â”‚  â”‚    â†’ h1Rule.isValid("## World") = false âŒâ”‚          â”‚
  â”‚  â”‚    â†’ h2Rule.isValid("## World") = true âœ… â”‚          â”‚
  â”‚  â”‚    â†’ h2Rule.getToken("## World")           â”‚          â”‚
  â”‚  â”‚    â†’ { type: "h2", attrs: {text:"World"}} â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  RULE INTERFACE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  interface Rule {                                      â”‚
  â”‚    isValid(line: string): boolean;                     â”‚
  â”‚    // â†’ DÃ²ng nÃ y cÃ³ KHá»šP vá»›i rule nÃ y khÃ´ng?         â”‚
  â”‚    // â†’ H1 rule: starts with "# "                     â”‚
  â”‚    // â†’ Checkbox rule: starts with "[]"               â”‚
  â”‚                                                        â”‚
  â”‚    getToken(expression: string): ComponentToken;       â”‚
  â”‚    // â†’ TrÃ­ch xuáº¥t ATTRIBUTES tá»« dÃ²ng text!          â”‚
  â”‚    // â†’ "# Hello" â†’ { type:"h1", text:"Hello" }      â”‚
  â”‚  }                                                     â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤ IMPLEMENTATION â€” H1 Rule:                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  const h1Rule: Rule = {                    â”‚          â”‚
  â”‚  â”‚    isValid(line: string): boolean {        â”‚          â”‚
  â”‚  â”‚      return line.startsWith('# ');         â”‚          â”‚
  â”‚  â”‚    },                                      â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚    getToken(expr: string): ComponentToken { â”‚          â”‚
  â”‚  â”‚      return {                              â”‚          â”‚
  â”‚  â”‚        type: 'h1',                         â”‚          â”‚
  â”‚  â”‚        attributes: {                       â”‚          â”‚
  â”‚  â”‚          text: expr.slice(2) // Bá» "# "  â”‚          â”‚
  â”‚  â”‚        }                                   â”‚          â”‚
  â”‚  â”‚      };                                    â”‚          â”‚
  â”‚  â”‚    }                                       â”‚          â”‚
  â”‚  â”‚  };                                        â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤ â€” Table Rule (phá»©c táº¡p hÆ¡n):                  â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  const tableRule: Rule = {                 â”‚          â”‚
  â”‚  â”‚    isValid(line: string): boolean {        â”‚          â”‚
  â”‚  â”‚      // Table báº¯t Ä‘áº§u báº±ng "|"          â”‚          â”‚
  â”‚  â”‚      return line.startsWith('|') &&        â”‚          â”‚
  â”‚  â”‚             line.endsWith('|');             â”‚          â”‚
  â”‚  â”‚    },                                      â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚    getToken(expr: string): ComponentToken { â”‚          â”‚
  â”‚  â”‚      const cells = expr.split('|')         â”‚          â”‚
  â”‚  â”‚        .filter(Boolean)                    â”‚          â”‚
  â”‚  â”‚        .map(c => c.trim());                â”‚          â”‚
  â”‚  â”‚      return {                              â”‚          â”‚
  â”‚  â”‚        type: 'table',                      â”‚          â”‚
  â”‚  â”‚        attributes: { cols: cells }         â”‚          â”‚
  â”‚  â”‚      };                                    â”‚          â”‚
  â”‚  â”‚    }                                       â”‚          â”‚
  â”‚  â”‚  };                                        â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  NGUá»’N Dá»® LIá»†U Cá»¦A LEXER:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Lexer nháº­n input tá»« 2 nguá»“n:                        â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
  â”‚  â”‚ LIVE AREA    â”‚â”€â”€â”€â”€â–¶â”‚          â”‚                     â”‚
  â”‚  â”‚ (user Ä‘ang  â”‚     â”‚  LEXER   â”‚â”€â”€â–¶ ComponentToken[] â”‚
  â”‚  â”‚  gÃµ inline) â”‚     â”‚          â”‚                     â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚ process()â”‚                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚          â”‚                     â”‚
  â”‚  â”‚ STATIC AREA â”‚â”€â”€â”€â”€â–¶â”‚          â”‚                     â”‚
  â”‚  â”‚ (Ä‘Ã£ parse,  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                     â”‚
  â”‚  â”‚  cÃ³ cache!) â”‚                                       â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                      â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Live area: LUÃ”N pháº£i re-parse!                    â”‚
  â”‚  â†’ Static area: CHECK CACHE trÆ°á»›c!                    â”‚
  â”‚    â†’ Náº¿u hash chÆ°a Ä‘á»•i â†’ dÃ¹ng cached tokens!       â”‚
  â”‚    â†’ Náº¿u hash Ä‘á»•i â†’ re-parse!                       â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§9. Component Token â€” Object Äáº¡i Diá»‡n Cho Component

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  COMPONENT TOKEN = "Táº¤M VÃ‰" CHO Má»–I COMPONENT!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  3 LOáº I TOKEN CHO 3 LOáº I COMPONENT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  BASIC COMPONENT TOKEN (Visual):                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  type ComponentToken<Props> = {            â”‚          â”‚
  â”‚  â”‚    type: string;       // "h1", "p", "hr" â”‚          â”‚
  â”‚  â”‚    attributes: Props;  // Component props â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  VÃ Dá»¤:                                   â”‚          â”‚
  â”‚  â”‚  { type: "h1", attributes: { text: "Hi" }}â”‚          â”‚
  â”‚  â”‚  { type: "p", attributes: { text: "..." }}â”‚          â”‚
  â”‚  â”‚  { type: "hr", attributes: {} }            â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  â†’ Simple! Chá»‰ cÃ³ type + attributes!     â”‚          â”‚
  â”‚  â”‚  â†’ KHÃ”NG cÃ³ children!                     â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ CONTAINER COMPONENT TOKEN (Structural):            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  type ContainerComponentToken<Props>       â”‚          â”‚
  â”‚  â”‚    = ComponentToken<Props> & {             â”‚          â”‚
  â”‚  â”‚      children: ComponentToken[];           â”‚          â”‚
  â”‚  â”‚      // â†‘ CÃ³ thá»ƒ chá»©a component khÃ¡c!   â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  VÃ Dá»¤ (Accordion):                       â”‚          â”‚
  â”‚  â”‚  {                                         â”‚          â”‚
  â”‚  â”‚    type: "accordion",                      â”‚          â”‚
  â”‚  â”‚    attributes: { title: "FAQ" },           â”‚          â”‚
  â”‚  â”‚    children: [                             â”‚          â”‚
  â”‚  â”‚      { type: "h2", attrs: {text:"Q1"} },  â”‚          â”‚
  â”‚  â”‚      { type: "p", attrs: {text:"A1..."} } â”‚          â”‚
  â”‚  â”‚    ]                                       â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  â†’ EXTENDS ComponentToken!                â”‚          â”‚
  â”‚  â”‚  â†’ ThÃªm children array!                  â”‚          â”‚
  â”‚  â”‚  â†’ Children = máº£ng ComponentToken[]      â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ DATABASE COMPONENT TOKEN:                           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  type DatabaseComponentToken<Props>        â”‚          â”‚
  â”‚  â”‚    = ComponentToken<Props> & {             â”‚          â”‚
  â”‚  â”‚      databaseData: DatabaseAttributes;     â”‚          â”‚
  â”‚  â”‚      // â†‘ Metadata cho database views!    â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  VÃ Dá»¤ (Table View):                      â”‚          â”‚
  â”‚  â”‚  {                                         â”‚          â”‚
  â”‚  â”‚    type: "database-table",                 â”‚          â”‚
  â”‚  â”‚    attributes: { title: "Tasks" },         â”‚          â”‚
  â”‚  â”‚    databaseData: {                         â”‚          â”‚
  â”‚  â”‚      pages: [...],                         â”‚          â”‚
  â”‚  â”‚      columns: ["Title","Status","Date"]    â”‚          â”‚
  â”‚  â”‚    }                                       â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  GENERIC <Props> = LINH HOáº T CHO Má»ŒI COMPONENT!
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Táº¡i sao dÃ¹ng Generic <Props>?                        â”‚
  â”‚                                                        â”‚
  â”‚  Má»—i component cÃ³ PROPS KHÃC NHAU:                    â”‚
  â”‚  â†’ H1 cáº§n: { text: string }                          â”‚
  â”‚  â†’ Table cáº§n: { cols: string[], rows: any[][] }       â”‚
  â”‚  â†’ Checkbox cáº§n: { checked: boolean, label: string }  â”‚
  â”‚                                                        â”‚
  â”‚  Generic cho phÃ©p TYPE-SAFE cho má»i component!        â”‚
  â”‚                                                        â”‚
  â”‚  ComponentToken<H1Props>     â†’ type-safe cho H1       â”‚
  â”‚  ComponentToken<TableProps>  â†’ type-safe cho Table    â”‚
  â”‚  ComponentToken<CheckProps>  â†’ type-safe cho Checkbox â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§10. Syntax Specification â€” Äáº·c Táº£ CÃº PhÃ¡p Markdown

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SYNTAX SPEC = LUáº¬T Lá»† Cá»¦A NGÃ”N NGá»® MARKDOWN!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  Báº¢NG CÃš PHÃP:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ Component    â”‚ Syntax      â”‚ Regex Pattern        â”‚  â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚
  â”‚  â”‚ Heading 1    â”‚ # text      â”‚ /^#\s+(.+)/          â”‚  â”‚
  â”‚  â”‚ Heading 2    â”‚ ## text     â”‚ /^##\s+(.+)/         â”‚  â”‚
  â”‚  â”‚ Heading 3    â”‚ ### text    â”‚ /^###\s+(.+)/        â”‚  â”‚
  â”‚  â”‚ Paragraph    â”‚ text        â”‚ /^[^#\[\|].*/        â”‚  â”‚
  â”‚  â”‚ Checkbox     â”‚ [] label    â”‚ /^\[\]\s*(.*)/       â”‚  â”‚
  â”‚  â”‚ Checked CB   â”‚ [x] label   â”‚ /^\[x\]\s*(.*)/      â”‚  â”‚
  â”‚  â”‚ Divider      â”‚ ---         â”‚ /^-{3,}$/            â”‚  â”‚
  â”‚  â”‚ Accordion    â”‚ ##[type=acc]â”‚ /^##\[type=(.+)\]/   â”‚  â”‚
  â”‚  â”‚ Table Row    â”‚ | a | b |   â”‚ /^\|.+\|$/           â”‚  â”‚
  â”‚  â”‚ Code Block   â”‚ ``` lang    â”‚ /^```(\w*)$/         â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ EXTENDABLE!                                        â”‚
  â”‚  â†’ Muá»‘n thÃªm component Má»šI?                          â”‚
  â”‚  â†’ ThÃªm 1 dÃ²ng vÃ o báº£ng syntax!                     â”‚
  â”‚  â†’ Implement Rule cho component Ä‘Ã³!                  â”‚
  â”‚  â†’ DONE! Core system KHÃ”NG Cáº¦N Sá»¬A!                 â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  VÃ Dá»¤ FULL PARSING FLOW:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  INPUT (raw markdown string tá»« user):                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚  # My Page Title                          â”‚          â”‚
  â”‚  â”‚  Hello this is a paragraph                â”‚          â”‚
  â”‚  â”‚  ## Section 1                              â”‚          â”‚
  â”‚  â”‚  [] Buy groceries                          â”‚          â”‚
  â”‚  â”‚  [x] Clean house                           â”‚          â”‚
  â”‚  â”‚  ---                                       â”‚          â”‚
  â”‚  â”‚  | Name | Age |                            â”‚          â”‚
  â”‚  â”‚  | John | 25  |                            â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Lexer process line by line:                        â”‚
  â”‚                                                        â”‚
  â”‚  OUTPUT (ComponentToken[]):                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚  [                                        â”‚          â”‚
  â”‚  â”‚    { type:"h1", attrs:{text:"My Page..."}}â”‚          â”‚
  â”‚  â”‚    { type:"p", attrs:{text:"Hello..."} }, â”‚          â”‚
  â”‚  â”‚    { type:"h2", attrs:{text:"Section 1"}},â”‚          â”‚
  â”‚  â”‚    { type:"checkbox", attrs:{             â”‚          â”‚
  â”‚  â”‚        checked:false, label:"Buy..."} },  â”‚          â”‚
  â”‚  â”‚    { type:"checkbox", attrs:{             â”‚          â”‚
  â”‚  â”‚        checked:true, label:"Clean..."} }, â”‚          â”‚
  â”‚  â”‚    { type:"divider", attrs:{} },           â”‚          â”‚
  â”‚  â”‚    { type:"table", attrs:{                â”‚          â”‚
  â”‚  â”‚        rows:[["Name","Age"],["John","25"]]â”‚          â”‚
  â”‚  â”‚    } }                                    â”‚          â”‚
  â”‚  â”‚  ]                                        â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  PERFORMANCE Cá»¦A RULE MATCHING:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Há»I: Náº¿u cÃ³ 500 rules, má»—i line pháº£i cháº¡y qua    â”‚
  â”‚  500 rules â†’ CHáº¬M?                                    â”‚
  â”‚                                                        â”‚
  â”‚  TRáº¢ Lá»œI:                                             â”‚
  â”‚  â†’ isValid() = O(1) cho má»—i rule (regex match)       â”‚
  â”‚  â†’ 500 rules Ã— 1 line = 500 checks                    â”‚
  â”‚  â†’ Ráº¥t nhá»! Regex match very fast!                   â”‚
  â”‚  â†’ CHá»ˆ thÃ nh váº¥n Ä‘á» náº¿u rule set Cá»°C Ká»² Lá»šN       â”‚
  â”‚  â†’ Notion ~50 components â†’ NO ISSUE!                  â”‚
  â”‚                                                        â”‚
  â”‚  Tá»I Æ¯U THÃŠM (náº¿u cáº§n):                             â”‚
  â”‚  â†’ Rules ORDERED by frequency!                         â”‚
  â”‚  â†’ H1, H2, P rules check TRÆ¯á»šC (phá»• biáº¿n nháº¥t)     â”‚
  â”‚  â†’ Exotic rules check SAU                              â”‚
  â”‚  â†’ Early return khi tÃ¬m tháº¥y match!                  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§11. Parser & Render Set â€” Bá»™ PhÃ¢n TÃ­ch + Bá»™ Render

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  PARSER = Káº¾T Ná»I TOKEN Vá»šI HTML RENDERING!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  PARSER INTERFACE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  interface Parser {                                    â”‚
  â”‚    process(                                            â”‚
  â”‚      token: ComponentToken    // Token tá»« Lexer       â”‚
  â”‚    ): HTMLElement;            // HTML output!          â”‚
  â”‚  }                                                     â”‚
  â”‚                                                        â”‚
  â”‚  Äáº¶C BIá»†T:                                            â”‚
  â”‚  â†’ Parser cÃ³ QUYá»€N TRUY Cáº¬P Global State!            â”‚
  â”‚  â†’ Parser káº¿t ná»‘i DATA vá»›i COMPONENT!                â”‚
  â”‚  â†’ Parser = "invisible controller" (MVC pattern)      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  RENDER SET â€” MAP TOKEN â†’ RENDER FUNCTION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Render Set = 1 MAP Ä‘Æ¡n giáº£n:                         â”‚
  â”‚  Token Type â†’ Rendering Function                       â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚ RENDER SET                                â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚ "h1"       â†’ renderHeading1(token)        â”‚          â”‚
  â”‚  â”‚ "h2"       â†’ renderHeading2(token)        â”‚          â”‚
  â”‚  â”‚ "p"        â†’ renderParagraph(token)       â”‚          â”‚
  â”‚  â”‚ "table"    â†’ renderTable(token)           â”‚          â”‚
  â”‚  â”‚ "checkbox" â†’ renderCheckbox(token)        â”‚          â”‚
  â”‚  â”‚ "accordion"â†’ renderAccordion(token)       â”‚          â”‚
  â”‚  â”‚ "divider"  â†’ renderDivider(token)         â”‚          â”‚
  â”‚  â”‚ ...                                       â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  TypeScript implementation:                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  type RenderFn = (                         â”‚          â”‚
  â”‚  â”‚    token: ComponentToken,                  â”‚          â”‚
  â”‚  â”‚    state: GlobalState                      â”‚          â”‚
  â”‚  â”‚  ) => HTMLElement;                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  // Render Set = Map<TokenType, RenderFn>  â”‚          â”‚
  â”‚  â”‚  const renderSet: Map<string, RenderFn> = {â”‚          â”‚
  â”‚  â”‚    'h1': (token, state) => {               â”‚          â”‚
  â”‚  â”‚      const el = document.createElement('h1')â”‚          â”‚
  â”‚  â”‚      el.textContent = token.attributes.text;â”‚          â”‚
  â”‚  â”‚      return el;                            â”‚          â”‚
  â”‚  â”‚    },                                      â”‚          â”‚
  â”‚  â”‚    'checkbox': (token, state) => {          â”‚          â”‚
  â”‚  â”‚      const el = document.createElement(     â”‚          â”‚
  â”‚  â”‚        'input'                              â”‚          â”‚
  â”‚  â”‚      );                                    â”‚          â”‚
  â”‚  â”‚      el.type = 'checkbox';                 â”‚          â”‚
  â”‚  â”‚      el.checked = token.attributes.checked; â”‚          â”‚
  â”‚  â”‚      return el;                            â”‚          â”‚
  â”‚  â”‚    },                                      â”‚          â”‚
  â”‚  â”‚    // ... more renderers                   â”‚          â”‚
  â”‚  â”‚  };                                        â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  FULL PIPELINE: LEXER â†’ PARSER â†’ RENDER:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚  LEXER  â”‚     â”‚ PARSER  â”‚     â”‚   HTML       â”‚      â”‚
  â”‚  â”‚         â”‚     â”‚         â”‚     â”‚   OUTPUT     â”‚      â”‚
  â”‚  â”‚ Raw     â”‚â”€â”€â”€â”€â–¶â”‚ Token[] â”‚â”€â”€â”€â”€â–¶â”‚              â”‚      â”‚
  â”‚  â”‚ String  â”‚     â”‚         â”‚     â”‚ <h1>Hello</h1>â”‚      â”‚
  â”‚  â”‚         â”‚ â‘   â”‚ + State â”‚ â‘¡  â”‚ <p>Text</p>  â”‚      â”‚
  â”‚  â”‚ Tokenizeâ”‚     â”‚ + Renderâ”‚     â”‚ <table>...</table>â”‚  â”‚
  â”‚  â”‚         â”‚     â”‚   Set   â”‚     â”‚              â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â”‚  â‘  Lexer: string â†’ ComponentToken[] (rules)           â”‚
  â”‚  â‘¡ Parser: token + state â†’ HTMLElement (renderSet)    â”‚
  â”‚                                                        â”‚
  â”‚  Äá»† QUY (RECURSIVE) CHO CONTAINER:                    â”‚
  â”‚  â†’ Náº¿u token cÃ³ children:                            â”‚
  â”‚    â†’ Parser gá»i process() cho Tá»ªNG child!            â”‚
  â”‚    â†’ Káº¿t quáº£ lÃ  nested HTML elements!                â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤:                                                â”‚
  â”‚  Accordion token:                                      â”‚
  â”‚  {                                                     â”‚
  â”‚    type: "accordion",                                  â”‚
  â”‚    children: [                                         â”‚
  â”‚      { type: "h2", attrs: { text: "Q1" } },           â”‚
  â”‚      { type: "p", attrs: { text: "A1" } }             â”‚
  â”‚    ]                                                   â”‚
  â”‚  }                                                     â”‚
  â”‚  â†’ Parser: render accordion wrapper                    â”‚
  â”‚    â†’ recursive: render h2 child                       â”‚
  â”‚    â†’ recursive: render p child                        â”‚
  â”‚  â†’ Output: <details><summary>...                      â”‚
  â”‚             <h2>Q1</h2><p>A1</p></details>             â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  THÃŠM COMPONENT Má»šI = Cá»°C Ká»² ÄÆ N GIáº¢N:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Muá»‘n thÃªm "Callout Box" component?                   â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 1: Define syntax â†’ ##[type=callout]             â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 2: Implement Rule:                              â”‚
  â”‚  const calloutRule: Rule = {                           â”‚
  â”‚    isValid(line) {                                     â”‚
  â”‚      return line.startsWith('##[type=callout]');       â”‚
  â”‚    },                                                  â”‚
  â”‚    getToken(expr) {                                    â”‚
  â”‚      return {                                          â”‚
  â”‚        type: 'callout',                                â”‚
  â”‚        attributes: { ... }                             â”‚
  â”‚      };                                                â”‚
  â”‚    }                                                   â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 3: Add to Render Set:                           â”‚
  â”‚  renderSet['callout'] = (token) => {                   â”‚
  â”‚    const div = document.createElement('div');          â”‚
  â”‚    div.className = 'callout-box';                      â”‚
  â”‚    div.innerHTML = token.attributes.content;           â”‚
  â”‚    return div;                                         â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 4: Register rule!                               â”‚
  â”‚  rules.push(calloutRule);                              â”‚
  â”‚                                                        â”‚
  â”‚  DONE! Core system KHÃ”NG THAY Äá»”I! âœ…                â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§12. Database Design â€” Thiáº¿t Káº¿ Notion Database

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  NOTION DATABASE = PAGE CHá»¨A PAGES + PLUGIN VIEWS!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  NOTION DATABASE â‰  SQL DATABASE!
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  ÄÃ‚Y KHÃ”NG PHáº¢I relational database!                  â”‚
  â”‚                                                        â”‚
  â”‚  Notion Database = 1 PAGE Äáº¶C BIá»†T cÃ³ thá»ƒ:          â”‚
  â”‚  â†’ Chá»©a nhiá»u PAGES con (1-to-many)                  â”‚
  â”‚  â†’ Hiá»ƒn thá»‹ pages dÆ°á»›i NHIá»€U views khÃ¡c nhau         â”‚
  â”‚  â†’ Má»—i view cáº§n METADATA riÃªng cho má»—i page         â”‚
  â”‚                                                        â”‚
  â”‚  QUAN Há»†:                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                     â”‚
  â”‚  â”‚ DATABASE â”‚ â”€â”€1:Nâ”€â”€â–¶â”‚  PAGES   â”‚                     â”‚
  â”‚  â”‚ (Page)   â”‚         â”‚ (Pages)  â”‚                     â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                     â”‚
  â”‚                            â”‚                           â”‚
  â”‚                      has Plugins                        â”‚
  â”‚                            â”‚                           â”‚
  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚
  â”‚              â–¼             â–¼             â–¼             â”‚
  â”‚        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
  â”‚        â”‚ Timeline â”‚ â”‚ Calendar â”‚ â”‚  Table   â”‚         â”‚
  â”‚        â”‚ Plugin   â”‚ â”‚ Plugin   â”‚ â”‚  Plugin  â”‚         â”‚
  â”‚        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
  â”‚              â”‚             â”‚             â”‚             â”‚
  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
  â”‚                            â–¼                           â”‚
  â”‚                      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
  â”‚                      â”‚ PAGE VIEWâ”‚                      â”‚
  â”‚                      â”‚ (render) â”‚                      â”‚
  â”‚                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  PLUGIN = METADATA CHO CUSTOM VIEW:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Má»—i VIEW cáº§n DATA RIÃŠNG cho má»—i page!               â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ“„ Page: "Design Homepage"                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  Timeline Plugin Data:                     â”‚          â”‚
  â”‚  â”‚  {                                         â”‚          â”‚
  â”‚  â”‚    start: 1707004800000, // Feb 5           â”‚          â”‚
  â”‚  â”‚    end:   1707350400000  // Feb 9           â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  Calendar Plugin Data:                     â”‚          â”‚
  â”‚  â”‚  {                                         â”‚          â”‚
  â”‚  â”‚    date: 1707004800000   // Feb 5           â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  Table Plugin Data:                        â”‚          â”‚
  â”‚  â”‚  {                                         â”‚          â”‚
  â”‚  â”‚    cols: ["Status", "Priority", "Assignee"]â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Chá»n Table view â†’ render table vá»›i cols data!     â”‚
  â”‚  â†’ Chá»n Timeline â†’ render timeline bar!              â”‚
  â”‚  â†’ Chá»n Calendar â†’ render calendar slot!             â”‚
  â”‚  â†’ CÃ™NG PAGE, KHÃC HIá»‚N THá»Š!                        â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  EXTENDABLE PLUGIN SYSTEM:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Muá»‘n thÃªm Kanban view?                               â”‚
  â”‚                                                        â”‚
  â”‚  â‘  Define KanbanPluginData:                           â”‚
  â”‚     { column: string; order: number; }                 â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ Implement KanbanView component                     â”‚
  â”‚     â†’ Extends DatabaseComponent interface              â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ Add plugin to Page entity:                         â”‚
  â”‚     plugins.kanban?: KanbanPluginData                   â”‚
  â”‚                                                        â”‚
  â”‚  DONE! KhÃ´ng cáº§n sá»­a core!                           â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Giá»‘ng cÃ¡ch thÃªm component vÃ o Lexer!              â”‚
  â”‚  â†’ Plugin-based = SCALABLE!                           â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§13. State & Entity Design â€” Thiáº¿t Káº¿ State VÃ  Entity

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  STATE = Bá»˜ NÃƒO Cá»¦A á»¨NG Dá»¤NG!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  PAGE ENTITY MODEL:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  type Page = {                                         â”‚
  â”‚    id: string;                   // Unique ID          â”‚
  â”‚    title: string;                // Page title         â”‚
  â”‚    content?: string;             // Raw markdown       â”‚
  â”‚    icon?: string;                // Emoji icon         â”‚
  â”‚    children?: Page[];            // Nested pages       â”‚
  â”‚    hash?: string;                // Content hash       â”‚
  â”‚                                  // â†’ dÃ¹ng cho cache! â”‚
  â”‚    plugins?: {                                         â”‚
  â”‚      timeline?: TimelinePluginData;                    â”‚
  â”‚      calendar?: CalendarPluginData;                    â”‚
  â”‚      table?: TablePluginData;                          â”‚
  â”‚    };                                                  â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  type TimelinePluginData = {                           â”‚
  â”‚    start: number;   // timestamp                       â”‚
  â”‚    end: number;     // timestamp                       â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â”‚  type CalendarPluginData = {                           â”‚
  â”‚    date: number;    // timestamp                       â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â”‚  type TablePluginData = {                              â”‚
  â”‚    cols: string[];  // column names                    â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  HASH FIELD â€” Táº I SAO Cáº¦N?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Hash = Fingerprint cá»§a page content!                  â”‚
  â”‚                                                        â”‚
  â”‚  CÃCH DÃ™NG:                                            â”‚
  â”‚  â‘  Khi render page â†’ tÃ­nh hash cá»§a content           â”‚
  â”‚  â‘¡ LÆ°u hash vÃ o page entity                          â”‚
  â”‚  â‘¢ Láº§n render tiáº¿p:                                  â”‚
  â”‚     â†’ TÃ­nh hash Má»šI                                  â”‚
  â”‚     â†’ So sÃ¡nh vá»›i hash CÅ¨                            â”‚
  â”‚     â†’ GIá»NG? â†’ DÃ¹ng cached HTML! (KHÃ”NG re-parse!)  â”‚
  â”‚     â†’ KHÃC? â†’ Re-parse content má»›i!                 â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Tá»‘i Æ°u rendering cho static area!                 â”‚
  â”‚  â†’ Page 1000 dÃ²ng chÆ°a sá»­a â†’ hash giá»‘ng â†’ skip!    â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  APPLICATION STATE â€” NORMALIZED!
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  type ApplicationState = {                             â”‚
  â”‚    rootPageId: string;                                 â”‚
  â”‚    pages: Record<string, Page>;   // â† NORMALIZED!    â”‚
  â”‚  //  â†‘ Flattened map: { [id]: Page }                  â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  Táº I SAO NORMALIZED (Map) CHá»¨ KHÃ”NG PHáº¢I Array?      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  âŒ ARRAY (Nested):                       â”‚          â”‚
  â”‚  â”‚  {                                         â”‚          â”‚
  â”‚  â”‚    rootPage: {                             â”‚          â”‚
  â”‚  â”‚      children: [                           â”‚          â”‚
  â”‚  â”‚        { id: "1", children: [              â”‚          â”‚
  â”‚  â”‚          { id: "1.1", ... },               â”‚          â”‚
  â”‚  â”‚          { id: "1.2", ... }                â”‚          â”‚
  â”‚  â”‚        ] },                                â”‚          â”‚
  â”‚  â”‚        { id: "2",... }                     â”‚          â”‚
  â”‚  â”‚      ]                                     â”‚          â”‚
  â”‚  â”‚    }                                       â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚  â†’ TÃ¬m page "1.2"? Pháº£i DFS/BFS!         â”‚          â”‚
  â”‚  â”‚  â†’ O(N) lookup! CHáº¬M!                     â”‚          â”‚
  â”‚  â”‚  â†’ Update page? Pháº£i tÃ¬m TRÆ¯á»šC!          â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  âœ… NORMALIZED MAP:                       â”‚          â”‚
  â”‚  â”‚  {                                         â”‚          â”‚
  â”‚  â”‚    rootPageId: "root",                     â”‚          â”‚
  â”‚  â”‚    pages: {                                â”‚          â”‚
  â”‚  â”‚      "root": { id:"root", children:["1","2"]â”‚          â”‚
  â”‚  â”‚      "1":    { id:"1", children:["1.1","1.2"]â”‚          â”‚
  â”‚  â”‚      "1.1":  { id:"1.1", content:"..." },  â”‚          â”‚
  â”‚  â”‚      "1.2":  { id:"1.2", content:"..." },  â”‚          â”‚
  â”‚  â”‚      "2":    { id:"2", content:"..." }      â”‚          â”‚
  â”‚  â”‚    }                                       â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚  â†’ TÃ¬m page "1.2"? pages["1.2"]!          â”‚          â”‚
  â”‚  â”‚  â†’ O(1) lookup! INSTANT!                   â”‚          â”‚
  â”‚  â”‚  â†’ Update? pages["1.2"] = newData! DONE!   â”‚          â”‚
  â”‚  â”‚  â†’ Server gá»­i page má»›i? THÃŠM vÃ o map!    â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  Lá»¢I ÃCH NORMALIZED STATE:                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  â‘  O(1) access â€” truy cáº­p INSTANT!       â”‚          â”‚
  â”‚  â”‚  â‘¡ Easy update â€” set vÃ o map!            â”‚          â”‚
  â”‚  â”‚  â‘¢ Easy add â€” server gá»­i page má»›i â†’     â”‚          â”‚
  â”‚  â”‚     pages[newId] = newPage                 â”‚          â”‚
  â”‚  â”‚  â‘£ Easy delete â€” delete pages[id]          â”‚          â”‚
  â”‚  â”‚  â‘¤ No duplication â€” má»—i page 1 báº£n     â”‚          â”‚
  â”‚  â”‚  â‘¥ References báº±ng ID â€” children: ["1.1"]â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  ğŸ’¡ Redux cÅ©ng recommend Normalized State!â”‚          â”‚
  â”‚  â”‚  â†’ createEntityAdapter() trong Redux TK   â”‚          â”‚
  â”‚  â”‚  â†’ ChÃ­nh xÃ¡c concept nÃ y!                 â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§14. API Design â€” Thiáº¿t Káº¿ API

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  API = Cáº¦U Ná»I GIá»®A CLIENT VÃ€ SERVER!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  Lá»°A CHá»ŒN PROTOCOL:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ HTTP/1.1                 â”‚ HTTP/2              â”‚    â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤    â”‚
  â”‚  â”‚ â†’ WebSockets            â”‚ â†’ Server-Sent Eventsâ”‚    â”‚
  â”‚  â”‚ â†’ Bi-directional        â”‚ â†’ Uni-directional   â”‚    â”‚
  â”‚  â”‚ â†’ Phá»©c táº¡p, khÃ³ scale  â”‚ â†’ ÄÆ¡n giáº£n, dá»…    â”‚    â”‚
  â”‚  â”‚ â†’ Overkill cho Notion! â”‚ â†’ PHÃ™ Há»¢P!         â”‚    â”‚
  â”‚  â”‚                         â”‚ â†’ Parallel 200 reqs â”‚    â”‚
  â”‚  â”‚                         â”‚ â†’ Built-in caching  â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                        â”‚
  â”‚  Káº¾T LUáº¬N:                                             â”‚
  â”‚  â†’ WebSocket = OVERKILL cho Notion!                   â”‚
  â”‚    â†’ Notion KHÃ”NG cáº§n real-time liÃªn tá»¥c            â”‚
  â”‚    â†’ Offline-first, sync khi cÃ³ máº¡ng                 â”‚
  â”‚  â†’ HTTP/2 + SSE = PHÃ™ Há»¢P NHáº¤T!                     â”‚
  â”‚    â†’ SSE cho live updates (collaborative editing)     â”‚
  â”‚    â†’ HTTP/2 cho caching + parallel connections        â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  REST vs GRAPHQL:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚           REST (Classic)                         â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ âœ… Æ¯u Ä‘iá»ƒm:                                    â”‚   â”‚
  â”‚  â”‚ â†’ Simple implementation                         â”‚   â”‚
  â”‚  â”‚ â†’ HTTP/2 caching MIá»„N PHÃ (GET requests)       â”‚   â”‚
  â”‚  â”‚ â†’ Parallel connections                          â”‚   â”‚
  â”‚  â”‚                                                  â”‚   â”‚
  â”‚  â”‚ âŒ NhÆ°á»£c Ä‘iá»ƒm:                                 â”‚   â”‚
  â”‚  â”‚ â†’ KhÃ³ design REST API tá»‘t!                     â”‚   â”‚
  â”‚  â”‚ â†’ KhÃ³ thay Ä‘á»•i sau khi release!               â”‚   â”‚
  â”‚  â”‚ â†’ Over-fetching / Under-fetching data          â”‚   â”‚
  â”‚  â”‚ â†’ Cáº§n workaround (query params) cho variants   â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚          GRAPHQL â† Äá»€ XUáº¤T!                    â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ âœ… Æ¯u Ä‘iá»ƒm:                                    â”‚   â”‚
  â”‚  â”‚ â†’ Single endpoint!                              â”‚   â”‚
  â”‚  â”‚ â†’ SUPER VERSATILE â€” fetch Báº¤T Ká»² fields nÃ o! â”‚   â”‚
  â”‚  â”‚ â†’ Dá»… maintain long-term                        â”‚   â”‚
  â”‚  â”‚ â†’ Entity model = State Entity Model!            â”‚   â”‚
  â”‚  â”‚   â†’ Server entity â‰ˆ Client entity â†’ REUSE!    â”‚   â”‚
  â”‚  â”‚ â†’ Subscription cho live updates!                â”‚   â”‚
  â”‚  â”‚ â†’ Client quáº£n lÃ½ server state sync!           â”‚   â”‚
  â”‚  â”‚                                                  â”‚   â”‚
  â”‚  â”‚ âŒ NhÆ°á»£c Ä‘iá»ƒm:                                 â”‚   â”‚
  â”‚  â”‚ â†’ LuÃ´n dÃ¹ng POST â†’ máº¥t HTTP caching!          â”‚   â”‚
  â”‚  â”‚ â†’ Cáº§n GraphQL client (Apollo, Relay...)         â”‚   â”‚
  â”‚  â”‚ â†’ ThÃªm point of failure                        â”‚   â”‚
  â”‚  â”‚ â†’ Learning curve                                â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ Táº I SAO CHá»ŒN GRAPHQL?                             â”‚
  â”‚  â†’ Notion cÃ³ NHIá»€U loáº¡i data (page, plugins, etc.)   â”‚
  â”‚  â†’ VERSATILE â†’ khÃ´ng over-fetch/under-fetch!         â”‚
  â”‚  â†’ Subscription support cho collaborative editing!    â”‚
  â”‚  â†’ Entity model khá»›p vá»›i client state model!         â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  3 API METHODS:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  GET PAGE:                                           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  function getPage(                         â”‚          â”‚
  â”‚  â”‚    id: string,       // Page ID            â”‚          â”‚
  â”‚  â”‚    apiToken: string  // Auth token          â”‚          â”‚
  â”‚  â”‚  ): Promise<Page>                          â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  // GraphQL:                               â”‚          â”‚
  â”‚  â”‚  query GetPage($id: ID!) {                 â”‚          â”‚
  â”‚  â”‚    page(id: $id) {                         â”‚          â”‚
  â”‚  â”‚      id                                    â”‚          â”‚
  â”‚  â”‚      title                                 â”‚          â”‚
  â”‚  â”‚      content                               â”‚          â”‚
  â”‚  â”‚      icon                                  â”‚          â”‚
  â”‚  â”‚      children { id title icon }             â”‚          â”‚
  â”‚  â”‚      plugins { timeline calendar table }    â”‚          â”‚
  â”‚  â”‚    }                                       â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  â†’ Fetch Báº¤T Ká»² fields cáº§n!              â”‚          â”‚
  â”‚  â”‚  â†’ Sidebar chá»‰ cáº§n: id, title, icon      â”‚          â”‚
  â”‚  â”‚  â†’ Content cáº§n: id, content, plugins       â”‚          â”‚
  â”‚  â”‚  â†’ KHÃ”NG over-fetch!                      â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ UPDATE PAGE (DELTA!):                               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  function updatePage(                      â”‚          â”‚
  â”‚  â”‚    id: string,       // Page ID            â”‚          â”‚
  â”‚  â”‚    delta: string,    // DELTA, khÃ´ng pháº£i â”‚          â”‚
  â”‚  â”‚                      // toÃ n bá»™ content!  â”‚          â”‚
  â”‚  â”‚    apiToken: string  // Auth token          â”‚          â”‚
  â”‚  â”‚  ): Promise<void>                          â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  Táº I SAO DELTA?                            â”‚          â”‚
  â”‚  â”‚  â†’ Page lá»›n (10KB content)                â”‚          â”‚
  â”‚  â”‚  â†’ User thÃªm 1 chá»¯                       â”‚          â”‚
  â”‚  â”‚  â†’ Gá»­i toÃ n bá»™ 10KB? LÃƒNG PHÃ!         â”‚          â”‚
  â”‚  â”‚  â†’ Gá»­i delta ~50 bytes! TIáº¾T KIá»†M!      â”‚          â”‚
  â”‚  â”‚  â†’ Giá»‘ng cÆ¡ cháº¿ Git diff!                â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  delta = diff(oldContent, newContent)       â”‚          â”‚
  â”‚  â”‚  â†’ DÃ¹ng thÆ° viá»‡n: diff-match-patch!       â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ SUBSCRIBE (LIVE COLLABORATIVE EDITING):             â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  // GraphQL Subscription:                  â”‚          â”‚
  â”‚  â”‚  subscription OnPageUpdated($id: ID!) {    â”‚          â”‚
  â”‚  â”‚    pageUpdated(id: $id) {                  â”‚          â”‚
  â”‚  â”‚      id                                    â”‚          â”‚
  â”‚  â”‚      content                               â”‚          â”‚
  â”‚  â”‚      title                                 â”‚          â”‚
  â”‚  â”‚      lastModifiedBy                        â”‚          â”‚
  â”‚  â”‚    }                                       â”‚          â”‚
  â”‚  â”‚  }                                         â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  Implementation: Server-Sent Events (SSE)  â”‚          â”‚
  â”‚  â”‚  â†’ HTTP/2 native!                         â”‚          â”‚
  â”‚  â”‚  â†’ One-directional (server â†’ client)      â”‚          â”‚
  â”‚  â”‚  â†’ Äá»§ cho collaborative updates!          â”‚          â”‚
  â”‚  â”‚  â†’ ÄÆ¡n giáº£n hÆ¡n WebSockets nhiá»u!        â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  FLOW:                                     â”‚          â”‚
  â”‚  â”‚  User A sá»­a page â†’ server nháº­n delta    â”‚          â”‚
  â”‚  â”‚  â†’ Server broadcast SSE â†’ User B nháº­n   â”‚          â”‚
  â”‚  â”‚  â†’ GraphQL client tá»± sync state!         â”‚          â”‚
  â”‚  â”‚  â†’ UI auto update!                        â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Táº I SAO GRAPHQL + SSE LÃ€ Tá»” Há»¢P Tá»T NHáº¤T?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  GraphQL versatile â†’ query Ä‘Ãºng data cáº§n          â”‚
  â”‚  â‘¡ Subscription â†’ live updates cho collaboration    â”‚
  â”‚  â‘¢ SSE implementation â†’ simple, HTTP/2 native        â”‚
  â”‚  â‘£ Client state sync â†’ GraphQL client quáº£n lÃ½      â”‚
  â”‚  â‘¤ Entity reuse â†’ server entity â‰ˆ client entity     â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ Trong phá»ng váº¥n:                                  â”‚
  â”‚  â†’ Mention Cáº¢ HAI (REST & GraphQL)                   â”‚
  â”‚  â†’ Giáº£i thÃ­ch trade-offs                              â”‚
  â”‚  â†’ Chá»n GraphQL VÃ€ NÃ“I RÃ• lÃ½ do!                   â”‚
  â”‚  â†’ Thá»ƒ hiá»‡n báº¡n hiá»ƒu CÃCH CHá»ŒN, khÃ´ng chá»‰ biáº¿t   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§15. Performance Optimization â€” Tá»‘i Æ¯u Hiá»‡u NÄƒng

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  OPTIMIZATION = LÃ€M CHO APP NHANH NHÆ¯ CHá»šP!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  3 TRá»¤C Tá»I Æ¯U CHÃNH:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ NETWORK   â”‚  â”‚ RENDERING â”‚  â”‚ JAVASCRIPT        â”‚  â”‚
  â”‚  â”‚ & BUNDLE  â”‚  â”‚ & DOM     â”‚  â”‚ & COMPUTATION     â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚        â”‚              â”‚                   â”‚            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚â€¢HTTP/2    â”‚  â”‚â€¢Minimize  â”‚  â”‚â€¢Server-side searchâ”‚  â”‚
  â”‚  â”‚â€¢SW cache  â”‚  â”‚ DOM writesâ”‚  â”‚â€¢Web Workers       â”‚  â”‚
  â”‚  â”‚â€¢Bundle    â”‚  â”‚â€¢CSS anim  â”‚  â”‚â€¢No sync blocking  â”‚  â”‚
  â”‚  â”‚ splitting â”‚  â”‚â€¢Virtual-  â”‚  â”‚â€¢Parsing cache     â”‚  â”‚
  â”‚  â”‚â€¢Brotli/Gz â”‚  â”‚ ization   â”‚  â”‚                   â”‚  â”‚
  â”‚  â”‚â€¢Lazy load â”‚  â”‚â€¢BEM/CSS   â”‚  â”‚                   â”‚  â”‚
  â”‚  â”‚â€¢preconnectâ”‚  â”‚ naming    â”‚  â”‚                   â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘  NETWORK & BUNDLE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  SERVICE WORKER â€” Offline Cache:                       â”‚
  â”‚  â†’ Cache ALL static assets (HTML, CSS, JS, images)    â”‚
  â”‚  â†’ Offline-first: load tá»« cache trÆ°á»›c!              â”‚
  â”‚  â†’ CÃ³ máº¡ng â†’ sync background!                       â”‚
  â”‚  â†’ PERFECT cho Notion offline-first requirement!      â”‚
  â”‚                                                        â”‚
  â”‚  HTTP/2:                                               â”‚
  â”‚  â†’ Multiplexing: nhiá»u request trÃªn 1 connection!    â”‚
  â”‚  â†’ Header compression                                 â”‚
  â”‚  â†’ Server push                                        â”‚
  â”‚  â†’ preconnect cho non-critical resources               â”‚
  â”‚                                                        â”‚
  â”‚  BUNDLE SPLITTING:                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚          â”‚
  â”‚  â”‚  â”‚ VENDOR   â”‚  â”‚COMPONENT â”‚              â”‚          â”‚
  â”‚  â”‚  â”‚ BUNDLE   â”‚  â”‚ BUNDLE   â”‚              â”‚          â”‚
  â”‚  â”‚  â”‚          â”‚  â”‚          â”‚              â”‚          â”‚
  â”‚  â”‚  â”‚ React    â”‚  â”‚ H1 Rule  â”‚              â”‚          â”‚
  â”‚  â”‚  â”‚ ReactDOM â”‚  â”‚ Table    â”‚              â”‚          â”‚
  â”‚  â”‚  â”‚ Router   â”‚  â”‚ Accordionâ”‚              â”‚          â”‚
  â”‚  â”‚  â”‚ GraphQL  â”‚  â”‚ Calendar â”‚              â”‚          â”‚
  â”‚  â”‚  â”‚          â”‚  â”‚          â”‚              â”‚          â”‚
  â”‚  â”‚  â”‚ Ãt Ä‘á»•i  â”‚  â”‚ Äá»•i     â”‚              â”‚          â”‚
  â”‚  â”‚  â”‚â†’ CACHE!  â”‚  â”‚ thÆ°á»ng  â”‚              â”‚          â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ xuyÃªn   â”‚              â”‚          â”‚
  â”‚  â”‚                 â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Vendor bundle: cache LONG-TERM!                    â”‚
  â”‚  â†’ Component bundle: cache SHORT-TERM!                â”‚
  â”‚  â†’ Lazy load: chá»‰ load component KHI Cáº¦N!          â”‚
  â”‚                                                        â”‚
  â”‚  COMPRESSION:                                          â”‚
  â”‚  â†’ Brotli (Æ°u tiÃªn) > Gzip > None                   â”‚
  â”‚  â†’ Brotli ~20% tá»‘t hÆ¡n Gzip!                       â”‚
  â”‚                                                        â”‚
  â”‚  IMAGE OPTIMIZATION:                                   â”‚
  â”‚  â†’ Image Service: serve optimized images               â”‚
  â”‚  â†’ Dá»±a vÃ o viewport â†’ serve Ä‘Ãºng kÃ­ch thÆ°á»›c!       â”‚
  â”‚  â†’ Format: WebP > PNG > JPEG                          â”‚
  â”‚  â†’ Lazy loading images!                                â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘¡ RENDERING & DOM:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  MINIMIZE DOM WRITES:                                  â”‚
  â”‚  â†’ Nhá»›: Static area + Selected area?                 â”‚
  â”‚  â†’ CHá»ˆ track changes trong SELECTED area!            â”‚
  â”‚  â†’ Static area = CACHED HTML!                         â”‚
  â”‚  â†’ MutationObserver CHá»ˆ observe selected area!       â”‚
  â”‚  â†’ Page 1000 dÃ²ng, sá»­a 1 dÃ²ng                     â”‚
  â”‚    â†’ CHá»ˆ re-render 1 dÃ²ng!                          â”‚
  â”‚                                                        â”‚
  â”‚  CSS ANIMATIONS > JS ANIMATIONS:                       â”‚
  â”‚  â†’ CSS animations = GPU accelerated!                   â”‚
  â”‚  â†’ JS animations = Main thread blocked!               â”‚
  â”‚  â†’ DÃ¹ng: transform, opacity, will-change             â”‚
  â”‚  â†’ TRÃNH: top, left, width, height (trigger reflow!) â”‚
  â”‚                                                        â”‚
  â”‚  CSS NAMING â€” BEM:                                     â”‚
  â”‚  â†’ .block__element--modifier                           â”‚
  â”‚  â†’ TrÃ¡nh deep nesting selectors!                     â”‚
  â”‚  â†’ Specificity tháº¥p â†’ fast CSS matching!             â”‚
  â”‚                                                        â”‚
  â”‚  VIRTUALIZATION (cho Database Views):                  â”‚
  â”‚  â†’ Table cÃ³ 10,000 rows?                              â”‚
  â”‚  â†’ CHá»ˆ render visible rows (~50)!                    â”‚
  â”‚  â†’ Scroll â†’ render thÃªm!                             â”‚
  â”‚  â†’ DÃ¹ng: react-window, react-virtualized              â”‚
  â”‚                                                        â”‚
  â”‚  PARSING CACHE:                                        â”‚
  â”‚  â†’ Hash content â†’ cache tokens + HTML!                â”‚
  â”‚  â†’ Content chÆ°a Ä‘á»•i â†’ dÃ¹ng cached result!           â”‚
  â”‚  â†’ KHÃ”NG re-parse unnecessarily!                     â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  â‘¢ JAVASCRIPT & COMPUTATION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  SERVER-SIDE SEARCH:                                   â”‚
  â”‚  â†’ Database cÃ³ 100,000 pages?                          â”‚
  â”‚  â†’ Search client-side?  â†’ CHáº¬M + tá»‘n RAM!          â”‚
  â”‚  â†’ Search server-side!  â†’ Fast + scalable!           â”‚
  â”‚  â†’ Server dÃ¹ng full-text search (Elasticsearch...)   â”‚
  â”‚                                                        â”‚
  â”‚  WEB WORKERS:                                          â”‚
  â”‚  â†’ Heavy computation?                                  â”‚
  â”‚  â†’ Äáº¨Y sang Web Worker = BACKGROUND THREAD!         â”‚
  â”‚  â†’ Main thread KHÃ”NG Bá»Š CHáº¶N!                      â”‚
  â”‚  â†’ UI váº«n responsive khi tÃ­nh toÃ¡n náº·ng!           â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤: Client-side filtering 10,000 pages           â”‚
  â”‚  â†’ Worker tÃ­nh â†’ postMessage káº¿t quáº£ â†’ UI update   â”‚
  â”‚                                                        â”‚
  â”‚  NO SYNCHRONOUS BLOCKING:                              â”‚
  â”‚  â†’ TRÃNH: heavy loops trÃªn main thread              â”‚
  â”‚  â†’ TRÃNH: synchronous XHR                            â”‚
  â”‚  â†’ DÃ™NG: async/await, requestIdleCallback             â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§16. Accessibility â€” Kháº£ NÄƒng Tiáº¿p Cáº­n

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ACCESSIBILITY = AI CÅ¨NG DÃ™NG ÄÆ¯á»¢C!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  4 TRá»¤C ACCESSIBILITY:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  REM UNITS:                                         â”‚
  â”‚  â†’ DÃ™NG rem thay vÃ¬ px!                              â”‚
  â”‚  â†’ rem scale theo browser font-size setting!          â”‚
  â”‚  â†’ User set font 20px â†’ toÃ n bá»™ app scale!          â”‚
  â”‚  â†’ Äáº·c biá»‡t quan trá»ng cho ngÆ°á»i thá»‹ lá»±c yáº¿u!     â”‚
  â”‚                                                        â”‚
  â”‚  px: cá»‘ Ä‘á»‹nh â†’ khÃ´ng scale                           â”‚
  â”‚  rem: tÆ°Æ¡ng Ä‘á»‘i â†’ scale vá»›i user setting            â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ KEYBOARD NAVIGATION:                               â”‚
  â”‚  â†’ HOT-KEYS cho má»i action!                           â”‚
  â”‚  â†’ Ctrl+B = Bold, Ctrl+I = Italic                     â”‚
  â”‚  â†’ Tab/Shift+Tab = di chuyá»ƒn giá»¯a components        â”‚
  â”‚  â†’ Enter = xÃ¡c nháº­n                                  â”‚
  â”‚  â†’ Escape = Ä‘Ã³ng modal/menu                         â”‚
  â”‚  â†’ Arrow keys = navigate trong table/list             â”‚
  â”‚                                                        â”‚
  â”‚  â†’ User KHÃ”NG Cáº¦N chuá»™t!                            â”‚
  â”‚  â†’ Screen reader users CHá»ˆ dÃ¹ng keyboard!            â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ SEMANTIC HTML:                                      â”‚
  â”‚  â†’ DÃ™NG Ä‘Ãºng tags!                                   â”‚
  â”‚  â†’ <h1> cho heading, KHÃ”NG <div class="h1">          â”‚
  â”‚  â†’ <table> cho báº£ng, KHÃ”NG <div class="table">       â”‚
  â”‚  â†’ <input type="checkbox"> cho checkbox               â”‚
  â”‚  â†’ <nav> cho navigation                               â”‚
  â”‚  â†’ <main> cho content chÃ­nh                           â”‚
  â”‚  â†’ <aside> cho sidebar                                â”‚
  â”‚  â†’ <button> cho buttons, KHÃ”NG <div onClick>          â”‚
  â”‚  â†’ alt="" cho images (báº¯t buá»™c!)                     â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ COLOR SCHEMAS:                                      â”‚
  â”‚  â†’ Support color-blind users!                          â”‚
  â”‚  â†’ KHÃ”NG dÃ¹ng MÃ€U LÃ€ CÃCH DUY NHáº¤T                 â”‚
  â”‚    truyá»n Ä‘áº¡t thÃ´ng tin!                              â”‚
  â”‚  â†’ Káº¿t há»£p: mÃ u + icon + text                       â”‚
  â”‚  â†’ High contrast mode support                          â”‚
  â”‚  â†’ prefers-color-scheme media query                    â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§17. Conflict Resolution â€” Xá»­ LÃ½ Xung Äá»™t Collaborative

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  CONFLICT = 2 NGÆ¯á»œI Sá»¬A CÃ™NG 1 CHá»– CÃ™NG LÃšC!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  Váº¤N Äá»€:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  User A: "Hello World" â†’ sá»­a â†’ "Hello React"        â”‚
  â”‚  User B: "Hello World" â†’ sá»­a â†’ "Hello Vue"          â”‚
  â”‚                                                        â”‚
  â”‚  Cáº£ 2 gá»­i delta CÃ™NG LÃšC!                           â”‚
  â”‚  â†’ Server nháº­n 2 delta khÃ¡c nhau!                    â”‚
  â”‚  â†’ CÃI NÃ€O THáº®NG?                                   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  3 CHIáº¾N LÆ¯á»¢C:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  LAST WRITE WINS (LWW):                             â”‚
  â”‚  â†’ ÄÆ¡n giáº£n nháº¥t!                                   â”‚
  â”‚  â†’ Ai gá»­i SAU sáº½ ghi Ä‘Ã¨!                           â”‚
  â”‚  â†’ Timestamp-based                                     â”‚
  â”‚  â†’ âŒ User A máº¥t changes!                            â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ OPERATIONAL TRANSFORMATION (OT):                   â”‚
  â”‚  â†’ Google Docs dÃ¹ng!                                  â”‚
  â”‚  â†’ Transform operations Ä‘á»ƒ BOTH changes apply!       â”‚
  â”‚  â†’ Phá»©c táº¡p nhÆ°ng chÃ­nh xÃ¡c!                       â”‚
  â”‚  â†’ Server lÃ m trung gian transform                   â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ CRDT (Conflict-Free Replicated Data Types):        â”‚
  â”‚  â†’ Notion, Figma dÃ¹ng!                               â”‚
  â”‚  â†’ Merge Tá»° Äá»˜NG khÃ´ng cáº§n server!                 â”‚
  â”‚  â†’ Offline-first PERFECT!                             â”‚
  â”‚  â†’ Phá»©c táº¡p implement nhÆ°ng robust!                  â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ Trong phá»ng váº¥n:                                  â”‚
  â”‚  â†’ Mention cáº£ 3 approaches                            â”‚
  â”‚  â†’ Chá»n CRDT vÃ¬ Notion offline-first                 â”‚
  â”‚  â†’ Hoáº·c OT náº¿u online-first                         â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§18. React/Next.js Implementation â€” Code Thá»±c Táº¿

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  IMPLEMENT = BIáº¾N THIáº¾T Káº¾ THÃ€NH CODE!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

```typescript
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 1. COMPONENT TOKEN TYPES
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

interface ComponentToken<Props = Record<string, unknown>> {
  type: string;
  attributes: Props;
}

interface ContainerToken<Props = Record<string, unknown>>
  extends ComponentToken<Props> {
  children: ComponentToken[];
}

interface DatabaseToken<Props = Record<string, unknown>>
  extends ComponentToken<Props> {
  databaseData: {
    pages: Page[];
    columns?: string[];
  };
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 2. RULE INTERFACE + IMPLEMENTATIONS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

interface Rule {
  isValid(line: string): boolean;
  getToken(expression: string): ComponentToken;
}

const h1Rule: Rule = {
  isValid: (line) => /^#\s+/.test(line),
  getToken: (expr) => ({
    type: 'h1',
    attributes: { text: expr.replace(/^#\s+/, '') },
  }),
};

const h2Rule: Rule = {
  isValid: (line) => /^##\s+/.test(line),
  getToken: (expr) => ({
    type: 'h2',
    attributes: { text: expr.replace(/^##\s+/, '') },
  }),
};

const checkboxRule: Rule = {
  isValid: (line) => /^\[[ x]?\]/.test(line),
  getToken: (expr) => ({
    type: 'checkbox',
    attributes: {
      checked: expr.startsWith('[x]'),
      label: expr.replace(/^\[[ x]?\]\s*/, ''),
    },
  }),
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 3. LEXER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

class MarkdownLexer {
  process(rules: Rule[], content: string): ComponentToken[] {
    const lines = content.split('\n');
    const tokens: ComponentToken[] = [];

    for (const line of lines) {
      if (!line.trim()) continue;

      let matched = false;
      for (const rule of rules) {
        if (rule.isValid(line)) {
          tokens.push(rule.getToken(line));
          matched = true;
          break; // First match wins!
        }
      }

      // Default: paragraph
      if (!matched) {
        tokens.push({
          type: 'p',
          attributes: { text: line },
        });
      }
    }

    return tokens;
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 4. RENDER SET
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

type RenderFn = (
  token: ComponentToken,
  state: ApplicationState
) => HTMLElement;

const renderSet: Record<string, RenderFn> = {
  h1: (token) => {
    const el = document.createElement('h1');
    el.textContent = (token.attributes as any).text;
    return el;
  },
  h2: (token) => {
    const el = document.createElement('h2');
    el.textContent = (token.attributes as any).text;
    return el;
  },
  p: (token) => {
    const el = document.createElement('p');
    el.textContent = (token.attributes as any).text;
    return el;
  },
  checkbox: (token) => {
    const wrapper = document.createElement('label');
    const input = document.createElement('input');
    input.type = 'checkbox';
    input.checked = (token.attributes as any).checked;
    const span = document.createElement('span');
    span.textContent = (token.attributes as any).label;
    wrapper.append(input, span);
    return wrapper;
  },
};

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 5. PARSER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

class MarkdownParser {
  constructor(
    private renderSet: Record<string, RenderFn>,
    private state: ApplicationState
  ) {}

  process(token: ComponentToken): HTMLElement {
    const renderFn = this.renderSet[token.type];
    if (!renderFn) {
      // Fallback: render as paragraph
      return this.renderSet['p'](token, this.state);
    }
    return renderFn(token, this.state);
  }

  processAll(tokens: ComponentToken[]): HTMLElement[] {
    return tokens.map((t) => this.process(t));
  }
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 6. PAGE ENTITY & STATE
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

interface Page {
  id: string;
  title: string;
  content?: string;
  icon?: string;
  children?: string[];   // IDs only (normalized!)
  hash?: string;
  plugins?: {
    timeline?: { start: number; end: number };
    calendar?: { date: number };
    table?: { cols: string[] };
  };
}

interface ApplicationState {
  rootPageId: string;
  pages: Record<string, Page>;  // Normalized map!
  currentPageId: string | null;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// 7. REACT COMPONENTS
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

// PageEditor.tsx â€” Core Editor Component
// Uses contentEditable + MutationObserver

/*
const PageEditor: React.FC<{ pageId: string }> = ({ pageId }) => {
  const editorRef = useRef<HTMLDivElement>(null);
  const page = useSelector(state => state.pages[pageId]);
  const dispatch = useDispatch();

  useEffect(() => {
    if (!editorRef.current || !page) return;

    // Parse and render initial content
    const lexer = new MarkdownLexer();
    const rules = [h1Rule, h2Rule, checkboxRule];
    const tokens = lexer.process(rules, page.content || '');
    const parser = new MarkdownParser(renderSet, state);
    const elements = parser.processAll(tokens);

    editorRef.current.innerHTML = '';
    elements.forEach(el => editorRef.current!.appendChild(el));

    // MutationObserver â€” track changes!
    const observer = new MutationObserver((mutations) => {
      const newContent = editorRef.current!.textContent || '';
      dispatch({
        type: 'UPDATE_PAGE_CONTENT',
        payload: { pageId, content: newContent }
      });
    });

    observer.observe(editorRef.current, {
      childList: true,
      characterData: true,
      subtree: true,
    });

    return () => observer.disconnect();
  }, [pageId, page?.hash]);

  return (
    <div
      ref={editorRef}
      contentEditable
      role="textbox"
      aria-label="Page editor"
      aria-multiline="true"
    />
  );
};
*/
```

---

## Â§19. Interview Q&A â€” CÃ¢u Há»i Phá»ng Váº¥n

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  Q&A = CHUáº¨N Bá»Š CHO Má»ŒI CÃ‚U Há»I!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  Q1: Táº¡i sao dÃ¹ng contentEditable thay vÃ¬ textarea?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â†’ textarea CHá»ˆ chá»©a plain text!                      â”‚
  â”‚ â†’ contentEditable cho phÃ©p render HTML components     â”‚
  â”‚   BÃŠN TRONG vÃ¹ng editable (h1, table, checkbox...)   â”‚
  â”‚ â†’ Rich content editing KHÃ”NG THá»‚ dÃ¹ng textarea!      â”‚
  â”‚ â†’ Trade-off: cáº§n MutationObserver theo dÃµi changes  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Q2: Táº¡i sao normalized state thay vÃ¬ nested tree?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â†’ Nested tree: lookup O(N) pháº£i DFS/BFS!             â”‚
  â”‚ â†’ Normalized map: lookup O(1) báº±ng ID!               â”‚
  â”‚ â†’ Update: pages[id] = newData â€” instant!              â”‚
  â”‚ â†’ Add/Delete: thÃªm/xÃ³a key trong map!              â”‚
  â”‚ â†’ Redux recommend normalized state!                    â”‚
  â”‚ â†’ Server sync dá»… hÆ¡n: merge by ID!                  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Q3: REST vs GraphQL â€” khi nÃ o chá»n cÃ¡i nÃ o?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ REST: Simple CRUD, benefit tá»« HTTP caching (GET),    â”‚
  â”‚ Ã­t loáº¡i data, Ã­t variation trong queries.            â”‚
  â”‚                                                        â”‚
  â”‚ GraphQL: Nhiá»u loáº¡i data lá»“ng nhau (Notion!),        â”‚
  â”‚ cáº§n flexibility chá»n fields, subscription cho        â”‚
  â”‚ real-time, entity model khá»›p client state model.     â”‚
  â”‚                                                        â”‚
  â”‚ â†’ Notion chá»n GraphQL vÃ¬ versatile + subscription!   â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Q4: LÃ m sao thÃªm component má»›i mÃ  khÃ´ng sá»­a core?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â†’ Plugin-based architecture!                           â”‚
  â”‚ â‘  Implement Rule (isValid + getToken)                 â”‚
  â”‚ â‘¡ Implement RenderFn cho Render Set                   â”‚
  â”‚ â‘¢ Register rule vÃ o rules array                       â”‚
  â”‚ â†’ Core Lexer + Parser KHÃ”NG Cáº¦N Sá»¬A!                â”‚
  â”‚ â†’ Open/Closed Principle: Open for extension,          â”‚
  â”‚   Closed for modification!                             â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Q5: WebSocket vs SSE cho collaborative editing?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ WebSocket: Full-duplex, OVERKILL cho Notion.          â”‚
  â”‚ â†’ Notion offline-first, KHÃ”NG cáº§n constant stream!   â”‚
  â”‚                                                        â”‚
  â”‚ SSE: Server â†’ Client one-way, HTTP/2 native,          â”‚
  â”‚ simpler, auto-reconnect.                               â”‚
  â”‚ â†’ Notion chá»‰ cáº§n server push khi cÃ³ updates!        â”‚
  â”‚ â†’ Client gá»­i qua GraphQL mutation!                   â”‚
  â”‚ â†’ SSE = Äá»¦ + ÄÆ N GIáº¢N hÆ¡n!                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Q6: LÃ m sao optimize page cá»±c lá»›n (10,000 dÃ²ng)?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â‘  Static/Selected area split â†’ CHá»ˆ parse selected!  â”‚
  â”‚ â‘¡ Hash-based cache â†’ skip unchanged content!         â”‚
  â”‚ â‘¢ Virtualization â†’ CHá»ˆ render visible portion!       â”‚
  â”‚ â‘£ Web Workers â†’ heavy parsing off main thread!       â”‚
  â”‚ â‘¤ Delta updates â†’ gá»­i thay Ä‘á»•i, KHÃ”NG toÃ n bá»™!  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Q7: Database plugin system hoáº¡t Ä‘á»™ng tháº¿ nÃ o?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â†’ Database = Page chá»©a Pages!                        â”‚
  â”‚ â†’ Má»—i view (Table, Calendar, Timeline) = 1 Plugin   â”‚
  â”‚ â†’ Plugin = METADATA cho má»—i child page              â”‚
  â”‚ â†’ Chuyá»ƒn view = Ä‘á»•i cÃ¡ch HIá»‚N THá»Š, cÃ¹ng DATA!     â”‚
  â”‚ â†’ ThÃªm view má»›i = implement plugin má»›i!             â”‚
  â”‚ â†’ Page entity cÃ³ plugins object extensible!           â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Q8: Offline-first hoáº¡t Ä‘á»™ng ra sao?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â‘  Service Worker cache Táº¤T Cáº¢ static assets!        â”‚
  â”‚ â‘¡ User edit â†’ lÆ°u vÃ o local state (IndexedDB)!     â”‚
  â”‚ â‘¢ CÃ³ máº¡ng â†’ sync deltas lÃªn server (background)!   â”‚
  â”‚ â‘£ Conflict? â†’ CRDT tá»± merge! Hoáº·c LWW strategy!   â”‚
  â”‚ â‘¤ Server broadcast updates cho other clients (SSE)!  â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Q9: Accessibility trong Notion editor quan trá»ng tháº¿ nÃ o?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ â†’ Cá»°C Ká»² QUAN TRá»ŒNG!                                â”‚
  â”‚ â†’ contentEditable cáº§n role="textbox" + aria-label!    â”‚
  â”‚ â†’ Semantic HTML: h1/h2/table thay vÃ¬ div+class!      â”‚
  â”‚ â†’ Hotkeys cho má»i action editing!                     â”‚
  â”‚ â†’ rem units Ä‘á»ƒ user scale font-size!                 â”‚
  â”‚ â†’ Color + icon + text â†’ khÃ´ng chá»‰ dÃ¹ng mÃ u!        â”‚
  â”‚ â†’ prefers-color-scheme + prefers-contrast support!    â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Q10: Táº¡i sao MutationObserver thay vÃ¬ onInput event?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚ onInput KHÃ”NG catch Táº¤T Cáº¢ changes:                  â”‚
  â”‚ â†’ Drag & drop text â†’ NO onInput!                     â”‚
  â”‚ â†’ Paste via context menu â†’ inconsistent!              â”‚
  â”‚ â†’ Programmatic DOM changes â†’ NO onInput!              â”‚
  â”‚                                                        â”‚
  â”‚ MutationObserver catch EVERYTHING:                     â”‚
  â”‚ â†’ childList: thÃªm/xÃ³a nodes                         â”‚
  â”‚ â†’ characterData: text thay Ä‘á»•i                       â”‚
  â”‚ â†’ subtree: má»i con chÃ¡u                             â”‚
  â”‚ â†’ ÄÃ¡ng tin cáº­y 100%!                                â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

> **ğŸ“Œ Káº¿t luáº­n:**
> Notion system design lÃ  bÃ i toÃ¡n tuyá»‡t vá»i cho phá»ng váº¥n front-end vÃ¬ nÃ³ bao quÃ¡t:
> - **Custom Markdown Parser** (Lexer/Parser/Render pipeline)
> - **Event-based Architecture** (Redux-like dispatcher)
> - **Database System** (Plugin-based views)
> - **Real-time Collaboration** (GraphQL Subscriptions + SSE)
> - **Performance Optimization** (Caching, Virtualization, Web Workers)
> - **Accessibility** (Semantic HTML, Keyboard nav, rem units)
>
> HÃ£y náº¯m vá»¯ng Tá»ªNG PHáº¦N vÃ  liÃªn káº¿t chÃºng láº¡i vá»›i nhau!
