# Google Calendar â€” Front-End System Design Deep Dive

> **TÃ i liá»‡u há»c táº­p chuyÃªn sÃ¢u â€” HoÃ n toÃ n báº±ng Tiáº¿ng Viá»‡t**
> DÃ nh cho Senior Front-End Engineer (React/Next.js) â€” Ã”n táº­p phá»ng váº¥n System Design

---

## Â§1. Problem Overview â€” Tá»•ng Quan BÃ i ToÃ¡n

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  GOOGLE CALENDAR = á»¨NG Dá»¤NG QUáº¢N LÃ Lá»ŠCH TRÃŒNH!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  GOOGLE CALENDAR LÃ€ GÃŒ?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Google Calendar = Web Application cho phÃ©p:           â”‚
  â”‚                                                        â”‚
  â”‚  âœ… Táº¡o events (sá»± kiá»‡n) trÃªn lá»‹ch                  â”‚
  â”‚  âœ… Schedule events theo ngÃ y/giá»                    â”‚
  â”‚  âœ… Má»i ngÆ°á»i khÃ¡c tham gia event                    â”‚
  â”‚  âœ… Xem lá»‹ch theo NHIá»€U views (Year/Month/Day)       â”‚
  â”‚  âœ… PhÃ¡t hiá»‡n XUNG Äá»˜T giá»¯a cÃ¡c events              â”‚
  â”‚  âœ… Nháº­n thÃ´ng bÃ¡o nháº¯c nhá»Ÿ                         â”‚
  â”‚                                                        â”‚
  â”‚  Äáº¶C ÄIá»‚M QUAN TRá»ŒNG:                                â”‚
  â”‚  â†’ MOBILE-FIRST! (dÃ¹ng trÃªn Ä‘iá»‡n thoáº¡i nhiá»u!)     â”‚
  â”‚  â†’ ONLINE calendar (live updates!)                     â”‚
  â”‚  â†’ PWA (Progressive Web App â€” offline capable!)       â”‚
  â”‚  â†’ Tiáº¿t kiá»‡m pin thiáº¿t bá»‹ di Ä‘á»™ng!                 â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  3 VIEWS CHÃNH:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚  YEAR VIEW   â”‚ â”‚  MONTH VIEW  â”‚ â”‚   DAY VIEW   â”‚   â”‚
  â”‚  â”‚              â”‚ â”‚              â”‚ â”‚              â”‚   â”‚
  â”‚  â”‚ Jan Feb Mar  â”‚ â”‚  1  2  3  4  â”‚ â”‚  7:00 â”€â”€â”€â”€ â”‚   â”‚
  â”‚  â”‚ Apr May Jun  â”‚ â”‚  5  6  7  8  â”‚ â”‚  8:00 Eventâ”‚   â”‚
  â”‚  â”‚ Jul Aug Sep  â”‚ â”‚  9 10 11 12  â”‚ â”‚  9:00 â”€â”€â”€â”€ â”‚   â”‚
  â”‚  â”‚ Oct Nov Dec  â”‚ â”‚ 13 14 15 16  â”‚ â”‚ 10:00 Eventâ”‚   â”‚
  â”‚  â”‚              â”‚ â”‚ ...          â”‚ â”‚ 11:00 â”€â”€â”€â”€ â”‚   â”‚
  â”‚  â”‚ 12 thÃ¡ng    â”‚ â”‚ Click ngÃ y  â”‚ â”‚ Schedule    â”‚   â”‚
  â”‚  â”‚ trong nÄƒm   â”‚ â”‚ â†’ xem eventsâ”‚ â”‚ cáº£ ngÃ y    â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§2. General Requirements â€” YÃªu Cáº§u Tá»•ng Quan

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  REQUIREMENTS = Ná»€N Táº¢NG Cá»¦A Má»ŒI THIáº¾T Káº¾!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  GENERAL REQUIREMENTS:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  MULTIPLE VIEWS (Year / Month / Day):               â”‚
  â”‚  â†’ User chuyá»ƒn Ä‘á»•i giá»¯a 3 views                    â”‚
  â”‚  â†’ CÃ¹ng dá»¯ liá»‡u, khÃ¡c cÃ¡ch hiá»ƒn thá»‹              â”‚
  â”‚  â†’ Smooth transition giá»¯a cÃ¡c views!                 â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ MULTI-USER SUPPORT:                                â”‚
  â”‚  â†’ Táº¡o event VÃ€ má»i ngÆ°á»i khÃ¡c!                    â”‚
  â”‚  â†’ Nhiá»u ngÆ°á»i cÃ¹ng xem/sá»­a events!               â”‚
  â”‚  â†’ Cáº§n xá»­ lÃ½ permissions + sharing!                â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ LIVE UPDATES:                                       â”‚
  â”‚  â†’ ÄÃ‚Y LÃ€ ONLINE CALENDAR!                          â”‚
  â”‚  â†’ Ai Ä‘Ã³ táº¡o event cho báº¡n â†’ báº¡n tháº¥y NGAY!      â”‚
  â”‚  â†’ Real-time push tá»« server!                         â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ EVENT DETAILS VIEW:                                 â”‚
  â”‚  â†’ Click event â†’ xem chi tiáº¿t                       â”‚
  â”‚  â†’ Title, description, participants, time             â”‚
  â”‚  â†’ Rich text description (links, images...)           â”‚
  â”‚                                                        â”‚
  â”‚  â‘¤ CONFLICTING EVENTS DETECTION:                      â”‚
  â”‚  â†’ 2 events CHá»’NG CHÃ‰O nhau â†’ pháº£i phÃ¡t hiá»‡n!    â”‚
  â”‚  â†’ VÃ Dá»¤: Event A: 7:00-8:00, Event B: 7:30-8:30  â”‚
  â”‚  â†’ UI PHáº¢I hiá»ƒn thá»‹ xung Ä‘á»™t rÃµ rÃ ng!             â”‚
  â”‚  â†’ ÄÃ‚Y LÃ€ BÃ€I TOÃN ALGORITHMS QUAN TRá»ŒNG!         â”‚
  â”‚                                                        â”‚
  â”‚  â‘¥ EXPORT/IMPORT EVENTS:                              â”‚
  â”‚  â†’ Export â†’ file .ics hoáº·c JSON                     â”‚
  â”‚  â†’ Import â†’ nháº­p events tá»« file                    â”‚
  â”‚  â†’ Calendar offline cÅ©ng cáº§n feature nÃ y!           â”‚
  â”‚                                                        â”‚
  â”‚  â‘¦ PWA (Progressive Web App):                          â”‚
  â”‚  â†’ Hoáº¡t Ä‘á»™ng OFFLINE!                               â”‚
  â”‚  â†’ Cache resources báº±ng Service Worker                â”‚
  â”‚  â†’ Installable trÃªn mobile!                           â”‚
  â”‚                                                        â”‚
  â”‚  â‘§ PUSH REMINDERS:                                    â”‚
  â”‚  â†’ Nháº¯c nhá»Ÿ trÆ°á»›c event!                           â”‚
  â”‚  â†’ Desktop notification / Mobile push                  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  FUNCTIONAL REQUIREMENTS (Mobile-First):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  MOBILE-FIRST DESIGN:                                â”‚
  â”‚  â†’ Calendar dÃ¹ng trÃªn mobile NHIá»€U hÆ¡n desktop!     â”‚
  â”‚  â†’ Touch-friendly UI!                                  â”‚
  â”‚  â†’ Responsive tá»« mobile â†’ desktop                   â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ OFFLINE CAPABILITY:                                 â”‚
  â”‚  â†’ User má»Ÿ calendar KHÃ”NG Cáº¦N internet!             â”‚
  â”‚  â†’ Xem events Ä‘Ã£ cache â†’ edit offline               â”‚
  â”‚  â†’ CÃ³ máº¡ng â†’ sync!                                  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ BATTERY EFFICIENT:                                  â”‚
  â”‚  â†’ KHÃ”NG waste battery trÃªn mobile!                  â”‚
  â”‚  â†’ SSE dÃ¹ng mono antenna (ÃT Tá»N PIN!)             â”‚
  â”‚  â†’ WebSocket dÃ¹ng duplex antenna (Tá»N PIN!)         â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ EFFICIENT DATA MODEL:                               â”‚
  â”‚  â†’ Fetch ÃT data nháº¥t cÃ³ thá»ƒ!                     â”‚
  â”‚  â†’ KHÃ”NG fetch dÆ° thá»«a!                             â”‚
  â”‚  â†’ Server model â‰ˆ Client model (Ã­t transform!)     â”‚
  â”‚                                                        â”‚
  â”‚  â‘¤ NATIVE CAPABILITIES BRIDGING:                      â”‚
  â”‚  â†’ Set native alarm tá»« web?                          â”‚
  â”‚  â†’ Deep links â†’ má»Ÿ app trÃªn phone?                  â”‚
  â”‚  â†’ Web Push â†’ browser notification?                  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¥ EFFICIENT RENDERING:                                â”‚
  â”‚  â†’ KHÃ”NG virtualization (Ã­t elements!)               â”‚
  â”‚  â†’ Smooth animation khi switch views!                  â”‚
  â”‚  â†’ Pre-rendering cho seamless experience!              â”‚
  â”‚                                                        â”‚
  â”‚  â‘¦ ACCESSIBILITY:                                      â”‚
  â”‚  â†’ Calendar accessible cho screen readers!             â”‚
  â”‚  â†’ Keyboard navigation!                                â”‚
  â”‚  â†’ ARIA role="grid" cho calendar grid!               â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§3. Action Plan â€” Káº¿ Hoáº¡ch Thiáº¿t Káº¿

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  ACTION PLAN = LÃ€M GÃŒ TRÆ¯á»šC, LÃ€M GÃŒ SAU?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  Káº¾ HOáº CH 7 BÆ¯á»šC:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  Layout Overview                                    â”‚
  â”‚     â†’ Year/Month/Day view structure                    â”‚
  â”‚     â†’ Components hierarchy                             â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ Data Model & API Design                            â”‚
  â”‚     â†’ Event entity, Interval Tree                      â”‚
  â”‚     â†’ Conflict detection algorithm                     â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ Data Transferring                                   â”‚
  â”‚     â†’ Long Polling vs WebSocket vs SSE                 â”‚
  â”‚     â†’ GraphQL Subscriptions over SSE                   â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ Rendering Optimization                              â”‚
  â”‚     â†’ Pre-rendering + CSS transforms                   â”‚
  â”‚     â†’ Smooth view switching                            â”‚
  â”‚                                                        â”‚
  â”‚  â‘¤ Accessibility                                      â”‚
  â”‚     â†’ ARIA, Keyboard, Color schemes                    â”‚
  â”‚                                                        â”‚
  â”‚  â‘¥ Notification System                                â”‚
  â”‚     â†’ Web Push, Deep Links                             â”‚
  â”‚                                                        â”‚
  â”‚  â‘¦ App Optimizations                                  â”‚
  â”‚     â†’ Bundle splitting, Compression, PWA               â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  ğŸ’¡ TRONG PHá»NG Váº¤N:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  LUÃ”N nÃ³i káº¿ hoáº¡ch TRÆ¯á»šC KHI báº¯t Ä‘áº§u!             â”‚
  â”‚                                                        â”‚
  â”‚  "TÃ´i sáº½ báº¯t Ä‘áº§u vá»›i layout overview, sau Ä‘Ã³      â”‚
  â”‚   data model â€” Ä‘áº·c biá»‡t conflict detection báº±ng    â”‚
  â”‚   Interval Tree, rá»“i API design vá»›i GraphQL +        â”‚
  â”‚   SSE, rendering optimization, vÃ  cuá»‘i cÃ¹ng          â”‚
  â”‚   accessibility + notifications."                      â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Interviewer tháº¥y báº¡n CÃ“ Káº¾ HOáº CH!              â”‚
  â”‚  â†’ Thá»ƒ hiá»‡n senior-level thinking!                   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§4. Layout Overview â€” Cáº¥u TrÃºc Giao Diá»‡n

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  LAYOUT = HÃŒNH DUNG UI TRÆ¯á»šC KHI CODE!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  3 VIEWS CHI TIáº¾T:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  YEAR VIEW:                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚        ğŸ“… 2024                            â”‚          â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚          â”‚
  â”‚  â”‚  â”‚ Jan â”‚ â”‚ Feb â”‚ â”‚ Mar â”‚ â”‚ Apr â”‚       â”‚          â”‚
  â”‚  â”‚  â”‚1..31â”‚ â”‚1..28â”‚ â”‚1..31â”‚ â”‚1..30â”‚       â”‚          â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚          â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚          â”‚
  â”‚  â”‚  â”‚ May â”‚ â”‚ Jun â”‚ â”‚ Jul â”‚ â”‚ Aug â”‚       â”‚          â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚          â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”       â”‚          â”‚
  â”‚  â”‚  â”‚ Sep â”‚ â”‚ Oct â”‚ â”‚ Nov â”‚ â”‚ Dec â”‚       â”‚          â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”˜       â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  â†’ 12 thÃ¡ng trÃªn 1 mÃ n hÃ¬nh            â”‚          â”‚
  â”‚  â”‚  â†’ Click vÃ o ngÃ y â†’ má»Ÿ events list     â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ MONTH VIEW:                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚      ğŸ“… June 2024                        â”‚          â”‚
  â”‚  â”‚  Mon Tue Wed Thu Fri Sat Sun              â”‚          â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”¬â”€â”€â”€â”          â”‚          â”‚
  â”‚  â”‚  â”‚   â”‚   â”‚   â”‚   â”‚   â”‚ 1 â”‚ 2 â”‚          â”‚          â”‚
  â”‚  â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤          â”‚          â”‚
  â”‚  â”‚  â”‚ 3 â”‚ 4 â”‚ 5 â”‚ 6 â”‚ 7 â”‚ 8 â”‚ 9 â”‚          â”‚          â”‚
  â”‚  â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤          â”‚          â”‚
  â”‚  â”‚  â”‚10 â”‚11 â”‚12 â”‚13 â”‚14 â”‚15 â”‚16 â”‚          â”‚          â”‚
  â”‚  â”‚  â”œâ”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¼â”€â”€â”€â”¤          â”‚          â”‚
  â”‚  â”‚  â”‚17 â”‚18 â”‚19 â”‚20 â”‚21 â”‚22 â”‚23 â”‚          â”‚          â”‚
  â”‚  â”‚  â””â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”´â”€â”€â”€â”˜          â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  â†’ Chiáº¿m TOÃ€N Bá»˜ UI space!             â”‚          â”‚
  â”‚  â”‚  â†’ Click ngÃ y â†’ xem events list        â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ DAY VIEW:                                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚      ğŸ“… June 15, 2024                    â”‚          â”‚
  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚          â”‚
  â”‚  â”‚  â”‚  7:00  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚          â”‚
  â”‚  â”‚  â”‚  8:00  â”Œâ”€â”€ Meeting â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚    â”‚          â”‚
  â”‚  â”‚  â”‚  9:00  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚    â”‚          â”‚
  â”‚  â”‚  â”‚ 10:00  â”Œâ”€â”€ Lunch â”€â”€â”€â”           â”‚    â”‚          â”‚
  â”‚  â”‚  â”‚ 11:00  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚    â”‚          â”‚
  â”‚  â”‚  â”‚ 12:00  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ â”‚    â”‚          â”‚
  â”‚  â”‚  â”‚ ....                             â”‚    â”‚          â”‚
  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚          â”‚
  â”‚  â”‚                                           â”‚          â”‚
  â”‚  â”‚  â†’ Schedule view cho cáº£ ngÃ y!           â”‚          â”‚
  â”‚  â”‚  â†’ Hiá»ƒn thá»‹ time slots + events          â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§5. Components Architecture â€” CÃ¢y Component

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  COMPONENT TREE = XÆ¯Æ NG Sá»NG Cá»¦A á»¨NG Dá»¤NG!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  CÃ‚Y COMPONENT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                            â”‚
  â”‚                 â”‚ APP ROOT â”‚                            â”‚
  â”‚                 â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜                            â”‚
  â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                      â”‚
  â”‚     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”               â”‚
  â”‚     â”‚  CALENDAR  â”‚       â”‚  CALENDAR   â”‚               â”‚
  â”‚     â”‚  CONTROLS  â”‚       â”‚  VIEW       â”‚               â”‚
  â”‚     â””â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â”‚
  â”‚           â”‚                     â”‚                      â”‚
  â”‚     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚     â”‚ Create     â”‚    â”‚        â”‚        â”‚              â”‚
  â”‚     â”‚ Search     â”‚  â”Œâ”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”           â”‚
  â”‚     â”‚ Theme      â”‚  â”‚Yearâ”‚ â”‚Monthâ”‚ â”‚ Day â”‚           â”‚
  â”‚     â”‚ Language   â”‚  â”‚Viewâ”‚ â”‚View â”‚ â”‚View â”‚           â”‚
  â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜           â”‚
  â”‚                       â”‚       â”‚       â”‚               â”‚
  â”‚                   â”Œâ”€â”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â” â”Œâ”€â”€â–¼â”€â”€â”€â”€â”         â”‚
  â”‚                   â”‚Month â”‚ â”‚ Day â”‚ â”‚ Event â”‚         â”‚
  â”‚                   â”‚ Cell â”‚ â”‚Cell â”‚ â”‚ Cell  â”‚         â”‚
  â”‚                   â””â”€â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”˜ â””â”€â”€â”¬â”€â”€â”€â”€â”˜         â”‚
  â”‚                       â”‚       â”‚       â”‚               â”‚
  â”‚                       â””â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
  â”‚                           â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”                   â”‚
  â”‚                           â”‚ EVENT  â”‚                   â”‚
  â”‚                           â”‚ VIEW   â”‚                   â”‚
  â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜                   â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚              CLIENT STORE (Global)               â”‚  â”‚
  â”‚  â”‚  â†’ Single source of truth!                       â”‚  â”‚
  â”‚  â”‚  â†’ Táº¥t cáº£ components subscribe!                 â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  GIáº¢I THÃCH Tá»ªNG PHáº¦N:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  APP ROOT:                                             â”‚
  â”‚  â†’ Entry point, mount app                              â”‚
  â”‚  â†’ Subscribe vÃ o Client Store                          â”‚
  â”‚  â†’ Pass data xuá»‘ng children                           â”‚
  â”‚                                                        â”‚
  â”‚  CALENDAR CONTROLS:                                    â”‚
  â”‚  â†’ NÃºt táº¡o event, search, theme, language            â”‚
  â”‚  â†’ Fire events â†’ Event Bus â†’ Update Store            â”‚
  â”‚                                                        â”‚
  â”‚  CALENDAR VIEW (3 implementations):                    â”‚
  â”‚  â†’ YearView: dÃ¹ng MonthCell (x12)                    â”‚
  â”‚  â†’ MonthView: dÃ¹ng DayCell (x28-31)                  â”‚
  â”‚  â†’ DayView: dÃ¹ng EventCell (x events)                â”‚
  â”‚                                                        â”‚
  â”‚  EVENT VIEW:                                           â”‚
  â”‚  â†’ Generic component hiá»ƒn thá»‹ event info              â”‚
  â”‚  â†’ DÃ¹ng chung bá»Ÿi Táº¤T Cáº¢ views!                   â”‚
  â”‚  â†’ Fire "Load Event Details" event khi click         â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§6. Data Model â€” Thiáº¿t Káº¿ MÃ´ HÃ¬nh Dá»¯ Liá»‡u

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  DATA MODEL = Cáº¤U TRÃšC Dá»® LIá»†U QUYáº¾T Äá»ŠNH Táº¤T Cáº¢!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  6 NGUYÃŠN Táº®C THIáº¾T Káº¾ DATA MODEL:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  UNIVERSAL ENTITY â€” CÃ¹ng entity cho Táº¤T Cáº¢ views! â”‚
  â”‚  â†’ Year/Month/Day Ä‘á»u dÃ¹ng CÃ™NG Event entity!       â”‚
  â”‚  â†’ KHÃ”NG duplicate data cho má»—i view!                â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ JSON-FRIENDLY â€” Dá»… serialize/deserialize!         â”‚
  â”‚  â†’ Export: Event â†’ JSON â†’ .ics file                  â”‚
  â”‚  â†’ Import: .ics file â†’ JSON â†’ Event                  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ EFFICIENT MUTATIONS â€” Chá»‰ mutate pháº§n cáº§n!      â”‚
  â”‚  â†’ Update 1 event â†’ KHÃ”NG rebuild toÃ n bá»™ store!   â”‚
  â”‚  â†’ CHá»ˆ thay Ä‘á»•i pháº§n dá»¯ liá»‡u liÃªn quan!          â”‚
  â”‚  â†’ Ãt CPU-intensive tasks!                           â”‚
  â”‚                                                        â”‚
  â”‚  â‘£ O(1) ACCESS â€” Truy cáº­p INSTANT!                   â”‚
  â”‚  â†’ TÃ¬m event báº±ng ID â†’ pages[id] â†’ DONE!           â”‚
  â”‚  â†’ KHÃ”NG search, KHÃ”NG loop toÃ n bá»™!               â”‚
  â”‚                                                        â”‚
  â”‚  â‘¤ MINIMAL TRANSFORMATION â€” Server â‰ˆ Client!        â”‚
  â”‚  â†’ Server entity gáº§n giá»‘ng client entity!            â”‚
  â”‚  â†’ Ãt pháº£i transform data!                          â”‚
  â”‚                                                        â”‚
  â”‚  â‘¥ CONFLICT DETECTION â€” PhÃ¡t hiá»‡n events chá»“ng chÃ©o!â”‚
  â”‚  â†’ ÄÃ‚Y LÃ€ YÃŠU Cáº¦U KHÃ“ NHáº¤T!                      â”‚
  â”‚  â†’ Cáº§n data structure Äáº¶C BIá»†T!                    â”‚
  â”‚  â†’ â†’ INTERVAL TREE!                                  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  EVENT ENTITY:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  type CalendarStore = {                                â”‚
  â”‚    events: Map<string, Event>;   // â† FLATTENED MAP!  â”‚
  â”‚    //  key = event ID                                  â”‚
  â”‚    //  value = Event object                            â”‚
  â”‚    //  â†’ O(1) access báº±ng ID!                        â”‚
  â”‚                                                        â”‚
  â”‚    clientState: {                                      â”‚
  â”‚      selectedView: 'year' | 'month' | 'day';          â”‚
  â”‚      language: string;                                 â”‚
  â”‚      timezone: string;                                 â”‚
  â”‚      // ... more UI state                              â”‚
  â”‚    };                                                  â”‚
  â”‚                                                        â”‚
  â”‚    intervalTree: IntervalTree;    // â† CLIENT-SIDE!   â”‚
  â”‚    //  â†’ Chá»©a EVENT IDs (khÃ´ng pháº£i full events!)   â”‚
  â”‚    //  â†’ DÃ¹ng Ä‘á»ƒ search + detect conflicts!          â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  type Event = {                                        â”‚
  â”‚    id: string;                                         â”‚
  â”‚    title: string;                                      â”‚
  â”‚    description?: string;    // Rich text (HTML/MD)     â”‚
  â”‚    startTimestamp: number;   // Unix timestamp          â”‚
  â”‚    endTimestamp: number;     // Unix timestamp          â”‚
  â”‚    participants: UserInfo[]; // Danh sÃ¡ch tham gia   â”‚
  â”‚    conflictingEvents?: string[];  // â† LINKED LIST!  â”‚
  â”‚    //  â†‘ IDs of events xung Ä‘á»™t!                    â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â”‚  type UserInfo = {                                     â”‚
  â”‚    email: string;                                      â”‚
  â”‚    firstName: string;                                  â”‚
  â”‚    lastName: string;                                   â”‚
  â”‚  };                                                    â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ Táº I SAO dÃ¹ng TIMESTAMP thay vÃ¬ Date string?       â”‚
  â”‚  â†’ Timestamp = sá»‘, Dá»„ so sÃ¡nh!                      â”‚
  â”‚  â†’ Timezone-agnostic â†’ convert trÃªn UI!              â”‚
  â”‚  â†’ Interval Tree Cáº¦N sá»‘ Ä‘á»ƒ so sÃ¡nh!               â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§7. Interval Tree â€” Cáº¥u TrÃºc Dá»¯ Liá»‡u Cho Conflict Detection

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  INTERVAL TREE = "VÅ¨ KHÃ BÃ Máº¬T" CHO CALENDAR!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  Váº¤N Äá»€ Cáº¦N GIáº¢I QUYáº¾T:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  CÃ³ 2 events:                                          â”‚
  â”‚  Event A: 11 Jun â†’ 11 Jul (1 thÃ¡ng!)                 â”‚
  â”‚  Event B: 25 Jun â†’ 11 Jul                             â”‚
  â”‚                                                        â”‚
  â”‚  HÃ´m nay: 30 Jun                                      â”‚
  â”‚  â†’ Há»I: NgÃ y 30 Jun cÃ³ events nÃ o?                  â”‚
  â”‚  â†’ ÄÃP: Cáº¢ HAI! VÃ  chÃºng CONFLICT!                 â”‚
  â”‚                                                        â”‚
  â”‚        Jun                            Jul              â”‚
  â”‚  â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€         â”‚
  â”‚   11   â”‚â–‘â–‘â–‘â–‘ Event A â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚ 11            â”‚
  â”‚        â”‚                   â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â”‚                â”‚
  â”‚   25   â”‚              â–‘â–‘â–‘â–‘ Event B â–‘â–‘â–‘â”‚ 11            â”‚
  â”‚        â”‚                   â†‘           â”‚                â”‚
  â”‚        â”‚             30 Jun = CONFLICT!â”‚                â”‚
  â”‚  â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€         â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  3 CÃCH TIáº¾P Cáº¬N â€” Tá»ª Tá»† Äáº¾N Tá»T:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  âŒ CÃCH 1: ARRAY SCAN                                â”‚
  â”‚  â†’ LÆ°u events trong array                            â”‚
  â”‚  â†’ Má»—i ngÃ y: scan TOÃ€N Bá»˜ array tÃ¬m events         â”‚
  â”‚  â†’ Complexity: O(365 Ã— N) cho 1 nÄƒm!                â”‚
  â”‚  â†’ N lá»›n â†’ CHáº¬M!                                    â”‚
  â”‚                                                        â”‚
  â”‚  âš ï¸ CÃCH 2: DATE MAP                                  â”‚
  â”‚  â†’ Map<date, Event[]>                                  â”‚
  â”‚  â†’ Key = ngÃ y, Value = array events                   â”‚
  â”‚  â†’ O(1) access má»—i ngÃ y!                            â”‚
  â”‚  â†’ NHÆ¯NG: Event span 1 nÄƒm = push 365 Láº¦N!        â”‚
  â”‚  â†’ DUPLICATION cá»±c ká»³ lÃ£ng phÃ­!                     â”‚
  â”‚                                                        â”‚
  â”‚  âœ… CÃCH 3: INTERVAL TREE â† Tá»I Æ¯U NHáº¤T!           â”‚
  â”‚  â†’ Binary Search Tree Äáº¶C BIá»†T!                     â”‚
  â”‚  â†’ DÃ¹ng start timestamp Ä‘á»ƒ sáº¯p xáº¿p!                â”‚
  â”‚  â†’ Search: O(log N) cho má»—i ngÃ y!                   â”‚
  â”‚  â†’ KHÃ”NG duplication!                                 â”‚
  â”‚  â†’ Insert/Delete: O(log N)!                           â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  INTERVAL TREE LÃ€ GÃŒ?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Interval Tree = CÃ¢y nhá»‹ phÃ¢n tÃ¬m kiáº¿m (BST)       â”‚
  â”‚  nhÆ°ng má»—i NODE lÆ°u 1 KHOáº¢NG (interval)!            â”‚
  â”‚                                                        â”‚
  â”‚  Má»—i node chá»©a:                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
  â”‚  â”‚  {                                    â”‚              â”‚
  â”‚  â”‚    eventId: string,                    â”‚              â”‚
  â”‚  â”‚    start: number,    // start timestampâ”‚              â”‚
  â”‚  â”‚    end: number,      // end timestamp  â”‚              â”‚
  â”‚  â”‚    max: number,      // MAX end date   â”‚              â”‚
  â”‚  â”‚                      // trong subtree! â”‚              â”‚
  â”‚  â”‚    left: Node | null,                  â”‚              â”‚
  â”‚  â”‚    right: Node | null                  â”‚              â”‚
  â”‚  â”‚  }                                    â”‚              â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
  â”‚                                                        â”‚
  â”‚  QUY Táº®C XÃ‚Y Dá»°NG:                                    â”‚
  â”‚  â†’ start < root.start â†’ Ä‘i TRÃI!                    â”‚
  â”‚  â†’ start > root.start â†’ Ä‘i PHáº¢I!                    â”‚
  â”‚  â†’ Giá»‘ng BST, nhÆ°ng dÃ¹ng START DATE!                 â”‚
  â”‚                                                        â”‚
  â”‚  TRÆ¯á»œNG MAX:                                           â”‚
  â”‚  â†’ max = END DATE Lá»šN NHáº¤T trong subtree!           â”‚
  â”‚  â†’ DÃ¹ng Ä‘á»ƒ Cáº®T nhÃ¡nh khi search!                   â”‚
  â”‚  â†’ Náº¿u target > max â†’ KHÃ”NG Cáº¦N tÃ¬m nhÃ¡nh nÃ y!   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  VÃ Dá»¤ XÃ‚Y Dá»°NG INTERVAL TREE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  6 Events:                                             â”‚
  â”‚  A: Jun 10 â†’ Jun 16                                   â”‚
  â”‚  B: Jun 7  â†’ Jun 14                                   â”‚
  â”‚  C: Jun 17 â†’ Jul 2                                    â”‚
  â”‚  D: Jun 1  â†’ Jun 2                                    â”‚
  â”‚  E: Jun 11 â†’ Jun 18                                   â”‚
  â”‚  F: Jun 30 â†’ Jul 5                                    â”‚
  â”‚                                                        â”‚
  â”‚  XÃ‚Y Dá»°NG (insert theo thá»© tá»± Aâ†’F):                 â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 1: Insert A (Jun 10-16) â†’ ROOT                 â”‚
  â”‚                                                        â”‚
  â”‚              [A: 10-16]                                â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 2: Insert B (Jun 7-14)                          â”‚
  â”‚  â†’ 7 < 10 â†’ Ä‘i TRÃI!                               â”‚
  â”‚                                                        â”‚
  â”‚              [A: 10-16]                                â”‚
  â”‚              /                                         â”‚
  â”‚        [B: 7-14]                                       â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 3: Insert C (Jun 17-Jul 2)                      â”‚
  â”‚  â†’ 17 > 10 â†’ Ä‘i PHáº¢I!                               â”‚
  â”‚                                                        â”‚
  â”‚              [A: 10-16]                                â”‚
  â”‚              /         \                               â”‚
  â”‚        [B: 7-14]    [C: 17-Jul2]                      â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 4: Insert D (Jun 1-2)                           â”‚
  â”‚  â†’ 1 < 10 â†’ trÃ¡i, 1 < 7 â†’ trÃ¡i tiáº¿p!              â”‚
  â”‚                                                        â”‚
  â”‚              [A: 10-16]                                â”‚
  â”‚              /         \                               â”‚
  â”‚        [B: 7-14]    [C: 17-Jul2]                      â”‚
  â”‚        /                                               â”‚
  â”‚   [D: 1-2]                                             â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 5: Insert E (Jun 11-18)                         â”‚
  â”‚  â†’ 11 > 10 â†’ pháº£i, 11 < 17 â†’ trÃ¡i!                 â”‚
  â”‚                                                        â”‚
  â”‚              [A: 10-16]                                â”‚
  â”‚              /         \                               â”‚
  â”‚        [B: 7-14]    [C: 17-Jul2]                      â”‚
  â”‚        /             /                                 â”‚
  â”‚   [D: 1-2]    [E: 11-18]                              â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 6: Insert F (Jun 30-Jul5)                       â”‚
  â”‚  â†’ 30 > 10 â†’ pháº£i, 30 > 17 â†’ pháº£i tiáº¿p!           â”‚
  â”‚                                                        â”‚
  â”‚              [A: 10-16]                                â”‚
  â”‚              /         \                               â”‚
  â”‚        [B: 7-14]    [C: 17-Jul2]                      â”‚
  â”‚        /             /         \                       â”‚
  â”‚   [D: 1-2]    [E: 11-18]   [F: 30-Jul5]              â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  TÃNH MAX (tá»« dÆ°á»›i lÃªn):                             â”‚
  â”‚                                                        â”‚
  â”‚          [A: 10-16, max=Jul5]        â† max toÃ n cÃ¢y â”‚
  â”‚           /                \                           â”‚
  â”‚    [B: 7-14       [C: 17-Jul2                          â”‚
  â”‚     max=Jun14]     max=Jul5]                           â”‚
  â”‚      /              /         \                        â”‚
  â”‚  [D: 1-2     [E: 11-18   [F: 30-Jul5                  â”‚
  â”‚   max=Jun2]   max=Jun18]  max=Jul5]                   â”‚
  â”‚                                                        â”‚
  â”‚  max táº¡i má»—i node = MAX(node.end,                    â”‚
  â”‚                          left.max, right.max)          â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§8. Interval Tree â€” Search Algorithm (TÃ¬m Kiáº¿m)

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  SEARCH = TÃŒM EVENTS ÄANG Xáº¢Y RA TRONG 1 NGÃ€Y!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  THUáº¬T TOÃN SEARCH:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  INPUT: target date (VD: June 23)                      â”‚
  â”‚  OUTPUT: Táº¥t cáº£ events Ä‘ang diá»…n ra vÃ o ngÃ y Ä‘Ã³!  â”‚
  â”‚                                                        â”‚
  â”‚  2 ÄIá»€U KIá»†N KIá»‚M TRA Táº I Má»–I NODE:                â”‚
  â”‚                                                        â”‚
  â”‚  â‘  MAX CHECK:                                         â”‚
  â”‚  â†’ target > node.max?                                  â”‚
  â”‚  â†’ Náº¾U CÃ“ â†’ Bá» QUA cáº£ nhÃ¡nh nÃ y!                 â”‚
  â”‚  â†’ LÃ½ do: KHÃ”NG CÃ“ event nÃ o káº¿t thÃºc sau max!    â”‚
  â”‚  â†’ Tiáº¿t kiá»‡m HÃ€NG NGHÃŒN phÃ©p so sÃ¡nh!             â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ RANGE CHECK:                                       â”‚
  â”‚  â†’ node.start <= target <= node.end?                   â”‚
  â”‚  â†’ Náº¾U CÃ“ â†’ EVENT NÃ€Y ÄANG DIá»„N RA! â†’ CHá»ŒN!     â”‚
  â”‚  â†’ Náº¾U KHÃ”NG â†’ Bá» qua node nÃ y, check children!    â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  VÃ Dá»¤ 1: TÃŒM EVENTS NGÃ€Y JUN 23
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  DÃ¹ng cÃ¢y Ä‘Ã£ xÃ¢y:                                    â”‚
  â”‚                                                        â”‚
  â”‚          [A: 10-16, max=Jul5]                          â”‚
  â”‚           /                \                           â”‚
  â”‚    [B: 7-14       [C: 17-Jul2                          â”‚
  â”‚     max=14]        max=Jul5]                           â”‚
  â”‚      /              /         \                        â”‚
  â”‚  [D: 1-2       [E: 11-18   [F: 30-Jul5                â”‚
  â”‚   max=2]        max=18]    max=Jul5]                   â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 1: Check ROOT [A: 10-16, max=Jul5]              â”‚
  â”‚  â†’ Max check: 23 < Jul5? âœ… CÃ“ â†’ tiáº¿p tá»¥c!       â”‚
  â”‚  â†’ Range check: 10 â‰¤ 23 â‰¤ 16? âŒ KHÃ”NG!            â”‚
  â”‚  â†’ A KHÃ”NG diá»…n ra ngÃ y 23 â†’ check children!       â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 2: Check LEFT [B: 7-14, max=14]                 â”‚
  â”‚  â†’ Max check: 23 > 14? âŒ Dá»ªNG Cáº¢ NHÃNH TRÃI!    â”‚
  â”‚  â†’ KhÃ´ng cáº§n check D ná»¯a! â†’ Tiáº¿t kiá»‡m!            â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 3: Check RIGHT [C: 17-Jul2, max=Jul5]           â”‚
  â”‚  â†’ Max check: 23 < Jul5? âœ… OK!                      â”‚
  â”‚  â†’ Range check: 17 â‰¤ 23 â‰¤ Jul2? âœ… CHá»ŒN C!         â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 4: Check LEFT of C [E: 11-18, max=18]           â”‚
  â”‚  â†’ Max check: 23 > 18? âŒ Dá»ªNG!                     â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 5: Check RIGHT of C [F: 30-Jul5, max=Jul5]      â”‚
  â”‚  â†’ Max check: 23 < Jul5? âœ… OK!                      â”‚
  â”‚  â†’ Range check: 30 â‰¤ 23? âŒ KHÃ”NG!                  â”‚
  â”‚                                                        â”‚
  â”‚  Káº¾T QUáº¢: Chá»‰ cÃ³ EVENT C diá»…n ra ngÃ y Jun 23!     â”‚
  â”‚  â†’ Chá»‰ cáº§n 5 comparisons thay vÃ¬ scan 6 events!    â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  VÃ Dá»¤ 2: TÃŒM EVENTS NGÃ€Y JUN 13 â†’ 3 Káº¾T QUáº¢!
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 1: ROOT [A: 10-16, max=Jul5]                    â”‚
  â”‚  â†’ Max: 13 < Jul5 âœ… | Range: 10 â‰¤ 13 â‰¤ 16 âœ…     â”‚
  â”‚  â†’ CHá»ŒN A!                                            â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 2: LEFT [B: 7-14, max=14]                       â”‚
  â”‚  â†’ Max: 13 < 14 âœ… | Range: 7 â‰¤ 13 â‰¤ 14 âœ…         â”‚
  â”‚  â†’ CHá»ŒN B!                                            â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 3: LEFT of B [D: 1-2, max=2]                    â”‚
  â”‚  â†’ Max: 13 > 2 âŒ Dá»ªNG!                              â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 4: RIGHT [C: 17-Jul2, max=Jul5]                 â”‚
  â”‚  â†’ Max: 13 < Jul5 âœ… | Range: 17 â‰¤ 13? âŒ           â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 5: LEFT of C [E: 11-18, max=18]                â”‚
  â”‚  â†’ Max: 13 < 18 âœ… | Range: 11 â‰¤ 13 â‰¤ 18 âœ…        â”‚
  â”‚  â†’ CHá»ŒN E!                                            â”‚
  â”‚                                                        â”‚
  â”‚  BÆ¯á»šC 6: RIGHT of C [F: 30-Jul5]                      â”‚
  â”‚  â†’ Range: 30 â‰¤ 13? âŒ                                â”‚
  â”‚                                                        â”‚
  â”‚  Káº¾T QUáº¢: Events A, B, E â†’ 3 events CONFLICT!       â”‚
  â”‚  â†’ Populate conflictingEvents cho má»—i event!        â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§9. Interval Tree â€” Complexity Analysis (PhÃ¢n TÃ­ch Äá»™ Phá»©c Táº¡p)

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  COMPLEXITY = Táº I SAO INTERVAL TREE LÃ€ Tá»I Æ¯U?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  SO SÃNH 3 APPROACH:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
  â”‚  â”‚ Operation      â”‚ Array    â”‚ Date Map â”‚ Interval â”‚   â”‚
  â”‚  â”‚                â”‚          â”‚          â”‚ Tree     â”‚   â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤   â”‚
  â”‚  â”‚ Search 1 ngÃ y â”‚ O(N)     â”‚ O(1)     â”‚ O(logN)  â”‚   â”‚
  â”‚  â”‚ Search 1 nÄƒm  â”‚ O(365Ã—N) â”‚ O(365)   â”‚O(365logN)â”‚   â”‚
  â”‚  â”‚ Insert         â”‚ O(1)     â”‚ O(days)  â”‚ O(logN)  â”‚   â”‚
  â”‚  â”‚ Delete         â”‚ O(N)     â”‚ O(days)  â”‚ O(logN)  â”‚   â”‚
  â”‚  â”‚ Memory         â”‚ O(N)     â”‚ O(NÃ—days)â”‚ O(N)     â”‚   â”‚
  â”‚  â”‚ Duplication    â”‚ KhÃ´ng   â”‚ CÃ“! âŒ  â”‚ KhÃ´ng  â”‚   â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
  â”‚                                                        â”‚
  â”‚  (N = sá»‘ events, days = sá»‘ ngÃ y event kÃ©o dÃ i)      â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  INTERVAL TREE THáº®NG VÃŒ:                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚  â‘  Search O(logN) â€” Cá»°C NHANH!                  â”‚  â”‚
  â”‚  â”‚  â‘¡ Insert O(logN) â€” ThÃªm event nhanh!           â”‚  â”‚
  â”‚  â”‚  â‘¢ Delete O(logN) â€” XÃ³a event nhanh!            â”‚  â”‚
  â”‚  â”‚  â‘£ Memory O(N)  â€” KHÃ”NG duplicate!               â”‚  â”‚
  â”‚  â”‚  â‘¤ Conflict detection = search result!           â”‚  â”‚
  â”‚  â”‚     â†’ Náº¿u search 1 ngÃ y ra 2+ events            â”‚  â”‚
  â”‚  â”‚     â†’ Tá»± Ä‘á»™ng biáº¿t cÃ³ CONFLICT!                 â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  VÃ Dá»¤ THá»°C Táº¾:                                      â”‚
  â”‚  â†’ 1000 events/nÄƒm                                   â”‚
  â”‚  â†’ Array: 365 Ã— 1000 = 365,000 operations!           â”‚
  â”‚  â†’ Interval Tree: 365 Ã— logâ‚‚(1000)                   â”‚
  â”‚    = 365 Ã— ~10 = 3,650 operations!                    â”‚
  â”‚  â†’ Nhanh hÆ¡n 100 Láº¦N!                               â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  TRONG á»¨NG Dá»¤NG:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
  â”‚  â”‚  SERVER   â”‚â”€â”€â”€â–¶â”‚  Events Map      â”‚                  â”‚
  â”‚  â”‚ (events)  â”‚    â”‚  (ID â†’ Event)    â”‚                  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  â†’ O(1) access!  â”‚                  â”‚
  â”‚       â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
  â”‚       â”‚                                                â”‚
  â”‚       â–¼                                                â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
  â”‚  â”‚  Interval Tree    â”‚                                  â”‚
  â”‚  â”‚  (CLIENT-SIDE!)   â”‚                                  â”‚
  â”‚  â”‚  â†’ chá»©a event IDsâ”‚                                  â”‚
  â”‚  â”‚  â†’ dÃ¹ng start/endâ”‚                                  â”‚
  â”‚  â”‚    timestamps     â”‚                                  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
  â”‚           â”‚                                            â”‚
  â”‚           â–¼                                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                  â”‚
  â”‚  â”‚  Search(date)     â”‚                                  â”‚
  â”‚  â”‚  â†’ tráº£ vá» IDs   â”‚                                  â”‚
  â”‚  â”‚  â†’ dÃ¹ng IDs Ä‘á»ƒ  â”‚                                  â”‚
  â”‚  â”‚    lookup Events â”‚                                  â”‚
  â”‚  â”‚    Map!           â”‚                                  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                  â”‚
  â”‚                                                        â”‚
  â”‚  ğŸ’¡ Interval Tree CHá»ˆ chá»©a IDs!                      â”‚
  â”‚  â†’ Mutation events â†’ Sá»¬A trong Events Map!           â”‚
  â”‚  â†’ KHÃ”NG Sá»¬A tree (trá»« khi thÃªm/xÃ³a event!)       â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§10. Data Transferring â€” Truyá»n Táº£i Dá»¯ Liá»‡u

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  DATA TRANSFER = CHá»ŒN ÄÃšNG PROTOCOL CHO CALENDAR!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  3 Lá»°A CHá»ŒN PROTOCOL:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  LONG POLLING:                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
  â”‚  â”‚  Client â”€â”€requestâ”€â”€â–¶ Server                  â”‚       â”‚
  â”‚  â”‚  Client â—€â”€â”€wait...â”€â”€  Server (giá»¯ open!)    â”‚       â”‚
  â”‚  â”‚  Client â—€â”€â”€responseâ”€â”€ Server (cÃ³ data thÃ¬  â”‚       â”‚
  â”‚  â”‚                              má»›i tráº£!)     â”‚       â”‚
  â”‚  â”‚  Client â”€â”€requestâ”€â”€â–¶ Server (láº·p láº¡i!)     â”‚       â”‚
  â”‚  â”‚                                              â”‚       â”‚
  â”‚  â”‚  âœ… Dá»… implement!                           â”‚       â”‚
  â”‚  â”‚  âš ï¸ Latency cao (calendar cháº¥p nháº­n Ä‘Æ°á»£c!) â”‚       â”‚
  â”‚  â”‚  âš ï¸ Connection timeout khi di chuyá»ƒn       â”‚       â”‚
  â”‚  â”‚  âŒ Traffic overhead (full request má»—i láº§n!)â”‚       â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ WEBSOCKET:                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
  â”‚  â”‚  Client â—€â•â•â• FULL DUPLEX â•â•â•â–¶ Server       â”‚       â”‚
  â”‚  â”‚  (gá»­i + nháº­n Äá»’NG THá»œI!)                  â”‚       â”‚
  â”‚  â”‚                                              â”‚       â”‚
  â”‚  â”‚  âœ… Cá»±c nhanh! Real-time!                   â”‚       â”‚
  â”‚  â”‚  âœ… Full duplex communication                â”‚       â”‚
  â”‚  â”‚  âŒ OVERKILL cho calendar!                   â”‚       â”‚
  â”‚  â”‚  âŒ Giá»¯ connection = Tá»N TÃ€I NGUYÃŠN!       â”‚       â”‚
  â”‚  â”‚  âŒ KHÃ”NG tÆ°Æ¡ng thÃ­ch HTTP/2!              â”‚       â”‚
  â”‚  â”‚  âŒ KhÃ³ load balance!                       â”‚       â”‚
  â”‚  â”‚  âŒ DÃ¹ng DUPLEX antenna â†’ Tá»N PIN!         â”‚       â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ SERVER-SENT EVENTS (SSE): â† CHá»ŒN CÃI NÃ€Y!       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”‚
  â”‚  â”‚  Client â—€â•â•â•â• ONE WAY â•â•â•â• Server            â”‚       â”‚
  â”‚  â”‚  (Server PUSH data cho Client!)              â”‚       â”‚
  â”‚  â”‚                                              â”‚       â”‚
  â”‚  â”‚  âœ… HTTP/2 compatible!                       â”‚       â”‚
  â”‚  â”‚  âœ… Chá»‰ nháº­n data Cáº¦N THIáº¾T!              â”‚       â”‚
  â”‚  â”‚  âœ… Text format â€” Ä‘á»§ cho calendar!          â”‚       â”‚
  â”‚  â”‚  âœ… DÃ¹ng MONO antenna â†’ TIáº¾T KIá»†M PIN!    â”‚       â”‚
  â”‚  â”‚  âœ… Dá»… load balance (scalable!)             â”‚       â”‚
  â”‚  â”‚  âœ… Auto-reconnect!                          â”‚       â”‚
  â”‚  â”‚  âš ï¸ Unidirectional â€” OK vÃ¬ client gá»­i     â”‚       â”‚
  â”‚  â”‚     qua GraphQL mutation!                    â”‚       â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜       â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  ğŸ’¡ Táº I SAO SSE TIáº¾T KIá»†M PIN?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Mobile device cÃ³ 2 cháº¿ Ä‘á»™ antenna:                  â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚  DUPLEX ANTENNA (WebSocket):              â”‚          â”‚
  â”‚  â”‚  ğŸ“± â—€â•â•â•â•â•â•â•â–¶ ğŸ“¡                         â”‚          â”‚
  â”‚  â”‚  â†’ Gá»­i + Nháº­n Äá»’NG THá»œI                 â”‚          â”‚
  â”‚  â”‚  â†’ NÄƒng lÆ°á»£ng: â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ CAO!              â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
  â”‚  â”‚  MONO ANTENNA (SSE):                      â”‚          â”‚
  â”‚  â”‚  ï¿½ï¿½ â—€â•â•â•â•â•â•â• ğŸ“¡                          â”‚          â”‚
  â”‚  â”‚  â†’ CHá»ˆ Nháº­n                               â”‚          â”‚
  â”‚  â”‚  â†’ NÄƒng lÆ°á»£ng: â–ˆâ–ˆâ–ˆâ–ˆ THáº¤P!                â”‚          â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
  â”‚                                                        â”‚
  â”‚  Calendar = mobile-first â†’ SSE WIN!                   â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§11. API Design â€” SSE + GraphQL

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  API = SSE + GRAPHQL = COMBO HOÃ€N Háº¢O!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  3 API METHODS:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â‘  SUBSCRIBE EVENTS:                                  â”‚
  â”‚  â†’ subscribeEvents(apiKey, userId, timestamp, period) â”‚
  â”‚  â†’ ÄÄƒng kÃ½ nháº­n events cho 1 khoáº£ng thá»i gian!    â”‚
  â”‚  â†’ VD: subscribe(today, "year") â†’ events cáº£ nÄƒm!   â”‚
  â”‚  â†’ Láº§n Ä‘áº§u: nháº­n CHUNK Lá»šN events!                 â”‚
  â”‚  â†’ Sau Ä‘Ã³: nháº­n LIVE UPDATES nhá»!                  â”‚
  â”‚                                                        â”‚
  â”‚  â‘¡ GET EVENT INFO:                                    â”‚
  â”‚  â†’ getEventInfo(eventId)                               â”‚
  â”‚  â†’ Fetch FULL details khi user click event!            â”‚
  â”‚  â†’ Tiáº¿t kiá»‡m: KHÃ”NG fetch full details ban Ä‘áº§u!    â”‚
  â”‚  â†’ Chá»‰ fetch khi Cáº¦N!                               â”‚
  â”‚                                                        â”‚
  â”‚  â‘¢ MUTATE EVENTS:                                     â”‚
  â”‚  â†’ createEvent(mutation)                               â”‚
  â”‚  â†’ updateEvent(mutation)                               â”‚
  â”‚  â†’ deleteEvent(mutation)                               â”‚
  â”‚  â†’ GraphQL Mutations!                                  â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  Táº I SAO GRAPHQL + SSE?
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  HTTP/2 Spec:                                          â”‚
  â”‚  â””â”€â”€ Defines: SSE (Server-Sent Events)                 â”‚
  â”‚                                                        â”‚
  â”‚  GraphQL Spec:                                         â”‚
  â”‚  â”œâ”€â”€ Defines: Subscriptions â† implement báº±ng SSE!   â”‚
  â”‚  â”œâ”€â”€ Defines: Mutations â† create/update/delete!       â”‚
  â”‚  â””â”€â”€ Defines: Root fields â† query data!              â”‚
  â”‚                                                        â”‚
  â”‚  â†’ GraphQL SUBSCRIPTION over SSE = PERFECT!           â”‚
  â”‚  â†’ CÃ³ thá»ƒ implement subscription báº±ng:               â”‚
  â”‚    â”œâ”€â”€ SSE (Äá»€ XUáº¤T! âœ…)                             â”‚
  â”‚    â”œâ”€â”€ WebSocket                                       â”‚
  â”‚    â””â”€â”€ Long Polling                                    â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  GRAPHQL vs REST:                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
  â”‚  â”‚ GraphQL            â”‚ REST                 â”‚         â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤         â”‚
  â”‚  â”‚ âœ… Single endpoint â”‚ âŒ Nhiá»u endpoints  â”‚         â”‚
  â”‚  â”‚ âœ… Select EXACT    â”‚ âŒ Over-fetching     â”‚         â”‚
  â”‚  â”‚    fields cáº§n!    â”‚    hoáº·c nhiá»u calls â”‚         â”‚
  â”‚  â”‚ âœ… Subscription   â”‚ âŒ Pháº£i tá»± implementâ”‚         â”‚
  â”‚  â”‚    built-in!       â”‚    polling            â”‚         â”‚
  â”‚  â”‚ âœ… Type-safe       â”‚ âœ… HTTP caching!     â”‚         â”‚
  â”‚  â”‚ âŒ KhÃ´ng cÃ³ HTTP â”‚ âœ… Simple CRUD       â”‚         â”‚
  â”‚  â”‚    caching (POST!) â”‚                      â”‚         â”‚
  â”‚  â”‚ âŒ Cáº§n client libâ”‚ âœ… fetch() Ä‘á»§!      â”‚         â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
  â”‚                                                        â”‚
  â”‚  â†’ Calendar chá»n GraphQL vÃ¬:                         â”‚
  â”‚    â‘  Subscription cho live updates!                   â”‚
  â”‚    â‘¡ Select EXACT fields (tiáº¿t kiá»‡m bandwidth!)    â”‚
  â”‚    â‘¢ Flexible query (different views, different data) â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§12. Data Flow â€” Luá»“ng Dá»¯ Liá»‡u ToÃ n á»¨ng Dá»¥ng

```
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  DATA FLOW = EVENT-DRIVEN ARCHITECTURE!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•


  LUá»’NG Dá»® LIá»†U:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  init event   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
  â”‚  â”‚ APP ROOT â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶â”‚ EVENT BUSâ”‚               â”‚
  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜               â”‚
  â”‚      â”‚                          â”‚                      â”‚
  â”‚      â”‚ subscribe                â”‚ pass events          â”‚
  â”‚      â”‚                          â”‚                      â”‚
  â”‚      â–¼                          â–¼                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
  â”‚  â”‚ CLIENT   â”‚â—€â”€â”€â”€â”€ update â”€â”€â”‚  EVENT   â”‚               â”‚
  â”‚  â”‚ STORE    â”‚               â”‚ HANDLER  â”‚               â”‚
  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”˜               â”‚
  â”‚      â”‚                          â”‚                      â”‚
  â”‚      â”‚ data changed!            â”‚ async action         â”‚
  â”‚      â”‚                          â”‚ (fetch/update)       â”‚
  â”‚      â–¼                          â–¼                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”‚
  â”‚  â”‚ CALENDAR â”‚               â”‚  SERVER  â”‚               â”‚
  â”‚  â”‚ VIEW     â”‚               â”‚  (API)   â”‚               â”‚
  â”‚  â””â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜               â”‚
  â”‚      â”‚                                                 â”‚
  â”‚      â”‚ render                                          â”‚
  â”‚      â”‚                                                 â”‚
  â”‚      â”œâ”€â”€â”€â”€â”€â”€â–¶ MonthCell                                â”‚
  â”‚      â”œâ”€â”€â”€â”€â”€â”€â–¶ DayCell                                  â”‚
  â”‚      â””â”€â”€â”€â”€â”€â”€â–¶ EventCell                                â”‚
  â”‚                  â”‚                                     â”‚
  â”‚                  â”‚ click event                         â”‚
  â”‚                  â–¼                                     â”‚
  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                              â”‚
  â”‚              â”‚ EVENT    â”‚  "Load Details"               â”‚
  â”‚              â”‚ VIEW     â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Event Bus     â”‚
  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â†’ vÃ²ng láº·p!                â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


  EVENT-DRIVEN ARCHITECTURE = Redux/Zustand!
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                        â”‚
  â”‚  Trong React:                                          â”‚
  â”‚  â†’ CLIENT STORE = Redux Store / Zustand Store          â”‚
  â”‚  â†’ EVENT BUS = dispatch() / action                     â”‚
  â”‚  â†’ EVENT HANDLER = Reducer + Middleware (Saga/Thunk)  â”‚
  â”‚                                                        â”‚
  â”‚  GENERIC PATTERN:                                      â”‚
  â”‚  â‘  Component fire event (dispatch action)             â”‚
  â”‚  â‘¡ Event Bus nháº­n + forward tá»›i Handler              â”‚
  â”‚  â‘¢ Handler xá»­ lÃ½ (async fetch, call API...)         â”‚
  â”‚  â‘£ Handler update Store                                â”‚
  â”‚  â‘¤ Store thay Ä‘á»•i â†’ Components re-render!           â”‚
  â”‚  â†’ VÃ’NG Láº¶P!                                         â”‚
  â”‚                                                        â”‚
  â”‚                                                        â”‚
  â”‚  SSE INTEGRATION:                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
  â”‚  â”‚  Server â”€â”€SSE pushâ”€â”€â–¶ Event Handler           â”‚      â”‚
  â”‚  â”‚  â†’ Handler update Store                        â”‚      â”‚
  â”‚  â”‚  â†’ Components auto re-render!                  â”‚      â”‚
  â”‚  â”‚  â†’ User tháº¥y live updates NGAY Láº¬P Tá»¨C!     â”‚      â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
  â”‚                                                        â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```


## Â§13. Rendering Optimization â€” Toi Uu Hoa Rendering

```
================================================================
  RENDERING = SMOOTH ANIMATION KHI SWITCH VIEWS!
================================================================


  VAN DE:
  +------------------------------------------------------------+
  |                                                            |
  |  User switch tu nam 2022 -> 2023:                          |
  |  -> Can re-fetch events cho 2023!                          |
  |  -> Can re-render calendar cells!                          |
  |  -> Neu cham -> user THAY LAG!                             |
  |                                                            |
  |  KHONG can virtualization (it elements!)                   |
  |  NHUNG can smooth transitions!                             |
  |                                                            |
  +------------------------------------------------------------+


  2 GIAI PHAP:
  +------------------------------------------------------------+
  |                                                            |
  |  (1) SOFT UPDATE (Don gian):                               |
  |  +----------------------------------------------+          |
  |  |  Switch year -> update text fields truc tiep  |          |
  |  |  -> Fetch data moi -> re-render cells         |          |
  |  |                                               |          |
  |  |  [+] De implement!                            |          |
  |  |  [-] Co the lag khi re-render!                 |          |
  |  |  [-] Switch nhanh = NHIEU requests!            |          |
  |  +----------------------------------------------+          |
  |                                                            |
  |                                                            |
  |  (2) PRE-RENDERING (De xuat!):                             |
  |  +----------------------------------------------+          |
  |  |  Pre-render cac periods TRUOC + SAU!          |          |
  |  |  Dung CSS transform de SLIDE vao man hinh!   |          |
  |  |                                               |          |
  |  |  [+] Previous + Next da RENDER SAN!           |          |
  |  |  [+] Chi can CSS transform -> SMOOTH!          |          |
  |  |  [+] Khong re-render -> fast!                  |          |
  |  |  [-] Render nhieu elements hon!                |          |
  |  |  [-] Kho implement hon!                        |          |
  |  +----------------------------------------------+          |
  |                                                            |
  +------------------------------------------------------------+


  PRE-RENDERING HOAT DONG THE NAO?
  +------------------------------------------------------------+
  |                                                            |
  |  Visible area = 1 man hinh (VD: nam 2022)                 |
  |  Hidden areas = periods truoc + sau!                       |
  |                                                            |
  |  +--------+  +--------+  +--------+                       |
  |  |  2021  |  |  2022  |  |  2023  |                       |
  |  | HIDDEN |  |VISIBLE |  | HIDDEN |                       |
  |  | (left) |  | (user  |  | (right)|                       |
  |  |        |  |  sees) |  |        |                       |
  |  +--------+  +--------+  +--------+                       |
  |                                                            |
  |  User click "Next" (-> 2023):                              |
  |                                                            |
  |  CSS: translateX(-100%)                                    |
  |  +--------+  +--------+  +--------+                       |
  |  |  2021  |  |  2022  |  |  2023  |                       |
  |  | -200%  |  | -100%  |  |VISIBLE |  <-- SMOOTH SLIDE!    |
  |  +--------+  +--------+  +--------+                       |
  |                            +--------+                      |
  |                            |  2024  |  <-- PRE-RENDER MOI! |
  |                            | HIDDEN |                      |
  |                            +--------+                      |
  |                                                            |
  |                                                            |
  |  BUFFER SIZE:                                              |
  |  -> VD: 4 screens trai + 1 visible + 4 screens phai       |
  |  -> Tong = 9 screens pre-rendered!                         |
  |  -> User switch NHANH -> van smooth!                       |
  |                                                            |
  |                                                            |
  |  TAI SAO SMOOTH?                                           |
  |  -> CSS transform = CHI PAINT step!                        |
  |  -> KHONG trigger reflow/relayout!                         |
  |  -> GPU-accelerated!                                       |
  |  -> Browser chi DICH CHUYEN pixels!                        |
  |                                                            |
  +------------------------------------------------------------+
```

```css
/* Pre-rendering CSS Implementation */
.calendar-container {
  display: flex;
  overflow: hidden;
  width: 100vw;
}

.calendar-period {
  min-width: 100vw;
  transition: transform 0.3s ease-out;
  /* GPU-accelerated! Khong trigger reflow! */
  will-change: transform;
}

/* Khi switch sang period tiep theo */
.calendar-container.slide-left .calendar-period {
  transform: translateX(-100%);
}

/* Khi switch ve period truoc do */
.calendar-container.slide-right .calendar-period {
  transform: translateX(100%);
}
```

---

## Â§14. Notification System â€” He Thong Thong Bao

```
================================================================
  NOTIFICATIONS = NHAC NHO USER VE EVENTS!
================================================================


  2 CACH BRIDGE DEN MOBILE:
  +------------------------------------------------------------+
  |                                                            |
  |  (1) WEB PUSH NOTIFICATIONS:                               |
  |  +----------------------------------------------+          |
  |  |  Web Push API -> Browser -> User               |          |
  |  |                                               |          |
  |  |  -> Moi device deu co browser!                 |          |
  |  |  -> Browser ho tro push notifications!         |          |
  |  |                                               |          |
  |  |  CACH HOAT DONG:                               |          |
  |  |  (1) App xin phep push permission              |          |
  |  |  (2) User dong y -> nhan push token            |          |
  |  |  (3) Server gui push qua Push Service          |          |
  |  |  (4) Browser hien notification!                |          |
  |  |                                               |          |
  |  |  [-] Can user CONSENT! (thuong user tu choi!) |          |
  |  |  [-] Can push server rieng (backend work!)     |          |
  |  |  [+] Hoat dong ca khi tab dong!                |          |
  |  +----------------------------------------------+          |
  |                                                            |
  |                                                            |
  |  (2) DEEP LINKS:                                           |
  |  +----------------------------------------------+          |
  |  |  Link dac biet -> mo app tren dien thoai!      |          |
  |  |                                               |          |
  |  |  VD: alarm://create?time=09:00&label=Meeting  |          |
  |  |  -> Mo app Alarm -> tao alarm tu dong!         |          |
  |  |                                               |          |
  |  |  [+] Bridge truc tiep den native apps!         |          |
  |  |  [-] Phu thuoc vao app co ho tro link khong!  |          |
  |  |  [-] Khong phai app nao cung ho tro!           |          |
  |  +----------------------------------------------+          |
  |                                                            |
  +------------------------------------------------------------+
```

---

## Â§15. App Optimizations â€” Toi Uu Hoa Ung Dung

```
================================================================
  OPTIMIZATION = WEB APP NHANH NHU NATIVE!
================================================================


  A. NETWORK OPTIMIZATIONS:
  +------------------------------------------------------------+
  |                                                            |
  |  (1) BUNDLE SPLITTING (HTTP/2):                            |
  |  -> HTTP/2 cho phep tai NHIEU files dong thoi!             |
  |  -> Split bundle thanh nhieu files nho!                    |
  |  -> Load sau: link rel="preconnect"                        |
  |                                                            |
  |  (2) COMPRESSION:                                          |
  |  -> Brotli > Gzip (hieu qua hon 30-33%!)                  |
  |  -> Developed by Google!                                   |
  |  -> Tat ca browsers hien dai deu ho tro!                   |
  |                                                            |
  |  (3) DIFFERENTIAL BUNDLING:                                |
  |  -> ES6 bundle: cho browsers moi (nhe hon!)                |
  |  -> ES5 bundle: cho browsers cu (co polyfills!)            |
  |  -> Browsers moi = download IT hon!                        |
  |                                                            |
  +------------------------------------------------------------+


  B. RENDERING OPTIMIZATIONS:
  +------------------------------------------------------------+
  |                                                            |
  |  (1) CSS ANIMATIONS (KHONG JS ANIMATIONS!):                |
  |  -> transform, opacity = GPU-accelerated!                  |
  |  -> KHONG trigger reflow!                                  |
  |  -> Pre-rendering + translateX = SMOOTH!                   |
  |                                                            |
  |  (2) SOFT WRITES (KHONG ADD/REMOVE NODES!):                |
  |  -> Update noi dung cua cells = NHANH!                     |
  |  -> Remove + create DOM nodes = CHAM!                      |
  |  -> Thay doi textContent thay vi innerHTML!                |
  |                                                            |
  |  (3) CSS NAMING (BEM):                                     |
  |  -> .block__element--modifier                              |
  |  -> Flat selector = FAST CSS matching!                     |
  |  -> TRANH deep nesting!                                    |
  |                                                            |
  +------------------------------------------------------------+


  C. JS PERFORMANCE:
  +------------------------------------------------------------+
  |                                                            |
  |  (1) EFFICIENT DATA STRUCTURES:                            |
  |  -> Interval Tree: O(logN) search!                         |
  |  -> Events Map: O(1) access!                               |
  |  -> CHI mutate piece of data can thiet!                    |
  |                                                            |
  |  (2) MINIFY + SHIP LESS POLYFILLS:                         |
  |  -> Code minified -> nho hon!                              |
  |  -> Browsers moi -> KHONG can polyfills!                   |
  |                                                            |
  +------------------------------------------------------------+


  D. PWA OPTIMIZATIONS:
  +------------------------------------------------------------+
  |                                                            |
  |  (1) SERVICE WORKER:                                       |
  |  -> Cache ALL static resources!                            |
  |  -> App hoat dong OFFLINE!                                 |
  |  -> Background sync khi co mang!                           |
  |                                                            |
  |  (2) CRITICAL RESOURCES INLINE:                            |
  |  -> Inline CSS/JS critical cho first paint!                |
  |  -> Non-critical resources load sau!                       |
  |  -> User thay content NHANH NHAT CO THE!                   |
  |                                                            |
  |  (3) SKELETON/PLACEHOLDER:                                 |
  |  -> Hien skeleton khi loading!                             |
  |  -> User biet app dang load!                               |
  |  -> Perceived performance tot hon!                         |
  |                                                            |
  +------------------------------------------------------------+
```

---

## Â§16. Accessibility â€” Kha Nang Tiep Can

```
================================================================
  ACCESSIBILITY = CALENDAR CHO MOI NGUOI!
================================================================


  5 TRUC ACCESSIBILITY:
  +------------------------------------------------------------+
  |                                                            |
  |  (1) REM UNITS (KHONG PIXELS!):                            |
  |  -> px = CO DINH, KHONG scale!                             |
  |  -> rem = scale theo browser font-size!                    |
  |  -> User tang font -> toan bo app tang!                    |
  |                                                            |
  |  (2) KEYBOARD HOTKEYS:                                     |
  |  -> Next/Previous period = arrow keys!                     |
  |  -> Search event = Ctrl+F / Cmd+K                          |
  |  -> Help menu = ?                                          |
  |  -> Tab = navigate giua cells!                             |
  |                                                            |
  |  (3) ARIA role="grid":                                     |
  |  -> Calendar = interactive grid/table!                     |
  |  -> Danh dau bang role="grid"!                             |
  |  -> Screen reader BIET day la calendar!                    |
  |  -> Tung cell co role="gridcell"!                          |
  |                                                            |
  |  (4) SEMANTIC HTML5:                                       |
  |  -> table cho calendar grid!                               |
  |  -> button cho interactive elements!                       |
  |  -> time cho timestamps!                                   |
  |  -> nav cho navigation controls!                           |
  |                                                            |
  |  (5) COLOR SCHEMES:                                        |
  |  -> Ho tro nguoi mu mau (color blindness)!                 |
  |  -> KHONG chi dung MAU de truyen dat thong tin!            |
  |  -> Ket hop: mau + icon + text!                            |
  |  -> prefers-color-scheme media query!                      |
  |  -> High contrast mode!                                    |
  |                                                            |
  +------------------------------------------------------------+
```

---

## Â§17. React/Next.js Implementation â€” Code Thuc Te

```
================================================================
  IMPLEMENT = BIEN THIET KE THANH CODE!
================================================================
```

```typescript
// ================================================
// 1. TYPE DEFINITIONS
// ================================================

interface CalendarEvent {
  id: string;
  title: string;
  description?: string;
  startTimestamp: number;
  endTimestamp: number;
  participants: UserInfo[];
  conflictingEvents?: string[];
}

interface UserInfo {
  email: string;
  firstName: string;
  lastName: string;
}

type ViewType = 'year' | 'month' | 'day';

interface CalendarState {
  events: Record<string, CalendarEvent>;
  intervalTree: IntervalTreeNode | null;
  selectedView: ViewType;
  currentDate: number; // timestamp
}

// ================================================
// 2. INTERVAL TREE IMPLEMENTATION
// ================================================

interface IntervalTreeNode {
  eventId: string;
  start: number;
  end: number;
  max: number;
  left: IntervalTreeNode | null;
  right: IntervalTreeNode | null;
}

function insertNode(
  root: IntervalTreeNode | null,
  eventId: string,
  start: number,
  end: number
): IntervalTreeNode {
  if (!root) {
    return { eventId, start, end, max: end, left: null, right: null };
  }

  if (start < root.start) {
    root.left = insertNode(root.left, eventId, start, end);
  } else {
    root.right = insertNode(root.right, eventId, start, end);
  }

  // Update max!
  root.max = Math.max(root.max, end);
  return root;
}

function searchOverlapping(
  root: IntervalTreeNode | null,
  target: number
): string[] {
  const results: string[] = [];

  function search(node: IntervalTreeNode | null) {
    if (!node) return;

    // MAX CHECK: target > max -> skip branch!
    if (target > node.max) return;

    // RANGE CHECK: start <= target <= end?
    if (node.start <= target && target <= node.end) {
      results.push(node.eventId);
    }

    // Search both children!
    search(node.left);
    search(node.right);
  }

  search(root);
  return results;
}

// ================================================
// 3. CALENDAR STORE (Zustand)
// ================================================

/*
import { create } from 'zustand';

const useCalendarStore = create<CalendarState>((set, get) => ({
  events: {},
  intervalTree: null,
  selectedView: 'month',
  currentDate: Date.now(),

  addEvent: (event: CalendarEvent) => {
    set((state) => ({
      events: { ...state.events, [event.id]: event },
      intervalTree: insertNode(
        state.intervalTree,
        event.id,
        event.startTimestamp,
        event.endTimestamp
      ),
    }));
  },

  getEventsForDate: (date: number): CalendarEvent[] => {
    const state = get();
    const eventIds = searchOverlapping(state.intervalTree, date);
    return eventIds.map((id) => state.events[id]).filter(Boolean);
  },

  switchView: (view: ViewType) => set({ selectedView: view }),
  setCurrentDate: (date: number) => set({ currentDate: date }),
}));
*/

// ================================================
// 4. PRE-RENDERING HOOK
// ================================================

/*
function usePreRendering(currentYear: number, bufferSize = 4) {
  return useMemo(() => {
    const years: number[] = [];
    for (let i = currentYear - bufferSize; i <= currentYear + bufferSize; i++) {
      years.push(i);
    }
    return years;
  }, [currentYear, bufferSize]);
}
*/

// ================================================
// 5. CALENDAR VIEW COMPONENT
// ================================================

/*
const CalendarView: React.FC = () => {
  const { selectedView, currentDate } = useCalendarStore();

  switch (selectedView) {
    case 'year':
      return <YearView currentDate={currentDate} />;
    case 'month':
      return <MonthView currentDate={currentDate} />;
    case 'day':
      return <DayView currentDate={currentDate} />;
  }
};

const YearView: React.FC<{ currentDate: number }> = ({ currentDate }) => {
  const year = new Date(currentDate).getFullYear();
  const preRenderedYears = usePreRendering(year);

  return (
    <div className="calendar-container" role="grid"
         aria-label={`Calendar for ${year}`}>
      {preRenderedYears.map((y) => (
        <div key={y} className="calendar-period"
             style={{
               transform: `translateX(${(y - year) * 100}%)`,
             }}>
          {Array.from({ length: 12 }, (_, i) => (
            <MonthCell key={i} year={y} month={i}
                       role="gridcell" />
          ))}
        </div>
      ))}
    </div>
  );
};
*/
```

---

## Â§18. Interview Q&A â€” Cau Hoi Phong Van

```
================================================================
  Q&A = CHUAN BI CHO MOI CAU HOI!
================================================================


  Q1: Tai sao chon Interval Tree thay vi Date Map?
  +------------------------------------------------------------+
  |  -> Date Map: O(1) search NHUNG duplicate KHUNG!           |
  |  -> Event keo dai 1 nam = push 365 LAN!                   |
  |  -> Interval Tree: O(logN) search, KHONG duplicate!        |
  |  -> Memory O(N) thay vi O(N * days)!                       |
  |  -> Conflict detection = TU DONG tu search result!         |
  +------------------------------------------------------------+


  Q2: SSE vs WebSocket cho calendar?
  +------------------------------------------------------------+
  |  -> Calendar KHONG can full-duplex!                        |
  |  -> Client gui qua GraphQL mutation (HTTP POST)!           |
  |  -> Server push updates qua SSE (one-way)!                |
  |  -> SSE: HTTP/2 compatible, auto-reconnect!                |
  |  -> SSE: MONO antenna = TIET KIEM PIN mobile!             |
  |  -> WebSocket: duplex antenna = TON PIN!                   |
  |  -> Calendar = mobile-first -> SSE thang!                  |
  +------------------------------------------------------------+


  Q3: Lam sao smooth animation khi switch views?
  +------------------------------------------------------------+
  |  -> PRE-RENDERING!                                         |
  |  -> Render san periods truoc + sau (hidden offscreen)!     |
  |  -> Switch = CSS translateX() -> SMOOTH animation!         |
  |  -> translateX() = GPU-accelerated, KHONG reflow!          |
  |  -> VD: Buffer 4 trai + 1 visible + 4 phai = 9 screens!  |
  +------------------------------------------------------------+


  Q4: Lam sao handle offline mode?
  +------------------------------------------------------------+
  |  -> PWA voi Service Worker!                                |
  |  -> Cache tat ca static assets (HTML, CSS, JS)!            |
  |  -> Events luu trong IndexedDB (client-side)!              |
  |  -> User edit offline -> luu local!                        |
  |  -> Co mang -> background sync len server!                 |
  |  -> Conflict resolution: Last Write Wins hoac CRDT!        |
  +------------------------------------------------------------+


  Q5: Tai sao GraphQL thay vi REST cho calendar?
  +------------------------------------------------------------+
  |  -> GraphQL co Subscription BUILT-IN!                      |
  |  -> Implement subscription bang SSE -> perfect!            |
  |  -> Select exact fields -> tiet kiem bandwidth!            |
  |  -> Single endpoint -> don gian hon nhieu endpoints!       |
  |  -> Type-safe schema -> it bugs!                           |
  |  -> Trade-off: khong co HTTP caching (dung POST)!          |
  |  -> Nhung dung client lib (Apollo) de cache client-side!   |
  +------------------------------------------------------------+


  Q6: Conflicting events duoc xu ly the nao tren UI?
  +------------------------------------------------------------+
  |  -> Search Interval Tree cho ngay dang xem!                |
  |  -> Ket qua >= 2 events -> CONFLICT!                      |
  |  -> Populate conflictingEvents[] cho moi event!            |
  |  -> UI: hien thi events SONG SONG (side by side)!         |
  |  -> Hoac: highlight bang mau canh bao!                     |
  |  -> Accessibility: icon + text "Conflict" (khong chi mau)! |
  +------------------------------------------------------------+


  Q7: Optimizations nao quan trong nhat cho mobile calendar?
  +------------------------------------------------------------+
  |  -> (1) SSE thay WebSocket = tiet kiem pin!                |
  |  -> (2) GraphQL select fields = tiet kiem bandwidth!       |
  |  -> (3) Service Worker = offline capability!               |
  |  -> (4) Brotli compression = giam 30% size!               |
  |  -> (5) Pre-rendering + CSS transform = smooth UX!        |
  |  -> (6) Interval Tree = efficient search O(logN)!         |
  +------------------------------------------------------------+


  Q8: Architecture cua calendar khac gi so voi chat app?
  +------------------------------------------------------------+
  |  -> Calendar: SSE (one-way) du roi!                        |
  |  -> Chat: CAN WebSocket (full-duplex, real-time!)          |
  |  -> Calendar: Interval Tree cho conflict detection!        |
  |  -> Chat: Message queue + pagination!                      |
  |  -> Calendar: Pre-rendering cho smooth switch!             |
  |  -> Chat: Virtualization cho long message list!            |
  |  -> KHAC NHAU VE REQUIREMENTS -> KHAC ARCHITECTURE!        |
  +------------------------------------------------------------+
```

---

> **KET LUAN:**
> Google Calendar system design la bai toan tuyet voi cho phong van front-end vi no bao quat:
> - **Interval Tree** â€” Cau truc du lieu cho conflict detection (O(logN)!)
> - **Event-driven Architecture** â€” Redux/Zustand pattern
> - **SSE + GraphQL** â€” Mobile-first protocol (tiet kiem pin!)
> - **Pre-rendering** â€” CSS transforms cho smooth animation
> - **PWA** â€” Offline-first voi Service Worker
> - **Accessibility** â€” ARIA role="grid", keyboard nav, rem units
>
> Diem noi bat SO VOI cac bai toan khac:
> - **Interval Tree** = VU KHI BI MAT (hiem thay o bai toan khac!)
> - **Mobile battery** = SSE mono antenna (hiem ai de cap!)
> - **Pre-rendering** = CSS translateX (khong virtualization!)
