# React Context â€” Tiáº¿n HÃ³a & CÆ¡ Cháº¿ BÃªn Trong â€” Deep Dive!

> **Chá»§ Ä‘á»**: Old Context API â†’ Context Interruption â†’ Pub/Sub DI â†’ New Context API â†’ Source Code
> **NgÃ´n ngá»¯**: Tiáº¿ng Viá»‡t â€” giáº£i thÃ­ch cá»±c ká»³ chi tiáº¿t!
> **PhÆ°Æ¡ng chÃ¢m**: Tá»± viáº¿t láº¡i báº±ng tay â€” KHÃ”NG dÃ¹ng thÆ° viá»‡n!
> **Nguá»“n**: "The Evolution and Underlying Implementation of React Context" â€” Juejin

---

## Má»¥c Lá»¥c

1. [Â§1. Tá»•ng Quan â€” Context LÃ  GÃ¬?](#1)
2. [Â§2. Old Context API â€” getChildContext](#2)
3. [Â§3. Context Interruption â€” PureComponent!](#3)
4. [Â§4. Giáº£i PhÃ¡p â€” Pub/Sub DI System](#4)
5. [Â§5. New Context API â€” createContext](#5)
6. [Â§6. Tá»± Viáº¿t createContext â€” Pub/Sub](#6)
7. [Â§7. Source Code â€” ReactContext.js](#7)
8. [Â§8. So SÃ¡nh Old vs New Context](#8)
9. [Â§9. SÆ¡ Äá»“ Tá»± Váº½](#9)
10. [Â§10. Tá»± Viáº¿t â€” ContextEngine](#10)
11. [Â§11. CÃ¢u Há»i Luyá»‡n Táº­p](#11)

---

## Â§1. Tá»•ng Quan â€” Context LÃ  GÃ¬?

```
  REACT CONTEXT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  Váº¤N Äá»€:                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ TRUYá»€N DATA QUA PROPS â€” "Prop Drilling"!            â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ <App theme="dark">                                   â”‚    â”‚
  â”‚  â”‚   <Layout theme={theme}>     â† truyá»n xuá»‘ng!      â”‚    â”‚
  â”‚  â”‚     <Sidebar theme={theme}>  â† truyá»n tiáº¿p!       â”‚    â”‚
  â”‚  â”‚       <Nav theme={theme}>    â† truyá»n tiáº¿p!       â”‚    â”‚
  â”‚  â”‚         <Button theme={theme}/> â† CUá»I CÃ™NG!      â”‚    â”‚
  â”‚  â”‚       </Nav>                                         â”‚    â”‚
  â”‚  â”‚     </Sidebar>                                       â”‚    â”‚
  â”‚  â”‚   </Layout>                                          â”‚    â”‚
  â”‚  â”‚ </App>                                               â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ 4 táº§ng truyá»n prop!                              â”‚    â”‚
  â”‚  â”‚ â†’ Layout, Sidebar, Nav KHÃ”NG cáº§n theme!            â”‚    â”‚
  â”‚  â”‚ â†’ Chá»‰ Button cáº§n! NhÆ°ng pháº£i truyá»n qua 4 táº§ng! â”‚    â”‚
  â”‚  â”‚ â†’ PHIá»€N PHá»¨C! KhÃ³ maintain! âŒ                    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  GIáº¢I PHÃP â€” CONTEXT:                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ Context = TRUYá»€N DATA XUYÃŠN Táº¦NG!                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ <ThemeContext.Provider value="dark">                 â”‚    â”‚
  â”‚  â”‚   <Layout>                   â† KHÃ”NG cáº§n prop!    â”‚    â”‚
  â”‚  â”‚     <Sidebar>                â† KHÃ”NG cáº§n prop!    â”‚    â”‚
  â”‚  â”‚       <Nav>                  â† KHÃ”NG cáº§n prop!    â”‚    â”‚
  â”‚  â”‚         <Button />           â† TRá»°C TIáº¾P Ä‘á»c! âœ… â”‚    â”‚
  â”‚  â”‚       </Nav>                                         â”‚    â”‚
  â”‚  â”‚     </Sidebar>                                       â”‚    â”‚
  â”‚  â”‚   </Layout>                                          â”‚    â”‚
  â”‚  â”‚ </ThemeContext.Provider>                              â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â†’ Skip trung gian! Truyá»n TRá»°C TIáº¾P!             â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  USE CASES:                                                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ UI Theme (dark/light mode!)                       â”‚    â”‚
  â”‚  â”‚ â†’ Locale / Language preference!                     â”‚    â”‚
  â”‚  â”‚ â†’ Auth / Current user!                              â”‚    â”‚
  â”‚  â”‚ â†’ Redux Store (react-redux dÃ¹ng Context!)          â”‚    â”‚
  â”‚  â”‚ â†’ Router state!                                     â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§2. Old Context API â€” getChildContext!

```
  OLD CONTEXT API:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  CÃš PHÃP (React < 16.3):                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // â”€â”€ PARENT: Cung cáº¥p Context â”€â”€                   â”‚    â”‚
  â”‚  â”‚ class Parent extends React.Component {               â”‚    â”‚
  â”‚  â”‚   state = { value: 'foo' };                          â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   // â‘  getChildContext: Táº O context object!        â”‚    â”‚
  â”‚  â”‚   // Gá»i láº¡i khi state/props thay Ä‘á»•i!             â”‚    â”‚
  â”‚  â”‚   getChildContext() {                                â”‚    â”‚
  â”‚  â”‚     return { value: this.state.value };              â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   render() {                                         â”‚    â”‚
  â”‚  â”‚     return <Child />;                                â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ // â‘¡ childContextTypes: KHAI BÃO types!            â”‚    â”‚
  â”‚  â”‚ Parent.childContextTypes = {                         â”‚    â”‚
  â”‚  â”‚   value: PropTypes.string                            â”‚    â”‚
  â”‚  â”‚ };                                                   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ // â”€â”€ CHILD: Nháº­n Context â”€â”€                         â”‚    â”‚
  â”‚  â”‚ class Child extends React.Component {                â”‚    â”‚
  â”‚  â”‚   render() {                                         â”‚    â”‚
  â”‚  â”‚     // â‘£ this.context.value: Äá»ŒC giÃ¡ trá»‹!        â”‚    â”‚
  â”‚  â”‚     return <p>{this.context.value}</p>;              â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ // â‘¢ contextTypes: ÄÄ‚NG KÃ nháº­n!                  â”‚    â”‚
  â”‚  â”‚ Child.contextTypes = {                               â”‚    â”‚
  â”‚  â”‚   value: PropTypes.string                            â”‚    â”‚
  â”‚  â”‚ };                                                   â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  FLOW:                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â‘  Parent khai bÃ¡o childContextTypes (static!)      â”‚    â”‚
  â”‚  â”‚ â‘¡ Parent implement getChildContext() â†’ object!     â”‚    â”‚
  â”‚  â”‚ â‘¢ Child khai bÃ¡o contextTypes (static!)             â”‚    â”‚
  â”‚  â”‚ â‘£ Child Ä‘á»c this.context.value â†’ data!            â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ State thay Ä‘á»•i â†’ getChildContext() gá»i láº¡i!        â”‚    â”‚
  â”‚  â”‚ â†’ Context object Má»šI â†’ truyá»n xuá»‘ng child tree!   â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  REACT KHUYáº¾N CÃO KHÃ”NG DÃ™NG! âš ï¸                           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ API phá»©c táº¡p (PropTypes, static properties!)     â”‚    â”‚
  â”‚  â”‚ â†’ Context Interruption Problem! (PureComponent!)   â”‚    â”‚
  â”‚  â”‚ â†’ KhÃ´ng reliable! Component Máº¤T KIá»‚M SOÃT!       â”‚    â”‚
  â”‚  â”‚ â†’ Deprecated tá»« React 16.3!                        â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§3. Context Interruption â€” PureComponent!

```
  CONTEXT INTERRUPTION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  Váº¤N Äá»€:                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ Khi component TRUNG GIAN cÃ³                          â”‚    â”‚
  â”‚  â”‚ shouldComponentUpdate return FALSE                   â”‚    â”‚
  â”‚  â”‚ (hoáº·c dÃ¹ng PureComponent!)                          â”‚    â”‚
  â”‚  â”‚ â†’ Context KHÃ”NG truyá»n Ä‘Æ°á»£c xuá»‘ng! âŒ              â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  CODE MINH Há»ŒA:                                               â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // Child dÃ¹ng PureComponent!                         â”‚    â”‚
  â”‚  â”‚ class Child extends React.PureComponent {            â”‚    â”‚
  â”‚  â”‚   render() {                                         â”‚    â”‚
  â”‚  â”‚     return <GrandChild />;                           â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ class GrandChild extends React.Component {           â”‚    â”‚
  â”‚  â”‚   render() {                                         â”‚    â”‚
  â”‚  â”‚     return <p>{this.context.theme}</p>;              â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚ GrandChild.contextTypes = {                          â”‚    â”‚
  â”‚  â”‚   theme: PropTypes.string                            â”‚    â”‚
  â”‚  â”‚ };                                                   â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ class Parent extends React.Component {               â”‚    â”‚
  â”‚  â”‚   state = { theme: 'red' };                          â”‚    â”‚
  â”‚  â”‚   getChildContext() {                                â”‚    â”‚
  â”‚  â”‚     return { theme: this.state.theme };              â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚   render() {                                         â”‚    â”‚
  â”‚  â”‚     return (                                         â”‚    â”‚
  â”‚  â”‚       <div onClick={() =>                            â”‚    â”‚
  â”‚  â”‚         this.setState({ theme: 'blue' })}>           â”‚    â”‚
  â”‚  â”‚         <Child />                                    â”‚    â”‚
  â”‚  â”‚       </div>                                         â”‚    â”‚
  â”‚  â”‚     );                                               â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  TIMELINE:                                                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â‘  Parent setState({ theme: 'blue' })               â”‚    â”‚
  â”‚  â”‚ â‘¡ Parent re-render â†’ getChildContext â†’ {blue}     â”‚    â”‚
  â”‚  â”‚ â‘¢ React Ä‘áº¿n Child (PureComponent!)                 â”‚    â”‚
  â”‚  â”‚ â‘£ Child: shouldComponentUpdate?                     â”‚    â”‚
  â”‚  â”‚    â†’ props KHÃ”NG Ä‘á»•i! state KHÃ”NG Ä‘á»•i!            â”‚    â”‚
  â”‚  â”‚    â†’ return FALSE! â†’ SKIP render! âŒ              â”‚    â”‚
  â”‚  â”‚ â‘¤ Child SKIP â†’ GrandChild CÃ’N KHÃ”NG ÄÆ¯á»¢C RENDER!â”‚    â”‚
  â”‚  â”‚ â‘¥ GrandChild VáºªN tháº¥y "red" â†’ KHÃ”NG update! ğŸ”´ â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ Context TRUYá»€N QUA render tree!                     â”‚    â”‚
  â”‚  â”‚ PureComponent CHáº¶N render â†’ CHáº¶N luÃ´n Context!   â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  NGUYÃŠN NHÃ‚N Gá»C:                                             â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ Old Context:                                         â”‚    â”‚
  â”‚  â”‚ â†’ Context truyá»n QUA render tree!                   â”‚    â”‚
  â”‚  â”‚ â†’ shouldComponentUpdate = false â†’ CHáº¶N render!     â”‚    â”‚
  â”‚  â”‚ â†’ Cháº·n render = CHáº¶N Context!                     â”‚    â”‚
  â”‚  â”‚ â†’ Component dÃ¹ng Context Máº¤T KIá»‚M SOÃT!          â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ MÃ‚U THUáºªN:                                          â”‚    â”‚
  â”‚  â”‚ â†’ PureComponent: MUá»N giáº£m render thá»«a!           â”‚    â”‚
  â”‚  â”‚ â†’ Context: Cáº¦N render Ä‘á»ƒ truyá»n data!             â”‚    â”‚
  â”‚  â”‚ â†’ 2 má»¥c tiÃªu XUNG Äá»˜T! âŒ                       â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§4. Giáº£i PhÃ¡p â€” Pub/Sub DI System!

```
  PUB/SUB DI:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  Ã TÆ¯á»NG:                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ Context bá»‹ cháº·n bá»Ÿi PureComponent!               â”‚    â”‚
  â”‚  â”‚ â†’ Váº­y Äá»ªNG update context!                         â”‚    â”‚
  â”‚  â”‚ â†’ Thay vÃ o Ä‘Ã³: truyá»n 1 STORE qua context!        â”‚    â”‚
  â”‚  â”‚ â†’ Store = object Cá» Äá»ŠNH (reference khÃ´ng Ä‘á»•i!)   â”‚    â”‚
  â”‚  â”‚ â†’ PureComponent: props/state khÃ´ng Ä‘á»•i â†’ skip! âœ… â”‚    â”‚
  â”‚  â”‚ â†’ NhÆ°ng STORE Ná»˜I Bá»˜ thay Ä‘á»•i!                   â”‚    â”‚
  â”‚  â”‚ â†’ Component SUBSCRIBE â†’ forceUpdate khi cáº§n!      â”‚    â”‚
  â”‚  â”‚ â†’ BYPASS PureComponent! âœ…                        â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  CODE â€” THEME STORE:                                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // â‘  Dependency Injection System!                   â”‚    â”‚
  â”‚  â”‚ class Theme {                                        â”‚    â”‚
  â”‚  â”‚   constructor(value) {                               â”‚    â”‚
  â”‚  â”‚     this.value = value;                              â”‚    â”‚
  â”‚  â”‚     this.subscriptions = [];                         â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   setValue(value) {                                   â”‚    â”‚
  â”‚  â”‚     this.value = value;                              â”‚    â”‚
  â”‚  â”‚     // PUBLISH: thÃ´ng bÃ¡o Táº¤T Cáº¢ subscribers!     â”‚    â”‚
  â”‚  â”‚     this.subscriptions.forEach(f => f());            â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   subscribe(f) {                                     â”‚    â”‚
  â”‚  â”‚     this.subscriptions.push(f);                      â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  PARENT â€” Táº O STORE + TRUYá»€N QUA CONTEXT:                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ class Parent extends React.Component {               â”‚    â”‚
  â”‚  â”‚   constructor(p, c) {                                â”‚    â”‚
  â”‚  â”‚     super(p, c);                                     â”‚    â”‚
  â”‚  â”‚     // â‘¡ Táº¡o store 1 Láº¦N!                         â”‚    â”‚
  â”‚  â”‚     this.theme = new Theme('blue');                  â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   // â‘¢ Context LUÃ”N tráº£ vá» CÃ™NG object!           â”‚    â”‚
  â”‚  â”‚   getChildContext() {                                â”‚    â”‚
  â”‚  â”‚     return { theme: this.theme };                    â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   render() {                                         â”‚    â”‚
  â”‚  â”‚     return (                                         â”‚    â”‚
  â”‚  â”‚       <div onClick={() => {                          â”‚    â”‚
  â”‚  â”‚         // â‘¥ PUBLISH qua store!                    â”‚    â”‚
  â”‚  â”‚         this.theme.setValue('red');                   â”‚    â”‚
  â”‚  â”‚       }}>                                            â”‚    â”‚
  â”‚  â”‚         <Child />                                    â”‚    â”‚
  â”‚  â”‚       </div>                                         â”‚    â”‚
  â”‚  â”‚     );                                               â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  GRANDCHILD â€” SUBSCRIBE:                                      â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ class GrandChild extends React.Component {           â”‚    â”‚
  â”‚  â”‚   componentDidMount() {                              â”‚    â”‚
  â”‚  â”‚     // â‘£ SUBSCRIBE â†’ forceUpdate khi store thay Ä‘á»•i!â”‚  â”‚
  â”‚  â”‚     this.context.theme.subscribe(                    â”‚    â”‚
  â”‚  â”‚       () => this.forceUpdate()                       â”‚    â”‚
  â”‚  â”‚     );                                               â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   render() {                                         â”‚    â”‚
  â”‚  â”‚     // â‘¤ Äá»c value tá»« store!                      â”‚    â”‚
  â”‚  â”‚     return <p>{this.context.theme.value}</p>;        â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  Táº I SAO HOáº T Äá»˜NG?                                           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ Context truyá»n STORE object (reference Cá» Äá»ŠNH!)â”‚    â”‚
  â”‚  â”‚ â†’ PureComponent: props/state khÃ´ng Ä‘á»•i â†’ skip! âœ… â”‚    â”‚
  â”‚  â”‚ â†’ Store Ná»˜I Bá»˜ thay Ä‘á»•i â†’ publish!                â”‚    â”‚
  â”‚  â”‚ â†’ GrandChild SUBSCRIBE â†’ forceUpdate Tá»° MÃŒNH!    â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG Cáº¦N render tree! Bypass PureComponent!    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â˜… Giá»‘ng React-Redux! Store qua Context + Subscribe!â”‚   â”‚
  â”‚  â”‚ â˜… Giá»‘ng Mobx! Observable + Observer pattern!       â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§5. New Context API â€” createContext!

```
  NEW CONTEXT API (React 16.3+):
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  CÃš PHÃP:                                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // â‘  Táº¡o Context vá»›i defaultValue!                  â”‚    â”‚
  â”‚  â”‚ const ThemeContext = React.createContext('dark');     â”‚    â”‚
  â”‚  â”‚ const { Provider, Consumer } = ThemeContext;         â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ // â”€â”€ PARENT: Cung cáº¥p value â”€â”€                     â”‚    â”‚
  â”‚  â”‚ class Parent extends React.Component {               â”‚    â”‚
  â”‚  â”‚   state = { theme: 'dark' };                         â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   render() {                                         â”‚    â”‚
  â”‚  â”‚     // â‘¡ Provider truyá»n value!                    â”‚    â”‚
  â”‚  â”‚     return (                                         â”‚    â”‚
  â”‚  â”‚       <Provider value={this.state.theme}>            â”‚    â”‚
  â”‚  â”‚         <Child />                                    â”‚    â”‚
  â”‚  â”‚       </Provider>                                    â”‚    â”‚
  â”‚  â”‚     );                                               â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ // â”€â”€ CHILD: Nháº­n value â”€â”€                           â”‚    â”‚
  â”‚  â”‚ class Child extends React.Component {                â”‚    â”‚
  â”‚  â”‚   render() {                                         â”‚    â”‚
  â”‚  â”‚     return (                                         â”‚    â”‚
  â”‚  â”‚       // â‘¢ Consumer: render prop pattern!           â”‚    â”‚
  â”‚  â”‚       <Consumer>                                     â”‚    â”‚
  â”‚  â”‚         {(theme) => <button>{theme}</button>}        â”‚    â”‚
  â”‚  â”‚       </Consumer>                                    â”‚    â”‚
  â”‚  â”‚     );                                               â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  3 CÃCH Äá»ŒC CONTEXT:                                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â‘  Consumer (render prop):                           â”‚    â”‚
  â”‚  â”‚   <ThemeContext.Consumer>                             â”‚    â”‚
  â”‚  â”‚     {value => <div>{value}</div>}                    â”‚    â”‚
  â”‚  â”‚   </ThemeContext.Consumer>                            â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â‘¡ contextType (class component):                    â”‚    â”‚
  â”‚  â”‚   static contextType = ThemeContext;                  â”‚    â”‚
  â”‚  â”‚   render() { return <div>{this.context}</div>; }     â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â‘¢ useContext (hook â€” phá»• biáº¿n nháº¥t!):               â”‚    â”‚
  â”‚  â”‚   function Child() {                                 â”‚    â”‚
  â”‚  â”‚     const theme = useContext(ThemeContext);           â”‚    â”‚
  â”‚  â”‚     return <div>{theme}</div>;                       â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  Æ¯U ÄIá»‚M SO Vá»šI OLD API:                                     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â†’ KHÃ”NG bá»‹ cháº·n bá»Ÿi shouldComponentUpdate! âœ…     â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG cáº§n PropTypes!                             â”‚    â”‚
  â”‚  â”‚ â†’ KHÃ”NG cáº§n static contextTypes/childContextTypes! â”‚    â”‚
  â”‚  â”‚ â†’ Provider/Consumer pattern rÃµ rÃ ng!               â”‚    â”‚
  â”‚  â”‚ â†’ Consumer update NGAY Cáº¢ KHI ancestor skip!     â”‚    â”‚
  â”‚  â”‚ â†’ API Ä‘Æ¡n giáº£n, dá»… dÃ¹ng!                         â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§6. Tá»± Viáº¿t createContext â€” Pub/Sub!

```
  Tá»° VIáº¾T createContext:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  CODE:                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ // â‘  Store â€” Pub/Sub system!                        â”‚    â”‚
  â”‚  â”‚ class Store {                                        â”‚    â”‚
  â”‚  â”‚   constructor() {                                    â”‚    â”‚
  â”‚  â”‚     this.subscriptions = [];                         â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   publish(value) {                                   â”‚    â”‚
  â”‚  â”‚     this.subscriptions.forEach(f => f(value));       â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   subscribe(f) {                                     â”‚    â”‚
  â”‚  â”‚     this.subscriptions.push(f);                      â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ // â‘¡ createContext!                                 â”‚    â”‚
  â”‚  â”‚ function createContext(defaultValue) {                â”‚    â”‚
  â”‚  â”‚   const store = new Store();                         â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   // Provider!                                       â”‚    â”‚
  â”‚  â”‚   class Provider extends React.PureComponent {       â”‚    â”‚
  â”‚  â”‚     componentDidMount() {                            â”‚    â”‚
  â”‚  â”‚       store.publish(this.props.value);               â”‚    â”‚
  â”‚  â”‚     }                                                â”‚    â”‚
  â”‚  â”‚     componentDidUpdate() {                           â”‚    â”‚
  â”‚  â”‚       store.publish(this.props.value); // PUBLISH!  â”‚    â”‚
  â”‚  â”‚     }                                                â”‚    â”‚
  â”‚  â”‚     render() {                                       â”‚    â”‚
  â”‚  â”‚       return this.props.children;                    â”‚    â”‚
  â”‚  â”‚     }                                                â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   // Consumer!                                       â”‚    â”‚
  â”‚  â”‚   class Consumer extends React.PureComponent {       â”‚    â”‚
  â”‚  â”‚     constructor(props) {                             â”‚    â”‚
  â”‚  â”‚       super(props);                                  â”‚    â”‚
  â”‚  â”‚       this.state = { value: defaultValue };          â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚       // SUBSCRIBE! â†’ setState khi publish!        â”‚    â”‚
  â”‚  â”‚       store.subscribe(value => {                     â”‚    â”‚
  â”‚  â”‚         this.setState({ value });                    â”‚    â”‚
  â”‚  â”‚       });                                            â”‚    â”‚
  â”‚  â”‚     }                                                â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚     render() {                                       â”‚    â”‚
  â”‚  â”‚       // Render prop pattern!                        â”‚    â”‚
  â”‚  â”‚       return this.props.children(this.state.value);  â”‚    â”‚
  â”‚  â”‚     }                                                â”‚    â”‚
  â”‚  â”‚   }                                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   return { Provider, Consumer };                     â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  FLOW:                                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â‘  createContext('dark') â†’ táº¡o Store + Provider    â”‚    â”‚
  â”‚  â”‚    + Consumer!                                       â”‚    â”‚
  â”‚  â”‚ â‘¡ Consumer constructor â†’ subscribe vÃ o Store!     â”‚    â”‚
  â”‚  â”‚ â‘¢ Provider mount/update â†’ store.publish(value)!    â”‚    â”‚
  â”‚  â”‚ â‘£ Store nháº­n publish â†’ gá»i Táº¤T Cáº¢ subscriber!   â”‚    â”‚
  â”‚  â”‚ â‘¤ Consumer subscriber â†’ setState â†’ re-render!     â”‚    â”‚
  â”‚  â”‚ â‘¥ Render prop: children(value) â†’ UI!              â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â˜… PureComponent á»Ÿ GIá»®A? KHÃ”NG áº£nh hÆ°á»Ÿng!        â”‚    â”‚
  â”‚  â”‚ â˜… VÃ¬ Consumer SUBSCRIBE trá»±c tiáº¿p vÃ o Store!     â”‚    â”‚
  â”‚  â”‚ â˜… BYPASS render tree! Giá»‘ng React-Redux!          â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§7. Source Code â€” ReactContext.js!

```
  REACT SOURCE CODE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  packages/react/src/ReactContext.js:                         â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ import {                                             â”‚    â”‚
  â”‚  â”‚   REACT_PROVIDER_TYPE,                               â”‚    â”‚
  â”‚  â”‚   REACT_CONTEXT_TYPE                                 â”‚    â”‚
  â”‚  â”‚ } from 'shared/ReactSymbols';                        â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ export function createContext(defaultValue) {         â”‚    â”‚
  â”‚  â”‚   const context = {                                  â”‚    â”‚
  â”‚  â”‚     $$typeof: REACT_CONTEXT_TYPE,                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚     // â˜… _currentValue: GIÃ TRá»Š HIá»†N Táº I!       â”‚    â”‚
  â”‚  â”‚     // Primary renderer (React DOM!)                â”‚    â”‚
  â”‚  â”‚     _currentValue: defaultValue,                     â”‚    â”‚
  â”‚  â”‚     // Secondary renderer (React Native Fabric!)    â”‚    â”‚
  â”‚  â”‚     _currentValue2: defaultValue,                    â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚     // Äáº¿m concurrent renderers!                    â”‚    â”‚
  â”‚  â”‚     _threadCount: 0,                                 â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚     Provider: null,                                  â”‚    â”‚
  â”‚  â”‚     Consumer: null,                                  â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚     _defaultValue: null,                             â”‚    â”‚
  â”‚  â”‚     _globalName: null,                               â”‚    â”‚
  â”‚  â”‚   };                                                 â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   // Provider = object Vá»šI $$typeof + _context!    â”‚    â”‚
  â”‚  â”‚   context.Provider = {                               â”‚    â”‚
  â”‚  â”‚     $$typeof: REACT_PROVIDER_TYPE,                   â”‚    â”‚
  â”‚  â”‚     _context: context, // â˜… tham chiáº¿u NGÆ¯á»¢C!    â”‚    â”‚
  â”‚  â”‚   };                                                 â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   // â˜… Consumer = CHÃNH context object!            â”‚    â”‚
  â”‚  â”‚   context.Consumer = context;                        â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚   return context;                                    â”‚    â”‚
  â”‚  â”‚ }                                                    â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â”‚  KEY INSIGHTS:                                                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
  â”‚  â”‚ â˜… createContext = chá»‰ tráº£ vá» DATA OBJECT!         â”‚    â”‚
  â”‚  â”‚   â†’ Giá»‘ng Suspense, createElement... = data!       â”‚    â”‚
  â”‚  â”‚   â†’ Logic xá»­ lÃ½ náº±m trong RECONCILER!             â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â˜… Provider.$$typeof = REACT_PROVIDER_TYPE!          â”‚    â”‚
  â”‚  â”‚   â†’ Reconciler nháº­n ra â†’ xá»­ lÃ½ value propagation! â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â˜… Consumer = context (chÃ­nh nÃ³!)                   â”‚    â”‚
  â”‚  â”‚   â†’ context.Consumer = context â†’ CIRCULAR!         â”‚    â”‚
  â”‚  â”‚   â†’ Consumer.$$typeof = REACT_CONTEXT_TYPE!        â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â˜… _currentValue: Reconciler GHI giÃ¡ trá»‹ hiá»‡n táº¡i!â”‚    â”‚
  â”‚  â”‚   â†’ Provider update â†’ reconciler ghi _currentValue!â”‚   â”‚
  â”‚  â”‚   â†’ Consumer/useContext Äá»ŒC _currentValue!        â”‚    â”‚
  â”‚  â”‚                                                      â”‚    â”‚
  â”‚  â”‚ â˜… _currentValue2: cho concurrent renderers!        â”‚    â”‚
  â”‚  â”‚   â†’ React DOM = primary â†’ _currentValue!           â”‚    â”‚
  â”‚  â”‚   â†’ React ART = secondary â†’ _currentValue2!        â”‚    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§8. So SÃ¡nh Old vs New Context!

```
  SO SÃNH:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”        â”‚
  â”‚  â”‚                   â”‚ OLD Context  â”‚ NEW Context  â”‚        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
  â”‚  â”‚ API               â”‚getChildCtx   â”‚createContext â”‚        â”‚
  â”‚  â”‚                   â”‚contextTypes  â”‚Provider      â”‚        â”‚
  â”‚  â”‚                   â”‚childCtxTypes â”‚Consumer      â”‚        â”‚
  â”‚  â”‚                   â”‚              â”‚useContext    â”‚        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
  â”‚  â”‚ PropTypes         â”‚ âœ… Cáº§n!     â”‚ âŒ KhÃ´ng!   â”‚        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
  â”‚  â”‚ PureComponent     â”‚ âŒ Bá»Š CHáº¶N!â”‚ âœ… Bypass!  â”‚        â”‚
  â”‚  â”‚ sCU = false       â”‚              â”‚              â”‚        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
  â”‚  â”‚ Default value     â”‚ KhÃ´ng cÃ³    â”‚ âœ… CÃ³!      â”‚        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
  â”‚  â”‚ Multiple contexts â”‚ Phá»©c táº¡p    â”‚ âœ… Dá»… dÃ ng! â”‚        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
  â”‚  â”‚ Hooks support     â”‚ âŒ          â”‚ âœ… useContextâ”‚        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
  â”‚  â”‚ Source code       â”‚Render tree  â”‚Symbol + data â”‚        â”‚
  â”‚  â”‚ mechanism         â”‚propagation  â”‚object + recncâ”‚        â”‚
  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤        â”‚
  â”‚  â”‚ Status            â”‚ Deprecated! â”‚ Recommended! â”‚        â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜        â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§9. SÆ¡ Äá»“ Tá»± Váº½!

### SÆ¡ Äá»“ 1: Prop Drilling vs Context

```
  PROP DRILLING vs CONTEXT:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  PROP DRILLING:                    CONTEXT:                   â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
  â”‚  â”‚ App          â”‚                â”‚ Provider     â”‚           â”‚
  â”‚  â”‚ theme="dark" â”‚                â”‚ value="dark" â”‚           â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
  â”‚         â”‚ prop                          â”‚                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”           â”‚
  â”‚  â”‚ Layout       â”‚                â”‚ Layout       â”‚           â”‚
  â”‚  â”‚ theme={prop} â”‚                â”‚ (no prop!)   â”‚           â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
  â”‚         â”‚ prop                          â”‚                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”           â”‚
  â”‚  â”‚ Sidebar      â”‚                â”‚ Sidebar      â”‚           â”‚
  â”‚  â”‚ theme={prop} â”‚                â”‚ (no prop!)   â”‚           â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
  â”‚         â”‚ prop                          â”‚                    â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”                â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”           â”‚
  â”‚  â”‚ Button       â”‚                â”‚ Consumer     â”‚           â”‚
  â”‚  â”‚ theme={prop} â”‚                â”‚ useContext() â”‚           â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚ â†’ "dark" âœ… â”‚           â”‚
  â”‚  â†‘ 4 táº§ng truyá»n!               â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
  â”‚  âŒ Phiá»n phá»©c!                  â†‘ TRá»°C TIáº¾P! âœ…          â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÆ¡ Äá»“ 2: Old Context Interruption

```
  CONTEXT INTERRUPTION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  Parent: setState({ theme: 'blue' })                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
  â”‚  â”‚ getChildContext()    â”‚ â†’ { theme: 'blue' }               â”‚
  â”‚  â”‚ re-render!           â”‚                                    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
  â”‚             â”‚ context                                        â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
  â”‚  â”‚ Child (PureComponent)â”‚                                    â”‚
  â”‚  â”‚ sCU: props same?     â”‚                                    â”‚
  â”‚  â”‚ â†’ YES! â†’ SKIP! âŒ  â”‚ â† CHáº¶N render!                  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
  â”‚             â•³ BLOCKED!                                       â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
  â”‚  â”‚ GrandChild           â”‚                                    â”‚
  â”‚  â”‚ this.context.theme   â”‚                                    â”‚
  â”‚  â”‚ â†’ VáºªN "red"! âŒ    â”‚ â† KHÃ”NG update!                  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÆ¡ Äá»“ 3: Pub/Sub DI Bypass

```
  PUB/SUB DI:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  Parent: this.theme.setValue('red')                          â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                    â”‚
  â”‚  â”‚ Store     [pub!]     â”‚ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”€ â”           â”‚
  â”‚  â”‚ (Theme instance)    â”‚                        â”‚           â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚           â”‚
  â”‚             â”‚ context (SAME ref!)               â”‚           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚           â”‚
  â”‚  â”‚ Child (PureComponent)â”‚                        â”‚           â”‚
  â”‚  â”‚ props/state same     â”‚                        â”‚ BYPASS!  â”‚
  â”‚  â”‚ â†’ SKIP render! âœ…  â”‚                        â”‚           â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚           â”‚
  â”‚             â•³ (skip!)                            â”‚           â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                        â”‚           â”‚
  â”‚  â”‚ GrandChild           â”‚ â† â”€ â”€ subscribe! â”€ â”€ â”˜           â”‚
  â”‚  â”‚ forceUpdate()! âœ…   â”‚                                    â”‚
  â”‚  â”‚ â†’ this.context       â”‚                                    â”‚
  â”‚  â”‚   .theme.value       â”‚                                    â”‚
  â”‚  â”‚ â†’ "red"! âœ…         â”‚                                    â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                    â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÆ¡ Äá»“ 4: New Context â€” createContext Source

```
  createContext SOURCE:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  createContext(defaultValue)                                 â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
  â”‚  â”‚ context = {                              â”‚                â”‚
  â”‚  â”‚   $$typeof: REACT_CONTEXT_TYPE,          â”‚                â”‚
  â”‚  â”‚   _currentValue: defaultValue,           â”‚                â”‚
  â”‚  â”‚   _currentValue2: defaultValue,          â”‚                â”‚
  â”‚  â”‚   Provider: null,                        â”‚                â”‚
  â”‚  â”‚   Consumer: null                         â”‚                â”‚
  â”‚  â”‚ }                                        â”‚                â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
  â”‚                 â”‚                                            â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
  â”‚  â”‚ context.Provider = {â”‚   â”‚ context.Consumer = â”‚           â”‚
  â”‚  â”‚  $$typeof:          â”‚   â”‚   context           â”‚           â”‚
  â”‚  â”‚   REACT_PROVIDER,   â”‚   â”‚                    â”‚           â”‚
  â”‚  â”‚  _context: context  â”‚   â”‚ (Consumer = context â”‚           â”‚
  â”‚  â”‚   â†‘ circular ref! â”‚   â”‚  itself! Circular!)â”‚           â”‚
  â”‚  â”‚ }                   â”‚   â”‚                    â”‚           â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
  â”‚                                                              â”‚
  â”‚  Reconciler:                                                 â”‚
  â”‚  â†’ Provider render â†’ ghi _currentValue!                    â”‚
  â”‚  â†’ Consumer render â†’ Ä‘á»c _currentValue!                    â”‚
  â”‚  â†’ useContext(ctx) â†’ Ä‘á»c ctx._currentValue!                â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### SÆ¡ Äá»“ 5: Evolution Timeline

```
  CONTEXT EVOLUTION:
  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
  â”‚                                                              â”‚
  â”‚  React < 16.3          React 16.3+          React 16.8+     â”‚
  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
  â”‚  â”‚ OLD API      â”‚     â”‚ NEW API      â”‚     â”‚ + HOOKS    â”‚  â”‚
  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚            â”‚  â”‚
  â”‚  â”‚getChildCtx() â”‚ â”€â”€â†’ â”‚createContext â”‚ â”€â”€â†’ â”‚useContext()â”‚  â”‚
  â”‚  â”‚contextTypes  â”‚     â”‚Provider      â”‚     â”‚+ Consumer  â”‚  â”‚
  â”‚  â”‚childCtxTypes â”‚     â”‚Consumer      â”‚     â”‚+ contextTy â”‚  â”‚
  â”‚  â”‚              â”‚     â”‚              â”‚     â”‚            â”‚  â”‚
  â”‚  â”‚PureComp CHáº¶Nâ”‚     â”‚PureComp OK! â”‚     â”‚PureComp OK!â”‚  â”‚
  â”‚  â”‚PropTypes reqâ”‚     â”‚No PropTypes â”‚     â”‚No PropTypesâ”‚  â”‚
  â”‚  â”‚DEPRECATED   â”‚     â”‚RECOMMENDED  â”‚     â”‚BEST! â˜…   â”‚  â”‚
  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
  â”‚                                                              â”‚
  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Â§10. Tá»± Viáº¿t â€” ContextEngine!

```javascript
/**
 * ContextEngine â€” MÃ´ phá»ng React Context Evolution!
 * Tá»± viáº¿t báº±ng tay, KHÃ”NG dÃ¹ng thÆ° viá»‡n!
 */
var ContextEngine = (function () {

  var log = [];
  function reset() { log = []; }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 1. OLD CONTEXT â€” getChildContext
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function OldContextSystem() {
    var parentContext = {};

    return {
      // Parent: set context
      setChildContext: function (key, value) {
        parentContext[key] = value;
        log.push('[Old] Parent setChildContext: ' + key + '=' + value);
      },

      // Child: get context (REQUIRES render tree!)
      getContext: function (key, shouldComponentUpdate) {
        if (shouldComponentUpdate === false) {
          log.push('[Old] Child sCU=false â†’ BLOCKED! âŒ');
          return undefined; // INTERRUPTED!
        }
        var val = parentContext[key];
        log.push('[Old] Child getContext: ' + key + '=' + val + ' âœ…');
        return val;
      }
    };
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 2. PUB/SUB DI â€” Bypass PureComponent
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function PubSubStore(initialValue) {
    var value = initialValue;
    var subscriptions = [];

    return {
      getValue: function () { return value; },

      setValue: function (newValue) {
        value = newValue;
        log.push('[DI] Store.setValue: ' + newValue);
        // Publish to ALL subscribers!
        subscriptions.forEach(function (fn) { fn(newValue); });
      },

      subscribe: function (fn) {
        subscriptions.push(fn);
        log.push('[DI] New subscriber! Total: ' + subscriptions.length);
      }
    };
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 3. NEW CONTEXT â€” createContext
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function createContext(defaultValue) {
    var store = {
      subscriptions: [],
      currentValue: defaultValue,

      publish: function (value) {
        this.currentValue = value;
        this.subscriptions.forEach(function (fn) { fn(value); });
      },

      subscribe: function (fn) {
        this.subscriptions.push(fn);
      }
    };

    // Provider
    function Provider(value) {
      log.push('[New] Provider value=' + value);
      store.publish(value);
    }

    // Consumer
    function Consumer(renderFn) {
      var currentValue = store.currentValue;

      // Subscribe for future updates
      store.subscribe(function (value) {
        log.push('[New] Consumer updated: ' + value);
      });

      log.push('[New] Consumer read: ' + currentValue);
      return renderFn(currentValue);
    }

    return {
      Provider: Provider,
      Consumer: Consumer,
      _store: store
    };
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // 4. SOURCE CODE SIMULATION
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function simulateSourceCode() {
    log.push('=== Source Code Structure ===');

    var REACT_CONTEXT_TYPE = 'Symbol(react.context)';
    var REACT_PROVIDER_TYPE = 'Symbol(react.provider)';

    var context = {
      '$$typeof': REACT_CONTEXT_TYPE,
      _currentValue: 'dark', // default!
      _currentValue2: 'dark', // secondary renderer
      _threadCount: 0,
      Provider: null,
      Consumer: null
    };

    context.Provider = {
      '$$typeof': REACT_PROVIDER_TYPE,
      _context: context // circular ref!
    };

    context.Consumer = context; // Consumer = context itself!

    log.push('context.$$typeof = ' + context['$$typeof']);
    log.push('context._currentValue = ' + context._currentValue);
    log.push('Provider.$$typeof = ' + context.Provider['$$typeof']);
    log.push('Provider._context === context? ' +
      (context.Provider._context === context));
    log.push('Consumer === context? ' + (context.Consumer === context));

    return context;
  }

  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  // DEMO
  // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  function demo() {
    console.log('â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');
    console.log('â•‘  CONTEXT ENGINE â€” DEMO                      â•‘');
    console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');

    // 1. Old Context â€” Interruption!
    console.log('\n--- 1. OLD CONTEXT (Interruption!) ---');
    reset();
    var old = OldContextSystem();
    old.setChildContext('theme', 'red');

    // With sCU = true (works!)
    old.getContext('theme', true);

    // Update theme
    old.setChildContext('theme', 'blue');

    // With sCU = false (BLOCKED!)
    old.getContext('theme', false);

    log.forEach(function (l) { console.log('  ' + l); });

    // 2. Pub/Sub DI â€” Bypass!
    console.log('\n--- 2. PUB/SUB DI (Bypass!) ---');
    reset();
    var store = PubSubStore('blue');

    // GrandChild subscribes
    store.subscribe(function (val) {
      log.push('[DI] GrandChild forceUpdate! value=' + val + ' âœ…');
    });

    // PureComponent in between â€” doesn't matter!
    log.push('[DI] Child (PureComponent) sCU=false â†’ SKIP render!');
    log.push('[DI] But GrandChild subscribed DIRECTLY to store!');

    // Parent publishes
    store.setValue('red');

    log.forEach(function (l) { console.log('  ' + l); });

    // 3. New Context â€” createContext!
    console.log('\n--- 3. NEW CONTEXT (createContext!) ---');
    reset();
    var ctx = createContext('dark');

    // Consumer subscribes (simulate mount)
    var rendered = ctx.Consumer(function (val) {
      return '<button>' + val + '</button>';
    });
    log.push('[New] Rendered: ' + rendered);

    // Provider updates
    ctx.Provider('light');

    log.forEach(function (l) { console.log('  ' + l); });

    // 4. Source Code
    console.log('\n--- 4. SOURCE CODE ---');
    reset();
    simulateSourceCode();
    log.forEach(function (l) { console.log('  ' + l); });

    console.log('\nâ•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—');
    console.log('â•‘  âœ… Demo Complete!                           â•‘');
    console.log('â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•');
  }

  return {
    OldContextSystem: OldContextSystem,
    PubSubStore: PubSubStore,
    createContext: createContext,
    simulateSourceCode: simulateSourceCode,
    demo: demo, reset: reset
  };
})();

// Cháº¡y: ContextEngine.demo();
```

---

## Â§11. CÃ¢u Há»i Luyá»‡n Táº­p!

### â“ CÃ¢u 1: Context giáº£i quyáº¿t váº¥n Ä‘á» gÃ¬?

**Tráº£ lá»i:**

- Giáº£i quyáº¿t **Prop Drilling** â€” truyá»n data qua nhiá»u táº§ng component MÃ€ táº§ng trung gian KHÃ”NG cáº§n!
- Context cho phÃ©p truyá»n data **XUYÃŠN Táº¦NG** â€” trá»±c tiáº¿p tá»« Provider Ä‘áº¿n Consumer!
- Use cases: Theme (dark/light), Locale, Auth, Router, Redux Store!

### â“ CÃ¢u 2: Old Context API hoáº¡t Ä‘á»™ng tháº¿ nÃ o?

**Tráº£ lá»i:**

- Parent: `getChildContext()` â†’ tráº£ vá» context object!
- Parent: `childContextTypes` â†’ khai bÃ¡o types vá»›i PropTypes!
- Child: `contextTypes` â†’ Ä‘Äƒng kÃ½ nháº­n context!
- Child: `this.context.value` â†’ Ä‘á»c giÃ¡ trá»‹!
- State thay Ä‘á»•i â†’ `getChildContext()` gá»i láº¡i â†’ truyá»n xuá»‘ng!

### â“ CÃ¢u 3: Context Interruption lÃ  gÃ¬? Táº¡i sao xáº£y ra?

**Tráº£ lá»i:**

- Khi component trung gian cÃ³ **shouldComponentUpdate = false** (hoáº·c PureComponent):
  - Props/state khÃ´ng Ä‘á»•i â†’ **SKIP render**!
  - Skip render â†’ **CHáº¶N** context truyá»n xuá»‘ng!
  - GrandChild **KHÃ”NG Ä‘Æ°á»£c update** dÃ¹ context thay Ä‘á»•i!

**NguyÃªn nhÃ¢n gá»‘c**: Old Context truyá»n **QUA render tree**! SCU cháº·n render â†’ cháº·n context!

**MÃ¢u thuáº«n**: PureComponent muá»‘n **giáº£m render** vs Context **Cáº¦N render** Ä‘á»ƒ truyá»n!

### â“ CÃ¢u 4: Pub/Sub DI giáº£i quyáº¿t Context Interruption tháº¿ nÃ o?

**Tráº£ lá»i:**

```
â‘  Táº¡o Store (Pub/Sub): { value, subscribe(), setValue() }
â‘¡ Truyá»n Store object qua context (REFERENCE Cá» Äá»ŠNH!)
â‘¢ GrandChild subscribe: store.subscribe(() => forceUpdate())
â‘£ Parent publish: store.setValue('red')
â‘¤ Store notify â†’ GrandChild forceUpdate â†’ re-render! âœ…
```

- PureComponent **KHÃ”NG cháº·n** vÃ¬ context reference KHÃ”NG Äá»”I!
- GrandChild update **TRá»°C TIáº¾P** qua subscription, BYPASS render tree!
- **Giá»‘ng React-Redux**: Store qua Context + Subscribe pattern!

### â“ CÃ¢u 5: New createContext source code tráº£ vá» gÃ¬?

**Tráº£ lá»i:**

```javascript
createContext(defaultValue) â†’ {
  $$typeof: REACT_CONTEXT_TYPE,     // Symbol marker!
  _currentValue: defaultValue,       // Primary renderer value!
  _currentValue2: defaultValue,      // Secondary renderer value!
  _threadCount: 0,
  Provider: {
    $$typeof: REACT_PROVIDER_TYPE,
    _context: context                // Circular ref NGÆ¯á»¢C!
  },
  Consumer: context                  // Consumer = CHÃNH context! Circular!
}
```

- Chá»‰ lÃ  **DATA OBJECT** â€” giá»‘ng Suspense, createElement!
- Logic xá»­ lÃ½ náº±m trong **React Reconciler**!
- Provider._context â†’ reference **NGÆ¯á»¢C** vá» context!
- Consumer = context itself â†’ **CIRCULAR reference**!

### â“ CÃ¢u 6: Táº¡i sao New Context khÃ´ng bá»‹ PureComponent cháº·n?

**Tráº£ lá»i:**

- New Context **KHÃ”NG truyá»n QUA render tree**!
- Reconciler **TRá»°C TIáº¾P** tÃ¬m Consumer trong fiber tree!
- Provider update â†’ reconciler scan â†’ tÃ¬m Consumer/useContext â†’ force update!
- **BYPASS** shouldComponentUpdate hoÃ n toÃ n!
- CÆ¡ cháº¿ giá»‘ng Pub/Sub DI nhÆ°ng built-in vÃ o React reconciler!

### â“ CÃ¢u 7: So sÃ¡nh 3 cÃ¡ch Ä‘á»c Context trong New API?

**Tráº£ lá»i:**

| CÃ¡ch | Syntax | Component type |
|---|---|---|
| **Consumer** | `<Consumer>{val => ...}</Consumer>` | Class + Function |
| **contextType** | `static contextType = Ctx; this.context` | Class ONLY |
| **useContext** | `const val = useContext(Ctx)` | Function ONLY â˜… |

- **useContext** phá»• biáº¿n nháº¥t â€” hook, ngáº¯n gá»n, function component!
- **Consumer** â€” render prop pattern, cÃ³ thá»ƒ dÃ¹ng everywhere!
- **contextType** â€” class component only, chá»‰ 1 context!

---

> ğŸ¯ **Tá»•ng káº¿t React Context Evolution:**
> - **Context**: truyá»n data xuyÃªn táº§ng, giáº£i quyáº¿t Prop Drilling!
> - **Old API**: getChildContext + contextTypes + PropTypes â†’ deprecated!
> - **Context Interruption**: PureComponent/sCU cháº·n render â†’ cháº·n context!
> - **Pub/Sub DI**: Store qua context + subscribe â†’ bypass PureComponent!
> - **New API**: createContext + Provider + Consumer/useContext!
> - **New Context KHÃ”NG bá»‹ PureComponent cháº·n** â€” reconciler trá»±c tiáº¿p update!
> - **Source code**: createContext = data object + Symbol markers + circular refs!
> - **Provider._context**: reference ngÆ°á»£c vá» context!
> - **Consumer = context**: chÃ­nh context object â€” circular!
> - **ContextEngine** tá»± viáº¿t: old context, pub/sub DI, new context, source code!
> - **7 cÃ¢u há»i** luyá»‡n táº­p vá»›i Ä‘Ã¡p Ã¡n chi tiáº¿t!
